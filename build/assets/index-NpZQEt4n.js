const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/learning-CJqkZPhv.js","assets/ui-C48fKjuK.js","assets/vendor-D3F3s8fL.js","assets/game-DhYA9e1X.js","assets/progress-Bh7B1qMw.js","assets/EnhancedVocabularyCard-BhNc2Wfk.js","assets/questionAdapter-qfrWA0Uz.js","assets/VocabularyDifficultySelection-CrxCPQXf.js","assets/VocabularyCategorySelection-DqZcrsMJ.js","assets/EnhancedGrammarQuiz-Buq35HRg.js","assets/GrammarQuizDifficultySelection-D6cnHa78.js","assets/CategorySelection-CXS2pTWu.js","assets/DifficultySelection-mQ-c7S8j.js","assets/Question-uscAv-YO.js","assets/Results-v_bTYCrw.js","assets/AppSettings-CpTWmeFn.js","assets/notificationManager-DRqVOwDk.js","assets/TimeAttackMode-D8kI3G-Z.js"])))=>i.map(i=>d[i]);
import{r as o,j as e}from"./ui-C48fKjuK.js";import{a as Ce}from"./vendor-D3F3s8fL.js";import{D as V,_ as j,a as Ee}from"./progress-Bh7B1qMw.js";import{B as N,C as S,c as H,f as M,b as O,a as A}from"./game-DhYA9e1X.js";import{C as _e,b as Pe,P as Re,c as z,B as De,a as ie,d as oe,G as He,T as Me,e as Oe,F as ze,H as Ve,D as We,X as ue,R as Xe}from"./learning-CJqkZPhv.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var G={},le;function qe(){if(le)return G;le=1;var t=Ce();return G.createRoot=t.createRoot,G.hydrateRoot=t.hydrateRoot,G}var Be=qe();const J=[];for(let t=1;t<=100;t++){let s,a,r,n;t<=20?(s=1,a=50,r=3,n={normal:.8,rare:.18,epic:.02,legendary:0}):t<=40?(s=2,a=100,r=3+Math.floor((t-1)/10),n={normal:.6,rare:.3,epic:.09,legendary:.01}):t<=60?(s=3,a=200,r=3+Math.floor((t-1)/10),n={normal:.4,rare:.35,epic:.2,legendary:.05}):t<=80?(s=4,a=300,r=3+Math.floor((t-1)/10),n={normal:.25,rare:.35,epic:.3,legendary:.1}):(s=5,a=500,r=3+Math.floor((t-1)/10),n={normal:.15,rare:.3,epic:.35,legendary:.2}),J.push({level:t,chapter:s,requiredXP:a,maxHearts:Math.min(r,12),rankProbabilities:n})}const L={1:{name:"基礎編",description:"英検5-4級レベル（300-1,000語）",levelRange:"Level 1-20",xpPerLevel:50,maxHearts:4},2:{name:"中級編",description:"英検3-2級レベル（1,000-3,000語）",levelRange:"Level 21-40",xpPerLevel:100,maxHearts:5},3:{name:"上級編",description:"英検2-1級レベル（3,000-6,000語）",levelRange:"Level 41-60",xpPerLevel:200,maxHearts:6},4:{name:"マスター編",description:"TOEIC800+レベル（6,000-12,000語）",levelRange:"Level 61-80",xpPerLevel:300,maxHearts:8},5:{name:"ネイティブ編",description:"ネイティブレベル（12,000-20,000語）",levelRange:"Level 81-100",xpPerLevel:500,maxHearts:12}};function Qe(t){const s=J.find(n=>n.level===t);if(!s)return 0;const a=(s.chapter-1)*20+1;return s.chapter*20,(t-a+1)/20*100}const xe={normal:{color:"text-gray-600",bgColor:"bg-gray-100",icon:"⚪",name:"ノーマル"},rare:{color:"text-yellow-600",bgColor:"bg-yellow-100",icon:"🟡",name:"レア"},epic:{color:"text-purple-600",bgColor:"bg-purple-100",icon:"🟣",name:"エピック"},legendary:{color:"text-orange-600",bgColor:"bg-orange-100",icon:"🟠",name:"レジェンド"}},X={listening:{name:"リスニング",icon:"🎧",description:"聞き取り能力"},reading:{name:"リーディング",icon:"📖",description:"読解能力"},writing:{name:"ライティング",icon:"✍️",description:"文章作成能力"},grammar:{name:"文法",icon:"📝",description:"文法知識"},idioms:{name:"語法・熟語",icon:"💬",description:"語法と熟語の知識"},vocabulary:{name:"語彙・単語",icon:"📚",description:"単語力"}},q={LEVEL_XP_REQUIREMENTS:{1:50,21:100,41:200,61:300,81:500},RANK_XP:{normal:{min:3,max:8,bonusMin:15,bonusMax:25},rare:{min:10,max:18,bonusMin:40,bonusMax:60},epic:{min:25,max:40,bonusMin:80,bonusMax:120},legendary:{min:50,max:100,bonusMin:150,bonusMax:300}},BONUS_CONDITIONS:{PERFECT_SCORE:1.5,HIGH_ACCURACY:1.3,STREAK_BONUS:1.2}};function te(t){return t<=20?1:t<=40?2:t<=60?3:t<=80?4:5}function ee(t){const s=te(t);return q.LEVEL_XP_REQUIREMENTS[s*20-19]||50}function ce(t){let s=1,a=0;for(;s<=100;){const l=ee(s);if(a+l>t)break;a+=l,s++}const r=te(s),n=ee(s)-(t-a),i=(t-a)/ee(s)*100;return{level:s,chapter:r,xp:t,xpToNext:n,progress:i}}function de(t){const s=Math.min(3+Math.floor((t-1)/10),12),a=Date.now();return{current:s,max:s,lastRecovery:a,nextRecovery:a+3600*1e3}}function $e(t){const s=te(t),a=Ue(s),r=Math.random();let n=0;for(const[i,l]of Object.entries(a))if(n+=l,r<=n)return i;return"normal"}function Ue(t){return{1:{normal:.8,rare:.18,epic:.02,legendary:0},2:{normal:.6,rare:.3,epic:.09,legendary:.01},3:{normal:.4,rare:.35,epic:.2,legendary:.05},4:{normal:.25,rare:.35,epic:.3,legendary:.1},5:{normal:.15,rare:.3,epic:.35,legendary:.2}}[t]}function Fe(t,s=!1){const a=q.RANK_XP[t],r=s?a.bonusMin:a.min,n=s?a.bonusMax:a.max;return Math.floor(Math.random()*(n-r+1))+r}function ge(t){return Object.values(t).reduce((a,r)=>a+r,0)===30&&Object.values(t).every(a=>a>=0&&a<=30)}const B={balanced:{listening:5,reading:5,writing:5,grammar:5,idioms:5,vocabulary:5},vocabulary:{listening:3,reading:3,writing:3,grammar:3,idioms:3,vocabulary:15},practical:{listening:10,reading:10,writing:2.5,grammar:2.5,idioms:2.5,vocabulary:2.5},grammar:{listening:1,reading:1,writing:1,grammar:15,idioms:10,vocabulary:2}};function Ge(t){const s=["listening","reading","writing","grammar","idioms","vocabulary"],a=s.map(l=>t[l]),r=a.reduce((l,d)=>l+d,0),n=Math.random()*r;let i=0;for(let l=0;l<s.length;l++)if(i+=a[l],n<=i)return s[l];return"vocabulary"}function Lt(t,s,a=!1){const n=t.filter(g=>g.isCorrect).length/t.length;let i=Fe(s,a);n===1?i*=q.BONUS_CONDITIONS.PERFECT_SCORE:n>=.8&&(i*=q.BONUS_CONDITIONS.HIGH_ACCURACY);let l=0,d=0;for(const g of t)g.isCorrect?(l++,d=Math.max(d,l)):l=0;return d>=3&&(i*=q.BONUS_CONDITIONS.STREAK_BONUS),Math.round(i)}function Ke(t){const s=Date.now(),r=(s-t.lastRecovery)/(3600*1e3);if(t.current>=t.max)return{...t,lastRecovery:s,nextRecovery:s+3600*1e3};if(r>=1){const n=Math.floor(r),i=Math.min(t.current+n,t.max),l=(r-Math.floor(r))*(3600*1e3),d=s+3600*1e3-l;return{...t,current:i,lastRecovery:s-l,nextRecovery:d}}return t}function Je(t){return t.current<=0?null:{...t,current:t.current-1}}class Q{userLevel;heartSystem;statusAllocation;constructor(s=0){this.userLevel=ce(s),this.heartSystem=de(this.userLevel.level),this.statusAllocation={...B.balanced}}getLevel(){return{...this.userLevel}}getHeartSystem(){return{...this.heartSystem}}getStatusAllocation(){return{...this.statusAllocation}}addXP(s){const a=this.userLevel.level;this.userLevel=ce(this.userLevel.xp+s);const r=this.userLevel.level>a;return r&&(this.heartSystem=de(this.userLevel.level)),{leveledUp:r,newLevel:r?{...this.userLevel}:void 0}}processHeartRecovery(){return this.heartSystem=Ke(this.heartSystem),{...this.heartSystem}}consumeHeart(){const s=Je(this.heartSystem);return s?(this.heartSystem=s,!0):!1}updateStatusAllocation(s){return ge(s)?(this.statusAllocation={...s},!0):!1}applyStatusTemplate(s){const a=B[s];return a?(this.statusAllocation={...a},!0):!1}getNextQuestionRank(){return $e(this.userLevel.level)}getNextSkillField(){return Ge(this.statusAllocation)}getChapterProgress(){const s=Qe(this.userLevel.level),a=L[this.userLevel.chapter];return{chapter:this.userLevel.chapter,progress:s,chapterInfo:a}}getLevelConfig(){return J.find(s=>s.level===this.userLevel.level)}getNextLevelInfo(){this.getLevelConfig();const s=J.find(a=>a.level===this.userLevel.level+1);return s?{currentLevel:this.userLevel.level,nextLevel:s.level,xpToNext:this.userLevel.xpToNext,progress:this.userLevel.progress,nextLevelRequiredXP:s.requiredXP,nextLevelMaxHearts:s.maxHearts}:null}getChapterCompletion(){const s=this.getChapterProgress(),a=s.progress>=100;return{chapter:s.chapter,progress:s.progress,isComplete:a,chapterInfo:s.chapterInfo}}getOverallProgress(){const s=this.getChapterProgress(),a=this.getNextLevelInfo();return{level:this.userLevel.level,chapter:this.userLevel.chapter,totalXP:this.userLevel.xp,chapterProgress:s.progress,levelProgress:this.userLevel.progress,nextLevelInfo:a,heartSystem:this.heartSystem}}serialize(){return{userLevel:this.userLevel,heartSystem:this.heartSystem,statusAllocation:this.statusAllocation}}static deserialize(s){const a=new Q(s.userLevel.xp);return a.userLevel=s.userLevel,a.heartSystem=s.heartSystem,a.statusAllocation=s.statusAllocation,a}}let P=null;function p(){if(!P){const t=localStorage.getItem("entp-english-level-manager");if(t)try{const s=JSON.parse(t);P=Q.deserialize(s)}catch(s){console.error("Failed to restore level manager:",s),P=new Q}else P=new Q}return P}function k(){P&&localStorage.setItem("entp-english-level-manager",JSON.stringify(P.serialize()))}const Ye=({showDetailed:t=!0,showChapterProgress:s=!0,compact:a=!1})=>{const[r,n]=o.useState(()=>p().getLevel()),[i,l]=o.useState(()=>p().getChapterProgress());o.useEffect(()=>{const h=p(),m=h.getLevel(),u=h.getChapterProgress();n(m),l(u)},[]);const d=h=>({1:"bg-green-500",2:"bg-blue-500",3:"bg-purple-500",4:"bg-orange-500",5:"bg-red-500"})[h],g=h=>({1:"from-green-400 to-green-600",2:"from-blue-400 to-blue-600",3:"from-purple-400 to-purple-600",4:"from-orange-400 to-orange-600",5:"from-red-400 to-red-600"})[h];return a?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${d(r.chapter)} text-foreground flex items-center justify-center text-sm font-bold`,children:r.chapter}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Level ",r.level]}),e.jsx("div",{className:"text-xs text-gray-500",children:L[r.chapter].name})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${g(r.chapter)}`,style:{width:`${r.progress}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.xpToNext,"XP to next level"]})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"レベル情報"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${d(r.chapter)} text-foreground flex items-center justify-center text-lg font-bold`,children:r.chapter}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"章"}),e.jsx("div",{className:"text-xs text-gray-400",children:L[r.chapter].name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-lg font-medium text-gray-700",children:["Level ",r.level]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r.xp," XP"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full bg-gradient-to-r ${g(r.chapter)} transition-all duration-500`,style:{width:`${r.progress}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["進捗: ",r.progress.toFixed(1),"%"]}),e.jsxs("span",{children:["次のレベルまで: ",r.xpToNext," XP"]})]})]}),s&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[L[r.chapter].name,"の進捗"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[i.progress.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${g(r.chapter)} transition-all duration-500`,style:{width:`${i.progress}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:L[r.chapter].description})]}),t&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"章"}),e.jsx("div",{className:"font-medium",children:L[r.chapter].name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"レベル範囲"}),e.jsx("div",{className:"font-medium",children:L[r.chapter].levelRange})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"必要XP/レベル"}),e.jsxs("div",{className:"font-medium",children:[L[r.chapter].xpPerLevel," XP"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"最大ハート数"}),e.jsxs("div",{className:"font-medium",children:[L[r.chapter].maxHearts,"個"]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{const h=p(),m=h.addXP(100);n(h.getLevel()),k(),m.leveledUp&&alert(`レベルアップ！ Level ${m.newLevel?.level} に上がりました！`)},className:"px-3 py-1 rounded-md text-xs font-medium bg-blue-500 text-foreground hover:bg-blue-600 transition-colors",title:"テスト用: 100XP追加",children:"+100XP"}),e.jsx("button",{onClick:()=>{const h=p(),m=h.addXP(500);n(h.getLevel()),k(),m.leveledUp&&alert(`レベルアップ！ Level ${m.newLevel?.level} に上がりました！`)},className:"px-3 py-1 rounded-md text-xs font-medium bg-purple-500 text-foreground hover:bg-purple-600 transition-colors",title:"テスト用: 500XP追加",children:"+500XP"}),e.jsx("button",{onClick:()=>{const h=p();h.addXP(1e3),n(h.getLevel()),k(),alert("1000XP追加しました！")},className:"px-3 py-1 rounded-md text-xs font-medium bg-orange-500 text-foreground hover:bg-orange-600 transition-colors",title:"テスト用: 1000XP追加",children:"+1000XP"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"※ テスト用ボタンです"})]})]})]})]})},Ze=()=>{const[t,s]=o.useState(()=>p().getLevel());return{userLevel:t,addXP:n=>{const i=p(),l=i.addXP(n);return s(i.getLevel()),k(),l},refreshLevel:()=>{const n=p();s(n.getLevel())}}},et=({onHeartChange:t,showRecoveryTime:s=!0,compact:a=!1})=>{const[r,n]=o.useState(()=>p().getHeartSystem()),[i,l]=o.useState(0);o.useEffect(()=>{const u=p().processHeartRecovery();n(u),t?.(u)},[]),o.useEffect(()=>{const m=setInterval(()=>{const x=p().processHeartRecovery();x.current!==r.current&&(n(x),t?.(x),k())},3e4);return()=>clearInterval(m)},[r.current,t]),o.useEffect(()=>{const m=()=>{const x=Date.now(),b=r.nextRecovery-x;l(Math.max(0,b))};m();const u=setInterval(m,1e3);return()=>clearInterval(u)},[r.nextRecovery,r.current]);const d=m=>{const u=Math.floor(m/1e3),x=Math.floor(u/3600),b=Math.floor(u%3600/60),f=u%60;return x>0?`${x}:${b.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`:`${b}:${f.toString().padStart(2,"0")}`},g=r.current>0,h=()=>{const m=p();if(m.consumeHeart()){const x=m.getHeartSystem();n(x),t?.(x),k()}};return a?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"flex space-x-1",children:Array.from({length:r.max},(m,u)=>e.jsx("div",{className:`w-4 h-4 rounded-full ${u<r.current?"bg-red-500 text-foreground":"bg-gray-200 text-gray-400"}`,children:"♥"},u))}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.current,"/",r.max]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"体力システム"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"体力"}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:r.max},(m,u)=>e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm ${u<r.current?"bg-red-500 text-foreground":"bg-gray-200 text-gray-400"}`,children:"♥"},u))}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[r.current,"/",r.max]})]})]}),s&&r.current<r.max&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"次の回復まで"}),e.jsx("span",{className:"font-mono",children:d(i)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-1000",style:{width:`${(3600*1e3-i)/(3600*1e3)*100}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"1問題につき1体力消費"}),e.jsx("p",{children:"1時間で1体力回復"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:h,disabled:!g,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${g?"bg-red-500 text-foreground hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:g?"体力を消費":"体力不足"}),e.jsx("button",{onClick:()=>{p();const m={...r,current:r.max,lastRecovery:Date.now(),nextRecovery:Date.now()+3600*1e3};n(m),t?.(m)},className:"px-3 py-2 rounded-md text-sm font-medium bg-green-500 text-foreground hover:bg-green-600 transition-colors",title:"テスト用: 体力を全回復",children:"♥回復"})]})]}),r.current===0&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-yellow-600 mr-2",children:"⚠️"}),e.jsx("div",{className:"text-sm text-yellow-800",children:"体力が不足しています。回復を待つか、時間をスキップしてください。"})]})})]})},tt=()=>{const[t,s]=o.useState(()=>p().getHeartSystem());return{heartSystem:t,consumeHeart:()=>{const i=p();if(i.consumeHeart()){const d=i.getHeartSystem();return s(d),k(),!0}return!1},processRecovery:()=>{const l=p().processHeartRecovery();return s(l),k(),l},refreshHearts:()=>{const l=p().processHeartRecovery();s(l)}}},st=({onAllocationChange:t,readOnly:s=!1})=>{const[a,r]=o.useState(()=>p().getStatusAllocation()),[n,i]=o.useState(!0),[l,d]=o.useState("");o.useEffect(()=>{const c=ge(a);i(c),t?.(a)},[a]);const g=(c,y)=>{const E={...a,[c]:Math.max(0,Math.min(30,y))};r(E)},h=c=>{const y=B[c];r({...y}),d(c)},m=()=>{r({...B.balanced}),d("balanced")},u=()=>Object.values(a).reduce((c,y)=>c+y,0),x=()=>30-u(),b=c=>a[c]/30*100,f=c=>{const y=b(c);return y>=30?"bg-blue-500":y>=20?"bg-green-500":y>=10?"bg-yellow-500":"bg-gray-300"},C=["listening","reading","writing","grammar","idioms","vocabulary"];return s?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"現在のステータス配分"}),e.jsx("div",{className:"space-y-3",children:C.map(c=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:X[c].icon}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:X[c].name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${f(c)}`,style:{width:`${b(c)}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-600 w-8 text-right",children:[a[c],"pt"]})]})]},c))}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"合計ポイント"}),e.jsxs("span",{className:"font-medium",children:[u(),"/30pt"]})]})})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"ステータス配分"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"残りポイント"}),e.jsx("span",{className:`text-sm font-medium ${x()<0?"text-red-500":"text-gray-700"}`,children:x()})]})]}),!n&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"⚠️"}),e.jsx("div",{className:"text-sm text-red-800",children:"合計が30ポイントになるように調整してください。"})]})}),e.jsx("div",{className:"space-y-4",children:C.map(c=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:X[c].icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:X[c].name}),e.jsx("div",{className:"text-xs text-gray-500",children:X[c].description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0",max:"30",value:a[c],onChange:y=>g(c,parseInt(y.target.value)||0),className:"w-16 px-2 py-1 text-sm border border-gray-300 rounded-md text-center"}),e.jsx("span",{className:"text-sm text-gray-600",children:"pt"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${f(c)}`,style:{width:`${b(c)}%`}})})]},c))}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"合計ポイント"}),e.jsxs("span",{className:`font-medium ${u()===30?"text-green-600":"text-red-500"}`,children:[u(),"/30pt"]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"テンプレート"}),e.jsx("button",{onClick:m,className:"text-xs text-blue-600 hover:text-blue-800",children:"リセット"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(B).map(([c,y])=>e.jsxs("button",{onClick:()=>h(c),className:`px-3 py-2 text-xs rounded-md border transition-colors ${l===c?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"}`,children:[c==="balanced"&&"バランス型",c==="vocabulary"&&"語彙重視型",c==="practical"&&"実践重視型",c==="grammar"&&"文法強化型"]},c))})]}),e.jsx("button",{onClick:()=>{p().updateStatusAllocation(a),k()},disabled:!n,className:`w-full py-2 px-4 rounded-md text-sm font-medium transition-colors ${n?"bg-blue-500 text-foreground hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"配分を保存"})]})]})},at=()=>{const[t,s]=o.useState(()=>p().getStatusAllocation());return{allocation:t,updateAllocation:n=>p().updateStatusAllocation(n)?(s(n),k(),!0):!1,applyTemplate:n=>{const i=p();if(i.applyStatusTemplate(n)){const d=i.getStatusAllocation();return s(d),k(),!0}return!1}}},Ct=({rank:t,showIcon:s=!0,showName:a=!0,showXP:r=!1,question:n,size:i="md",className:l=""})=>{const d=xe[t],g={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},h={sm:"text-sm",md:"text-base",lg:"text-lg"};return e.jsxs("div",{className:`inline-flex items-center space-x-1 ${d.bgColor} ${d.color} rounded-full ${g[i]} ${l}`,children:[s&&e.jsx("span",{className:h[i],children:d.icon}),a&&e.jsx("span",{className:"font-medium",children:d.name}),r&&n&&e.jsxs("span",{className:"text-xs opacity-75",children:["+",n.xpReward,"XP"]})]})},rt=({currentLevel:t,showProbabilities:s=!0})=>{const r=(i=>i<=20?{normal:80,rare:18,epic:2,legendary:0}:i<=40?{normal:60,rare:30,epic:9,legendary:1}:i<=60?{normal:40,rare:35,epic:20,legendary:5}:i<=80?{normal:25,rare:35,epic:30,legendary:10}:{normal:15,rare:30,epic:35,legendary:20})(t),n=["normal","rare","epic","legendary"];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["問題ランク出現率 (Level ",t,")"]}),e.jsx("div",{className:"space-y-3",children:n.map(i=>{const l=xe[i],d=r[i];return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:l.icon}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:l.name})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${l.bgColor.replace("bg-","bg-").replace("-100","-500")}`,style:{width:`${d}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-600 w-8 text-right",children:[d,"%"]})]})]},i)})}),s&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("p",{children:"• レベルが上がるほど高ランクの問題が出現しやすくなります"}),e.jsx("p",{children:"• レジェンド問題はLevel 21以降から出現します"})]})})]})};function nt({onNavigateToGrammar:t,onNavigateToVocabulary:s,onNavigateToGrammarQuiz:a,onNavigateToEssay:r,onNavigateToCombinedTest:n,onNavigateToAchievements:i,onNavigateToAppSettings:l,onNavigateToTimeAttack:d,onNavigateToSimpleTowerDefense:g}){const{userLevel:h,refreshLevel:m}=Ze(),{heartSystem:u,consumeHeart:x,processRecovery:b}=tt();at();const[f,C]=o.useState(V.getUserStats()),[c,y]=o.useState(!1),[E,$]=o.useState(!1);o.useEffect(()=>{(()=>{const Z=V.getUserStats();C(Z),m()})();const Y=setInterval(()=>{b()},6e4);return()=>clearInterval(Y)},[]);const R=U=>{if(x())switch(U){case"grammar":a();break;case"vocabulary":s();break;case"combined":n();break;case"timeattack":d();break}},_=u.current>0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ENTP英語学習アプリ"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"あなたの英語学習をサポートします"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>y(!c),children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),c?"統計を隠す":"統計を表示"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>$(!E),children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"ステータス設定"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ye,{showDetailed:c,showChapterProgress:c})}),e.jsx("div",{children:e.jsx(et,{showRecoveryTime:!0})})]}),E&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(st,{}),e.jsx(rt,{currentLevel:h.level,showProbabilities:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(Re,{className:"w-5 h-5 mr-2 text-blue-600"}),"文法クイズ"]}),e.jsx(O,{variant:"secondary",children:"文法"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"9つのカテゴリーから文法問題に挑戦"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"必要体力: 1 ♥"}),e.jsxs(N,{onClick:()=>R("grammar"),disabled:!_,className:"flex items-center",children:["開始",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(De,{className:"w-5 h-5 mr-2 text-green-600"}),"語彙学習"]}),e.jsx(O,{variant:"secondary",children:"語彙"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"レベル別・カテゴリー別の単語学習"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"必要体力: 1 ♥"}),e.jsxs(N,{onClick:()=>R("vocabulary"),disabled:!_,className:"flex items-center",children:["開始",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(ie,{className:"w-5 h-5 mr-2 text-purple-600"}),"総合テスト"]}),e.jsx(O,{variant:"secondary",children:"総合"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"全分野から出題される総合テスト"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"必要体力: 1 ♥"}),e.jsxs(N,{onClick:()=>R("combined"),disabled:!_,className:"flex items-center",children:["開始",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(oe,{className:"w-5 h-5 mr-2 text-orange-600"}),"タイムアタック"]}),e.jsx(O,{variant:"secondary",children:"スピード"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"制限時間内で問題を解くスピード重視モード"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"必要体力: 1 ♥"}),e.jsxs(N,{onClick:()=>R("timeattack"),disabled:!_,className:"flex items-center",children:["開始",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(He,{className:"w-5 h-5 mr-2 text-red-600"}),"タワーディフェンス"]}),e.jsx(O,{variant:"secondary",children:"ゲーム"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"英語学習要素を含むタワーディフェンスゲーム"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"体力不要"}),e.jsxs(N,{onClick:g,className:"flex items-center",children:["開始",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(Me,{className:"w-5 h-5 mr-2 text-yellow-600"}),"実績"]}),e.jsx(O,{variant:"secondary",children:"進捗"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"学習の進捗とアチーブメントを確認"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"体力不要"}),e.jsxs(N,{onClick:i,className:"flex items-center",children:["確認",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(S,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"今日のXP"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.todayXP||0})]}),e.jsx(Oe,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(S,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"総学習時間"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Math.floor((f.totalStudyTime||0)/60),"分"]})]}),e.jsx(oe,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(S,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"正解率"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[f.totalQuestionsAnswered>0?(f.correctAnswers/f.totalQuestionsAnswered*100).toFixed(1):"0.0","%"]})]}),e.jsx(ie,{className:"w-8 h-8 text-purple-600"})]})})}),e.jsx(S,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"連続学習日数"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[f.currentStreak||0,"日"]})]}),e.jsx(ze,{className:"w-8 h-8 text-orange-600"})]})})})]}),!_&&e.jsx(S,{className:"border-yellow-200 bg-yellow-50",children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"w-5 h-5 text-yellow-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-yellow-800",children:"体力が不足しています"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"体力が回復するまで待つか、他の機能を利用してください。"})]})]})})})]})})}function it(){const[t,s]=o.useState(null),[a,r]=o.useState(!1),[n,i]=o.useState(!1);o.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const h=u=>{u.preventDefault(),s(u),r(!0)},m=()=>{i(!0),r(!1),s(null)};return window.addEventListener("beforeinstallprompt",h),window.addEventListener("appinstalled",m),()=>{window.removeEventListener("beforeinstallprompt",h),window.removeEventListener("appinstalled",m)}},[]);const l=async()=>{if(!t)return;t.prompt();const{outcome:h}=await t.userChoice;console.log(h==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),r(!1)},d=()=>{r(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};if(n||!a)return null;const g=localStorage.getItem("pwa-install-dismissed");return g&&(Date.now()-parseInt(g))/864e5<7?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"アプリをインストール"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-3",children:"オフラインでも学習を続けられます。ホーム画面に追加して、より快適にご利用ください。"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:l,size:"sm",className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"}),"インストール"]}),e.jsxs(N,{onClick:d,variant:"outline",size:"sm",className:"flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),"後で"]})]})]})})})})}function ot(){const[t,s]=o.useState(!1),[a,r]=o.useState(!1);o.useEffect(()=>{"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),navigator.serviceWorker.getRegistration().then(l=>{l&&l.addEventListener("updatefound",()=>{const d=l.installing;d&&d.addEventListener("statechange",()=>{d.state==="installed"&&navigator.serviceWorker.controller&&s(!0)})})}))},[]);const n=()=>{r(!0),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(l=>{l&&l.waiting&&l.waiting.postMessage({type:"SKIP_WAITING"})})},i=()=>{s(!1)};return t?e.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg shadow-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"アップデートが利用可能"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mb-3",children:"新しいバージョンが利用可能です。最新の機能と改善を体験するために更新してください。"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:n,size:"sm",className:"flex items-center gap-1 bg-blue-600 hover:bg-blue-700",disabled:a,children:[e.jsx(Xe,{className:`w-3 h-3 ${a?"animate-spin":""}`}),a?"更新中...":"更新"]}),e.jsxs(N,{onClick:i,variant:"outline",size:"sm",className:"flex items-center gap-1 border-blue-300 text-blue-700 hover:bg-blue-100 dark:border-blue-700 dark:text-blue-300 dark:hover:bg-blue-800",children:[e.jsx(ue,{className:"w-3 h-3"}),"後で"]})]})]})})})}):null}const K={"basic-grammar":{easy:[{id:1,japanese:"私は学生です。",correctAnswer:"I am a student.",explanation:'「私は～です」は "I am ~" で表現します。',choices:["I am a student.","I am student.","I'm the student.","I was a student."]},{id:2,japanese:"彼は医者です。",correctAnswer:"He is a doctor.",explanation:'三人称単数の主語には "is" を使います。',choices:["He is a doctor.","He are a doctor.","He am a doctor.","He was a doctor."]},{id:3,japanese:"私たちは友達です。",correctAnswer:"We are friends.",explanation:'複数の主語には "are" を使います。',choices:["We are friends.","We is friends.","We am friends.","We were friends."]},{id:4,japanese:"彼女は忙しいです。",correctAnswer:"She is busy.",explanation:"形容詞を使った文では be動詞が必要です。",choices:["She is busy.","She busy.","She are busy.","She has busy."]},{id:5,japanese:"私は本を読みます。",correctAnswer:"I read a book.",explanation:"一般動詞の現在形では、一人称は動詞の原形を使います。",choices:["I read a book.","I reads a book.","I am read a book.","I reading a book."]},{id:6,japanese:"彼は音楽を聞きます。",correctAnswer:"He listens to music.",explanation:"三人称単数では動詞に -s をつけます。",choices:["He listens to music.","He listen to music.","He is listen to music.","He listening to music."]},{id:7,japanese:"私たちは学校に行きます。",correctAnswer:"We go to school.",explanation:"複数の主語では動詞の原形を使います。",choices:["We go to school.","We goes to school.","We are go to school.","We going to school."]},{id:8,japanese:"この花は美しいです。",correctAnswer:"This flower is beautiful.",explanation:'"This" は単数なので be動詞は "is" を使います。',choices:["This flower is beautiful.","This flower are beautiful.","This flowers is beautiful.","This flower beautiful."]},{id:9,japanese:"私は日本人です。",correctAnswer:"I am Japanese.",explanation:"国籍を表すときも be動詞を使います。",choices:["I am Japanese.","I am a Japanese.","I Japanese.","I from Japanese."]},{id:10,japanese:"猫は魚が好きです。",correctAnswer:"Cats like fish.",explanation:"一般的な事実を表すときは現在形を使います。",choices:["Cats like fish.","Cats likes fish.","Cats are like fish.","Cat like fish."]}],normal:[{id:11,japanese:"私は毎日学校に歩いて行きます。",correctAnswer:"I walk to school every day.",explanation:"習慣を表す現在形では、副詞句で時間を表現します。",hint:"walk, school, every day"},{id:12,japanese:"彼女は先生になりたがっています。",correctAnswer:"She wants to be a teacher.",explanation:'"want to + 動詞" で「～したい」を表現します。',hint:"wants, to be, teacher"},{id:13,japanese:"私たちの学校にはたくさんの生徒がいます。",correctAnswer:"There are many students in our school.",explanation:'存在を表す "There are" を使い、複数形に注意します。',hint:"There are, many students, our school"},{id:14,japanese:"その問題はとても難しくありません。",correctAnswer:"The problem is not very difficult.",explanation:`be動詞の否定形は "is not" または "isn't" を使います。`,hint:"problem, is not, very difficult"},{id:15,japanese:"彼は英語と数学を勉強しています。",correctAnswer:"He studies English and math.",explanation:'三人称単数の現在形では "studies" (y→ies) となります。',hint:"studies, English, math"},{id:16,japanese:"私の兄は大学で働いています。",correctAnswer:"My brother works at a university.",explanation:'場所を表すときは前置詞 "at" を使います。',hint:"brother, works, university"},{id:17,japanese:"この本は私のものではありません。",correctAnswer:"This book is not mine.",explanation:'所有代名詞 "mine" を使い、否定形で表現します。',hint:"book, is not, mine"},{id:18,japanese:"彼らは週末によく映画を見ます。",correctAnswer:"They often watch movies on weekends.",explanation:'頻度を表す副詞 "often" は動詞の前に置きます。',hint:"often, watch movies, weekends"},{id:19,japanese:"私の母は料理がとても上手です。",correctAnswer:"My mother is very good at cooking.",explanation:'"be good at + 動名詞" で「～が上手」を表現します。',hint:"mother, very good at, cooking"},{id:20,japanese:"その犬は公園を走り回っています。",correctAnswer:"The dog runs around in the park.",explanation:"現在の習慣的行動は現在形で表現します。",hint:"dog, runs around, park"}],hard:[{id:21,japanese:"彼が成功する理由は、常に努力を怠らないことです。",correctAnswer:"The reason why he succeeds is that he never stops making efforts.",explanation:'"The reason why ~ is that..." で理由を強調する構文です。'},{id:22,japanese:"私たちの町には古い伝統を大切にする人々がたくさんいます。",correctAnswer:"There are many people in our town who cherish old traditions.",explanation:'"There are + 名詞 + 関係代名詞" の構文で存在と修飾を同時に表現します。'},{id:23,japanese:"彼女の笑顔は見る人すべてを幸せな気持ちにします。",correctAnswer:"Her smile makes everyone who sees it feel happy.",explanation:'"make + 人 + 動詞" で「人に～させる」を表現します。'},{id:24,japanese:"この店で働くスタッフは皆親切で、お客様に丁寧に対応します。",correctAnswer:"All the staff who work at this store are kind and treat customers politely.",explanation:"関係代名詞と副詞を使って複雑な文を構成しています。"},{id:25,japanese:"私が毎朝することは、新聞を読んで世界のニュースを知ることです。",correctAnswer:"What I do every morning is read the newspaper and learn about world news.",explanation:'"What I do is ~" という構文で行動の内容を強調します。'},{id:26,japanese:"彼の話し方には、聞く人の心を動かす何かがあります。",correctAnswer:"There is something in the way he speaks that moves listeners' hearts.",explanation:'"There is something ~ that..." で抽象的な存在を表現します。'},{id:27,japanese:"私たちが住んでいる地球は、宇宙の中でかけがえのない存在です。",correctAnswer:"The Earth we live on is an irreplaceable existence in the universe.",explanation:"関係代名詞の省略形と形容詞を使った表現です。"},{id:28,japanese:"彼女が持っている才能は、多くの人々に影響を与える力があります。",correctAnswer:"The talent she has has the power to influence many people.",explanation:'関係代名詞の省略と "have the power to" の構文を使います。'},{id:29,japanese:"この問題を解決する方法は、みんなで協力することしかありません。",correctAnswer:"The only way to solve this problem is for everyone to cooperate.",explanation:'"The only way to ~ is for 人 to..." という構文です。'},{id:30,japanese:"人生において大切なことは、常に学び続ける姿勢を持つことだと思います。",correctAnswer:"I think what is important in life is to always have an attitude of continuous learning.",explanation:'"What is important is to ~" という主語節の構文を使います。'}]},tenses:{easy:[{id:31,japanese:"私は昨日映画を見ました。",correctAnswer:"I watched a movie yesterday.",explanation:'過去のことは過去形を使います。"watch" の過去形は "watched" です。',choices:["I watched a movie yesterday.","I watch a movie yesterday.","I am watching a movie yesterday.","I have watched a movie yesterday."]},{id:32,japanese:"彼女は明日東京に行きます。",correctAnswer:"She will go to Tokyo tomorrow.",explanation:'未来のことは "will + 動詞の原形" で表現します。',choices:["She will go to Tokyo tomorrow.","She goes to Tokyo tomorrow.","She went to Tokyo tomorrow.","She is going to Tokyo tomorrow."]},{id:33,japanese:"私たちは今テレビを見ています。",correctAnswer:"We are watching TV now.",explanation:'現在進行形は "be動詞 + 動詞のing形" で表現します。',choices:["We are watching TV now.","We watch TV now.","We watched TV now.","We will watch TV now."]},{id:34,japanese:"彼は今朝早く起きました。",correctAnswer:"He got up early this morning.",explanation:'"get up" の過去形は "got up" です。',choices:["He got up early this morning.","He gets up early this morning.","He is getting up early this morning.","He will get up early this morning."]},{id:35,japanese:"私は来週友達に会う予定です。",correctAnswer:"I will meet my friend next week.",explanation:'未来の予定は "will" で表現できます。',choices:["I will meet my friend next week.","I meet my friend next week.","I met my friend next week.","I am meeting my friend next week."]},{id:36,japanese:"雨が降っています。",correctAnswer:"It is raining.",explanation:"現在の天候は現在進行形で表現します。",choices:["It is raining.","It rains.","It rained.","It will rain."]},{id:37,japanese:"私は毎日朝食を食べます。",correctAnswer:"I eat breakfast every day.",explanation:"習慣は現在形で表現します。",choices:["I eat breakfast every day.","I ate breakfast every day.","I am eating breakfast every day.","I will eat breakfast every day."]},{id:38,japanese:"彼らは昨日パーティーを楽しみました。",correctAnswer:"They enjoyed the party yesterday.",explanation:"過去の出来事は過去形を使います。",choices:["They enjoyed the party yesterday.","They enjoy the party yesterday.","They are enjoying the party yesterday.","They will enjoy the party yesterday."]},{id:39,japanese:"私は今宿題をしています。",correctAnswer:"I am doing my homework now.",explanation:"現在進行中のことは現在進行形を使います。",choices:["I am doing my homework now.","I do my homework now.","I did my homework now.","I will do my homework now."]},{id:40,japanese:"明日は日曜日です。",correctAnswer:"Tomorrow is Sunday.",explanation:"未来でも確定した事実は現在形を使います。",choices:["Tomorrow is Sunday.","Tomorrow will be Sunday.","Tomorrow was Sunday.","Tomorrow being Sunday."]}],normal:[{id:41,japanese:"私は3年間英語を勉強しています。",correctAnswer:"I have been studying English for three years.",explanation:'継続を表す現在完了進行形を使います。期間は "for" で表現します。',hint:"have been studying, English, three years"},{id:42,japanese:"彼は先週からずっと忙しくしています。",correctAnswer:"He has been busy since last week.",explanation:'開始点からの継続は "since" を使います。',hint:"has been busy, since, last week"},{id:43,japanese:"私たちがそこに着いたとき、雨が降り始めました。",correctAnswer:"When we arrived there, it started to rain.",explanation:"時を表す副詞節では過去形を使います。",hint:"when, arrived, started, rain"},{id:44,japanese:"彼女は今までに多くの国を訪れたことがあります。",correctAnswer:"She has visited many countries so far.",explanation:"経験を表す現在完了形を使います。",hint:"has visited, many countries, so far"},{id:45,japanese:"私は明日の今頃、飛行機の中にいるでしょう。",correctAnswer:"I will be on a plane at this time tomorrow.",explanation:"未来のある時点での状態は未来進行形を使います。",hint:"will be, plane, this time tomorrow"},{id:46,japanese:"彼は昨日の夜、ずっと勉強していました。",correctAnswer:"He was studying all night last night.",explanation:"過去のある時点での継続は過去進行形を使います。",hint:"was studying, all night, last night"},{id:47,japanese:"私たちは来月までにこのプロジェクトを完成させる予定です。",correctAnswer:"We will have finished this project by next month.",explanation:"未来のある時点での完了は未来完了形を使います。",hint:"will have finished, project, by next month"},{id:48,japanese:"彼女は5歳のときから ピアノを弾いています。",correctAnswer:"She has been playing the piano since she was five years old.",explanation:"過去のある時点からの継続は現在完了進行形を使います。",hint:"has been playing, piano, since, five years old"},{id:49,japanese:"私は昨日その本を読み終えました。",correctAnswer:"I finished reading the book yesterday.",explanation:"過去の完了した行為は過去形を使います。",hint:"finished reading, book, yesterday"},{id:50,japanese:"彼らは来年結婚する予定です。",correctAnswer:"They are going to get married next year.",explanation:'予定を表すときは "be going to" も使えます。',hint:"are going to, get married, next year"}],hard:[{id:51,japanese:"彼が到着するまでに、私たちはすべての準備を終えているでしょう。",correctAnswer:"By the time he arrives, we will have finished all the preparations.",explanation:'"By the time" は時を表す副詞節で、未来完了と組み合わせます。'},{id:52,japanese:"もし昨日雨が降らなかったら、私たちはピクニックに行ったでしょう。",correctAnswer:"If it had not rained yesterday, we would have gone on a picnic.",explanation:"仮定法過去完了で、過去の事実と反対の仮定を表現します。"},{id:53,japanese:"彼女は会議が始まる前に、すでに資料を準備していました。",correctAnswer:"She had already prepared the materials before the meeting started.",explanation:"過去完了形で、過去のある時点より前の完了を表現します。"},{id:54,japanese:"私が子供の頃は、毎年夏に祖父母の家を訪れていました。",correctAnswer:"When I was a child, I used to visit my grandparents' house every summer.",explanation:'"used to" で過去の習慣を表現します。'},{id:55,japanese:"来週の今頃、私たちは新しいオフィスで働いているでしょう。",correctAnswer:"This time next week, we will be working in our new office.",explanation:"未来進行形で、未来のある時点での進行中の動作を表現します。"},{id:56,japanese:"彼は長年の間、その問題について考え続けてきました。",correctAnswer:"He has been thinking about that problem for many years.",explanation:"現在完了進行形で、過去から現在まで続く動作を表現します。"},{id:57,japanese:"その時点で、私たちはすでに5時間も待っていたのです。",correctAnswer:"At that point, we had already been waiting for five hours.",explanation:"過去完了進行形で、過去のある時点までの継続を表現します。"},{id:58,japanese:"彼が説明を終える頃には、みんな理解しているでしょう。",correctAnswer:"By the time he finishes explaining, everyone will have understood.",explanation:"時の副詞節と未来完了の組み合わせです。"},{id:59,japanese:"もし私があの時もっと勉強していたら、今頃もっと良い仕事に就いていたでしょう。",correctAnswer:"If I had studied harder at that time, I would have a better job now.",explanation:"混合仮定法で、過去の仮定と現在の帰結を表現します。"},{id:60,japanese:"彼女は卒業するまでに、すでに3年間そのプロジェクトに取り組んでいるでしょう。",correctAnswer:"By the time she graduates, she will have been working on that project for three years.",explanation:"未来完了進行形で、未来のある時点までの継続期間を表現します。"}]},modals:{easy:[{id:61,japanese:"私は泳ぐことができます。",correctAnswer:"I can swim.",explanation:'能力を表すときは "can" を使います。',choices:["I can swim.","I can to swim.","I can swimming.","I am can swim."]}],normal:[{id:71,japanese:"私は明日までにレポートを提出しなければなりません。",correctAnswer:"I have to submit my report by tomorrow.",explanation:'外部からの義務は "have to" を使うことが多いです。',hint:"have to submit, report, by tomorrow"}],hard:[{id:81,japanese:"彼は約束を守ったはずなのに、来ませんでした。",correctAnswer:"He should have kept his promise, but he didn't come.",explanation:'"should have + 過去分詞" で過去にすべきだったことを表現します。'}]},passive:{easy:[{id:91,japanese:"この本は多くの人に読まれています。",correctAnswer:"This book is read by many people.",explanation:'受動態は "be動詞 + 過去分詞" で作ります。',choices:["This book is read by many people.","This book reads by many people.","This book is reading by many people.","This book was read by many people."]}],normal:[{id:101,japanese:"この建物は1950年に建てられました。",correctAnswer:"This building was built in 1950.",explanation:'過去の受動態で年を表すときは "in" を使います。',hint:"building, was built, 1950"}],hard:[{id:111,japanese:"その決定が下される前に、すべての選択肢が検討されていました。",correctAnswer:"All options had been considered before the decision was made.",explanation:"過去完了の受動態で、時系列を明確にします。"}]},relative:{easy:[{id:121,japanese:"私には英語を話す友達がいます。",correctAnswer:"I have a friend who speaks English.",explanation:'人を修飾するときは関係代名詞 "who" を使います。',choices:["I have a friend who speaks English.","I have a friend which speaks English.","I have a friend that speak English.","I have a friend who speak English."]}],normal:[{id:131,japanese:"私が昨日会った人は有名な作家でした。",correctAnswer:"The person whom I met yesterday was a famous writer.",explanation:'目的格の関係代名詞は "whom" を使います（"who" でも可）。',hint:"person, whom, met yesterday, famous writer"}],hard:[{id:141,japanese:"彼が言ったことは、私たちが予想していたことと全く異なっていました。",correctAnswer:"What he said was completely different from what we had expected.",explanation:'関係代名詞 "what" は「～すること」を表し、先行詞を含みます。'}]},subjunctive:{easy:[{id:151,japanese:"もし明日雨が降ったら、家にいます。",correctAnswer:"If it rains tomorrow, I will stay at home.",explanation:"現在の仮定では、if節は現在形、主節は未来形を使います。",choices:["If it rains tomorrow, I will stay at home.","If it will rain tomorrow, I stay at home.","If it rained tomorrow, I will stay at home.","If it rains tomorrow, I stayed at home."]}],normal:[{id:161,japanese:"もし昨日雨が降らなかったら、ピクニックに行ったでしょう。",correctAnswer:"If it had not rained yesterday, we would have gone on a picnic.",explanation:'仮定法過去完了では、if節は過去完了、主節は "would have + 過去分詞" を使います。',hint:"had not rained, would have gone, picnic"}],hard:[{id:171,japanese:"もし彼があの時違う決断をしていたら、今頃は全く違う人生を送っていたでしょう。",correctAnswer:"If he had made a different decision at that time, he would be living a completely different life now.",explanation:"混合仮定法：過去の仮定の条件と現在の仮定の結果を組み合わせます。"}]},comparison:{easy:[{id:181,japanese:"彼は私より背が高いです。",correctAnswer:"He is taller than me.",explanation:'比較級は "形容詞 + er + than" で表現します。',choices:["He is taller than me.","He is more tall than me.","He is tall than me.","He is taller then me."]}],normal:[{id:191,japanese:"この課題は私が思っていたよりもずっと難しいです。",correctAnswer:"This assignment is much more difficult than I thought.",explanation:'比較級を強調するときは "much" を使います。',hint:"much more difficult, than I thought"}],hard:[{id:201,japanese:"彼の成功は、才能よりもむしろ努力の結果です。",correctAnswer:"His success is more a result of effort than of talent.",explanation:'"more A than B" で「BというよりむしろA」を表現します。'}]},participle:{easy:[{id:211,japanese:"私は走っている男の子を見ました。",correctAnswer:"I saw a boy running.",explanation:"現在分詞 (-ing) で進行中の動作を修飾します。",choices:["I saw a boy running.","I saw a boy run.","I saw a boy ran.","I saw a boy to run."]}],normal:[{id:221,japanese:"駅に向かって走りながら、彼は時計を見ました。",correctAnswer:"Running towards the station, he looked at his watch.",explanation:"分詞構文で同時動作を表現します。",hint:"Running towards, station, looked at watch"}],hard:[{id:231,japanese:"長年の経験を積んだ結果、彼は専門家として認められるようになりました。",correctAnswer:"Having accumulated years of experience, he came to be recognized as an expert.",explanation:"完了分詞構文と受動態の組み合わせです。"}]},infinitive:{easy:[{id:241,japanese:"私は英語を勉強したいです。",correctAnswer:"I want to study English.",explanation:'"want" の後は不定詞 "to + 動詞の原形" を使います。',choices:["I want to study English.","I want study English.","I want studying English.","I want studied English."]}],normal:[{id:251,japanese:"私は彼に英語を教えてもらいました。",correctAnswer:"I had him teach me English.",explanation:'使役動詞 "have" の後は原形不定詞（to なし）を使います。',hint:"had him teach, English"}],hard:[{id:261,japanese:"彼は問題を解決したと言われています。",correctAnswer:"He is said to have solved the problem.",explanation:'"be said to have + 過去分詞" で完了の不定詞を使った伝聞表現です。'}]}};function me(t,s){if(console.log("=== getQuestions called ==="),console.log("category:",t),console.log("difficulty:",s),console.log("questionsByCategory keys:",Object.keys(K)),console.log("category exists in data:",t in K),!(t in K))return console.error("Category not found:",t),[];const a=K[t];if(console.log("difficulty exists in category:",s in a),!(s in a))return console.error("Difficulty not found for category:",t,s),[];const r=a[s];return console.log("Found questions:",r.length),r||[]}o.lazy(()=>j(()=>import("./learning-CJqkZPhv.js").then(t=>t.V),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.VocabularyCard})));const lt=o.lazy(()=>j(()=>import("./EnhancedVocabularyCard-BhNc2Wfk.js"),__vite__mapDeps([5,1,2,3,0,4,6])).then(t=>({default:t.EnhancedVocabularyCard}))),ct=o.lazy(()=>j(()=>import("./VocabularyDifficultySelection-CrxCPQXf.js"),__vite__mapDeps([7,1,2,3,0,4])).then(t=>({default:t.VocabularyDifficultySelection}))),dt=o.lazy(()=>j(()=>import("./VocabularyCategorySelection-DqZcrsMJ.js"),__vite__mapDeps([8,1,2,3,0,4])).then(t=>({default:t.VocabularyCategorySelection})));o.lazy(()=>j(()=>import("./learning-CJqkZPhv.js").then(t=>t.z),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.GrammarQuiz})));const mt=o.lazy(()=>j(()=>import("./EnhancedGrammarQuiz-Buq35HRg.js"),__vite__mapDeps([9,1,2,0,3,4,6])).then(t=>({default:t.EnhancedGrammarQuiz}))),ht=o.lazy(()=>j(()=>import("./GrammarQuizDifficultySelection-D6cnHa78.js"),__vite__mapDeps([10,1,2,3,0,4])).then(t=>({default:t.GrammarQuizDifficultySelection}))),ut=o.lazy(()=>j(()=>import("./learning-CJqkZPhv.js").then(t=>t.E),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.CombinedTest}))),xt=o.lazy(()=>j(()=>import("./progress-Bh7B1qMw.js").then(t=>t.A),__vite__mapDeps([4,1,2,3,0])).then(t=>({default:t.Achievements}))),gt=o.lazy(()=>j(()=>import("./CategorySelection-CXS2pTWu.js"),__vite__mapDeps([11,1,2,3,0,4])).then(t=>({default:t.CategorySelection}))),pt=o.lazy(()=>j(()=>import("./DifficultySelection-mQ-c7S8j.js"),__vite__mapDeps([12,1,2,3,0,4])).then(t=>({default:t.DifficultySelection}))),ft=o.lazy(()=>j(()=>import("./Question-uscAv-YO.js"),__vite__mapDeps([13,1,2,3,0,4])).then(t=>({default:t.Question}))),yt=o.lazy(()=>j(()=>import("./Results-v_bTYCrw.js"),__vite__mapDeps([14,1,2,3,4,0])).then(t=>({default:t.Results}))),vt=o.lazy(()=>j(()=>import("./AppSettings-CpTWmeFn.js"),__vite__mapDeps([15,1,2,3,0,4,16])).then(t=>({default:t.AppSettings}))),jt=o.lazy(()=>j(()=>import("./TimeAttackMode-D8kI3G-Z.js"),__vite__mapDeps([17,1,2,3,0,4])).then(t=>({default:t.TimeAttackMode}))),wt=o.lazy(()=>j(()=>import("./game-DhYA9e1X.js").then(t=>t.S),__vite__mapDeps([3,1,2])).then(t=>({default:t.SimpleTowerDefense})));function he(t){const s=[...t];for(let a=s.length-1;a>0;a--){const r=Math.floor(Math.random()*(a+1));[s[a],s[r]]=[s[r],s[a]]}return s}function bt(t,s,a){const r=n=>n.toLowerCase().replace(/[^\w\s]/g,"").trim();if(a==="easy")return r(t)===r(s);{const n=r(t),l=r(s).split(/\s+/),d=n.split(/\s+/);return l.filter(h=>h.length>2&&d.some(m=>m.includes(h)||h.includes(m))).length>=Math.ceil(l.length*.7)}}function Nt(){const[t,s]=o.useState("home"),[a,r]=o.useState("basic-grammar"),[n,i]=o.useState("easy"),[l,d]=o.useState("intermediate"),[g,h]=o.useState("all"),[m,u]=o.useState("intermediate"),[x,b]=o.useState([]),[f,C]=o.useState(0),[c,y]=o.useState([]),[E,$]=o.useState(0),R=()=>{s("category")},_=()=>{s("vocabulary-difficulty")},U=v=>{d(v),s("vocabulary-category")},Y=v=>{h(v),s("vocabulary")},Z=()=>{s("grammar-quiz-difficulty")},pe=v=>{u(v),s("grammar-quiz")},fe=()=>{s("category")},ye=()=>{s("combined-test")},ve=()=>{s("achievements")},je=()=>{s("app-settings")},we=()=>{s("time-attack")},be=()=>{s("simple-tower-defense")},T=()=>{s("home")},Ne=v=>{console.log("Category selected:",v),r(v),s("difficulty")},Se=v=>{console.log("=== Debug handleSelectDifficulty ==="),console.log("Difficulty selected:",v),console.log("Selected category:",a);try{i(v);const I=me(a,v);if(console.log("Retrieved questions:",I.length),console.log("Questions data:",I),I.length===0){console.error("No questions found for category:",a,"difficulty:",v);return}console.log("About to shuffle questions...");const W=V.getAppSettings().essayQuestionCount,D=he(I).slice(0,W);console.log("Shuffled questions:",D.length),console.log("Setting questions state..."),b(D),C(0),y([]),$(Date.now()),console.log("Setting screen to question"),s("question"),console.log("handleSelectDifficulty completed successfully")}catch(I){console.error("Error in handleSelectDifficulty:",I)}},Ae=v=>{const I=x[f],F=bt(v,I.correctAnswer,n),W={questionId:I.id,answer:v,isCorrect:F},D=[...c,W];if(y(D),f+1<x.length)C(f+1);else{const re=Math.round((Date.now()-E)/1e3),ne=D.filter(Le=>Le.isCorrect).length,Ie=Math.round(ne/x.length*100),Te=Ee(D,n,a,re);V.recordLearningSession({date:new Date().toISOString().split("T")[0],type:"grammar-quiz",category:a,difficulty:n,score:Ie,totalQuestions:x.length,correctAnswers:ne,xpEarned:Te,duration:re}),V.checkAndUpdateAchievements(),s("results")}},ke=()=>{const v=me(a,n),F=V.getAppSettings().essayQuestionCount,W=he(v).slice(0,F);b(W),C(0),y([]),$(Date.now()),s("question")},se=()=>{s("difficulty")},ae=()=>{s("category")};t==="question"&&(console.log("=== Question Screen State ==="),console.log("currentScreen:",t),console.log("questions.length:",x.length),console.log("selectedCategory:",a),console.log("difficulty:",n));const w=()=>e.jsx("div",{className:"min-h-screen p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl mb-2",children:"読み込み中..."}),e.jsx("p",{className:"text-muted-foreground",children:"コンポーネントを読み込んでいます"})]})});return e.jsxs("div",{className:"min-h-screen bg-background",children:[t==="home"&&e.jsx(nt,{onNavigateToGrammar:R,onNavigateToVocabulary:_,onNavigateToGrammarQuiz:Z,onNavigateToEssay:fe,onNavigateToCombinedTest:ye,onNavigateToAchievements:ve,onNavigateToAppSettings:je,onNavigateToTimeAttack:we,onNavigateToSimpleTowerDefense:be}),t==="vocabulary-difficulty"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ct,{onBack:T,onSelectDifficulty:U})}),t==="vocabulary-category"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(dt,{onBack:()=>s("vocabulary-difficulty"),onSelectCategory:Y})}),t==="vocabulary"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(lt,{onBack:()=>s("vocabulary-category"),difficulty:l,category:g})}),t==="grammar-quiz-difficulty"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ht,{onBack:T,onSelectDifficulty:pe})}),t==="grammar-quiz"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(mt,{onBack:()=>s("grammar-quiz-difficulty"),difficulty:m})}),t==="combined-test"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ut,{onBack:T})}),t==="achievements"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(xt,{onBack:T})}),t==="app-settings"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(vt,{onBack:T})}),t==="time-attack"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(jt,{onBack:T})}),t==="simple-tower-defense"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(wt,{onBack:T})}),t==="category"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(gt,{onSelectCategory:Ne,onBack:T})}),t==="difficulty"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(pt,{category:a,onSelectDifficulty:Se,onBack:ae})}),t==="question"&&x.length>0&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ft,{question:x[f],questionNumber:f+1,totalQuestions:x.length,difficulty:n,category:a,onAnswer:Ae,onBack:se})}),t==="question"&&x.length===0&&e.jsx("div",{className:"min-h-screen p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl mb-2",children:"問題の読み込み中..."}),e.jsxs("p",{className:"text-muted-foreground",children:["カテゴリー: ",a,e.jsx("br",{}),"難易度: ",n]})]})}),t==="results"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(yt,{questions:x,userAnswers:c,difficulty:n,category:a,sessionDuration:Math.round((Date.now()-E)/1e3),onRestart:ke,onChangeDifficulty:se,onChangeCategory:ae,onBack:T})}),e.jsx(it,{}),e.jsx(ot,{})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});Be.createRoot(document.getElementById("root")).render(e.jsx(Nt,{}));export{Ct as Q,xe as R,me as a,Lt as c,p as g,k as s};
