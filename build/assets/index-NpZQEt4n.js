const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/learning-CJqkZPhv.js","assets/ui-C48fKjuK.js","assets/vendor-D3F3s8fL.js","assets/game-DhYA9e1X.js","assets/progress-Bh7B1qMw.js","assets/EnhancedVocabularyCard-BhNc2Wfk.js","assets/questionAdapter-qfrWA0Uz.js","assets/VocabularyDifficultySelection-CrxCPQXf.js","assets/VocabularyCategorySelection-DqZcrsMJ.js","assets/EnhancedGrammarQuiz-Buq35HRg.js","assets/GrammarQuizDifficultySelection-D6cnHa78.js","assets/CategorySelection-CXS2pTWu.js","assets/DifficultySelection-mQ-c7S8j.js","assets/Question-uscAv-YO.js","assets/Results-v_bTYCrw.js","assets/AppSettings-CpTWmeFn.js","assets/notificationManager-DRqVOwDk.js","assets/TimeAttackMode-D8kI3G-Z.js"])))=>i.map(i=>d[i]);
import{r as o,j as e}from"./ui-C48fKjuK.js";import{a as Ce}from"./vendor-D3F3s8fL.js";import{D as V,_ as j,a as Ee}from"./progress-Bh7B1qMw.js";import{B as N,C as S,c as H,f as M,b as O,a as A}from"./game-DhYA9e1X.js";import{C as _e,b as Pe,P as Re,c as z,B as De,a as ie,d as oe,G as He,T as Me,e as Oe,F as ze,H as Ve,D as We,X as ue,R as Xe}from"./learning-CJqkZPhv.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var G={},le;function qe(){if(le)return G;le=1;var t=Ce();return G.createRoot=t.createRoot,G.hydrateRoot=t.hydrateRoot,G}var Be=qe();const J=[];for(let t=1;t<=100;t++){let s,a,r,n;t<=20?(s=1,a=50,r=3,n={normal:.8,rare:.18,epic:.02,legendary:0}):t<=40?(s=2,a=100,r=3+Math.floor((t-1)/10),n={normal:.6,rare:.3,epic:.09,legendary:.01}):t<=60?(s=3,a=200,r=3+Math.floor((t-1)/10),n={normal:.4,rare:.35,epic:.2,legendary:.05}):t<=80?(s=4,a=300,r=3+Math.floor((t-1)/10),n={normal:.25,rare:.35,epic:.3,legendary:.1}):(s=5,a=500,r=3+Math.floor((t-1)/10),n={normal:.15,rare:.3,epic:.35,legendary:.2}),J.push({level:t,chapter:s,requiredXP:a,maxHearts:Math.min(r,12),rankProbabilities:n})}const L={1:{name:"åŸºç¤ç·¨",description:"è‹±æ¤œ5-4ç´šãƒ¬ãƒ™ãƒ«ï¼ˆ300-1,000èªï¼‰",levelRange:"Level 1-20",xpPerLevel:50,maxHearts:4},2:{name:"ä¸­ç´šç·¨",description:"è‹±æ¤œ3-2ç´šãƒ¬ãƒ™ãƒ«ï¼ˆ1,000-3,000èªï¼‰",levelRange:"Level 21-40",xpPerLevel:100,maxHearts:5},3:{name:"ä¸Šç´šç·¨",description:"è‹±æ¤œ2-1ç´šãƒ¬ãƒ™ãƒ«ï¼ˆ3,000-6,000èªï¼‰",levelRange:"Level 41-60",xpPerLevel:200,maxHearts:6},4:{name:"ãƒã‚¹ã‚¿ãƒ¼ç·¨",description:"TOEIC800+ãƒ¬ãƒ™ãƒ«ï¼ˆ6,000-12,000èªï¼‰",levelRange:"Level 61-80",xpPerLevel:300,maxHearts:8},5:{name:"ãƒã‚¤ãƒ†ã‚£ãƒ–ç·¨",description:"ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¬ãƒ™ãƒ«ï¼ˆ12,000-20,000èªï¼‰",levelRange:"Level 81-100",xpPerLevel:500,maxHearts:12}};function Qe(t){const s=J.find(n=>n.level===t);if(!s)return 0;const a=(s.chapter-1)*20+1;return s.chapter*20,(t-a+1)/20*100}const xe={normal:{color:"text-gray-600",bgColor:"bg-gray-100",icon:"âšª",name:"ãƒãƒ¼ãƒãƒ«"},rare:{color:"text-yellow-600",bgColor:"bg-yellow-100",icon:"ğŸŸ¡",name:"ãƒ¬ã‚¢"},epic:{color:"text-purple-600",bgColor:"bg-purple-100",icon:"ğŸŸ£",name:"ã‚¨ãƒ”ãƒƒã‚¯"},legendary:{color:"text-orange-600",bgColor:"bg-orange-100",icon:"ğŸŸ ",name:"ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰"}},X={listening:{name:"ãƒªã‚¹ãƒ‹ãƒ³ã‚°",icon:"ğŸ§",description:"èãå–ã‚Šèƒ½åŠ›"},reading:{name:"ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°",icon:"ğŸ“–",description:"èª­è§£èƒ½åŠ›"},writing:{name:"ãƒ©ã‚¤ãƒ†ã‚£ãƒ³ã‚°",icon:"âœï¸",description:"æ–‡ç« ä½œæˆèƒ½åŠ›"},grammar:{name:"æ–‡æ³•",icon:"ğŸ“",description:"æ–‡æ³•çŸ¥è­˜"},idioms:{name:"èªæ³•ãƒ»ç†Ÿèª",icon:"ğŸ’¬",description:"èªæ³•ã¨ç†Ÿèªã®çŸ¥è­˜"},vocabulary:{name:"èªå½™ãƒ»å˜èª",icon:"ğŸ“š",description:"å˜èªåŠ›"}},q={LEVEL_XP_REQUIREMENTS:{1:50,21:100,41:200,61:300,81:500},RANK_XP:{normal:{min:3,max:8,bonusMin:15,bonusMax:25},rare:{min:10,max:18,bonusMin:40,bonusMax:60},epic:{min:25,max:40,bonusMin:80,bonusMax:120},legendary:{min:50,max:100,bonusMin:150,bonusMax:300}},BONUS_CONDITIONS:{PERFECT_SCORE:1.5,HIGH_ACCURACY:1.3,STREAK_BONUS:1.2}};function te(t){return t<=20?1:t<=40?2:t<=60?3:t<=80?4:5}function ee(t){const s=te(t);return q.LEVEL_XP_REQUIREMENTS[s*20-19]||50}function ce(t){let s=1,a=0;for(;s<=100;){const l=ee(s);if(a+l>t)break;a+=l,s++}const r=te(s),n=ee(s)-(t-a),i=(t-a)/ee(s)*100;return{level:s,chapter:r,xp:t,xpToNext:n,progress:i}}function de(t){const s=Math.min(3+Math.floor((t-1)/10),12),a=Date.now();return{current:s,max:s,lastRecovery:a,nextRecovery:a+3600*1e3}}function $e(t){const s=te(t),a=Ue(s),r=Math.random();let n=0;for(const[i,l]of Object.entries(a))if(n+=l,r<=n)return i;return"normal"}function Ue(t){return{1:{normal:.8,rare:.18,epic:.02,legendary:0},2:{normal:.6,rare:.3,epic:.09,legendary:.01},3:{normal:.4,rare:.35,epic:.2,legendary:.05},4:{normal:.25,rare:.35,epic:.3,legendary:.1},5:{normal:.15,rare:.3,epic:.35,legendary:.2}}[t]}function Fe(t,s=!1){const a=q.RANK_XP[t],r=s?a.bonusMin:a.min,n=s?a.bonusMax:a.max;return Math.floor(Math.random()*(n-r+1))+r}function ge(t){return Object.values(t).reduce((a,r)=>a+r,0)===30&&Object.values(t).every(a=>a>=0&&a<=30)}const B={balanced:{listening:5,reading:5,writing:5,grammar:5,idioms:5,vocabulary:5},vocabulary:{listening:3,reading:3,writing:3,grammar:3,idioms:3,vocabulary:15},practical:{listening:10,reading:10,writing:2.5,grammar:2.5,idioms:2.5,vocabulary:2.5},grammar:{listening:1,reading:1,writing:1,grammar:15,idioms:10,vocabulary:2}};function Ge(t){const s=["listening","reading","writing","grammar","idioms","vocabulary"],a=s.map(l=>t[l]),r=a.reduce((l,d)=>l+d,0),n=Math.random()*r;let i=0;for(let l=0;l<s.length;l++)if(i+=a[l],n<=i)return s[l];return"vocabulary"}function Lt(t,s,a=!1){const n=t.filter(g=>g.isCorrect).length/t.length;let i=Fe(s,a);n===1?i*=q.BONUS_CONDITIONS.PERFECT_SCORE:n>=.8&&(i*=q.BONUS_CONDITIONS.HIGH_ACCURACY);let l=0,d=0;for(const g of t)g.isCorrect?(l++,d=Math.max(d,l)):l=0;return d>=3&&(i*=q.BONUS_CONDITIONS.STREAK_BONUS),Math.round(i)}function Ke(t){const s=Date.now(),r=(s-t.lastRecovery)/(3600*1e3);if(t.current>=t.max)return{...t,lastRecovery:s,nextRecovery:s+3600*1e3};if(r>=1){const n=Math.floor(r),i=Math.min(t.current+n,t.max),l=(r-Math.floor(r))*(3600*1e3),d=s+3600*1e3-l;return{...t,current:i,lastRecovery:s-l,nextRecovery:d}}return t}function Je(t){return t.current<=0?null:{...t,current:t.current-1}}class Q{userLevel;heartSystem;statusAllocation;constructor(s=0){this.userLevel=ce(s),this.heartSystem=de(this.userLevel.level),this.statusAllocation={...B.balanced}}getLevel(){return{...this.userLevel}}getHeartSystem(){return{...this.heartSystem}}getStatusAllocation(){return{...this.statusAllocation}}addXP(s){const a=this.userLevel.level;this.userLevel=ce(this.userLevel.xp+s);const r=this.userLevel.level>a;return r&&(this.heartSystem=de(this.userLevel.level)),{leveledUp:r,newLevel:r?{...this.userLevel}:void 0}}processHeartRecovery(){return this.heartSystem=Ke(this.heartSystem),{...this.heartSystem}}consumeHeart(){const s=Je(this.heartSystem);return s?(this.heartSystem=s,!0):!1}updateStatusAllocation(s){return ge(s)?(this.statusAllocation={...s},!0):!1}applyStatusTemplate(s){const a=B[s];return a?(this.statusAllocation={...a},!0):!1}getNextQuestionRank(){return $e(this.userLevel.level)}getNextSkillField(){return Ge(this.statusAllocation)}getChapterProgress(){const s=Qe(this.userLevel.level),a=L[this.userLevel.chapter];return{chapter:this.userLevel.chapter,progress:s,chapterInfo:a}}getLevelConfig(){return J.find(s=>s.level===this.userLevel.level)}getNextLevelInfo(){this.getLevelConfig();const s=J.find(a=>a.level===this.userLevel.level+1);return s?{currentLevel:this.userLevel.level,nextLevel:s.level,xpToNext:this.userLevel.xpToNext,progress:this.userLevel.progress,nextLevelRequiredXP:s.requiredXP,nextLevelMaxHearts:s.maxHearts}:null}getChapterCompletion(){const s=this.getChapterProgress(),a=s.progress>=100;return{chapter:s.chapter,progress:s.progress,isComplete:a,chapterInfo:s.chapterInfo}}getOverallProgress(){const s=this.getChapterProgress(),a=this.getNextLevelInfo();return{level:this.userLevel.level,chapter:this.userLevel.chapter,totalXP:this.userLevel.xp,chapterProgress:s.progress,levelProgress:this.userLevel.progress,nextLevelInfo:a,heartSystem:this.heartSystem}}serialize(){return{userLevel:this.userLevel,heartSystem:this.heartSystem,statusAllocation:this.statusAllocation}}static deserialize(s){const a=new Q(s.userLevel.xp);return a.userLevel=s.userLevel,a.heartSystem=s.heartSystem,a.statusAllocation=s.statusAllocation,a}}let P=null;function p(){if(!P){const t=localStorage.getItem("entp-english-level-manager");if(t)try{const s=JSON.parse(t);P=Q.deserialize(s)}catch(s){console.error("Failed to restore level manager:",s),P=new Q}else P=new Q}return P}function k(){P&&localStorage.setItem("entp-english-level-manager",JSON.stringify(P.serialize()))}const Ye=({showDetailed:t=!0,showChapterProgress:s=!0,compact:a=!1})=>{const[r,n]=o.useState(()=>p().getLevel()),[i,l]=o.useState(()=>p().getChapterProgress());o.useEffect(()=>{const h=p(),m=h.getLevel(),u=h.getChapterProgress();n(m),l(u)},[]);const d=h=>({1:"bg-green-500",2:"bg-blue-500",3:"bg-purple-500",4:"bg-orange-500",5:"bg-red-500"})[h],g=h=>({1:"from-green-400 to-green-600",2:"from-blue-400 to-blue-600",3:"from-purple-400 to-purple-600",4:"from-orange-400 to-orange-600",5:"from-red-400 to-red-600"})[h];return a?e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${d(r.chapter)} text-foreground flex items-center justify-center text-sm font-bold`,children:r.chapter}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Level ",r.level]}),e.jsx("div",{className:"text-xs text-gray-500",children:L[r.chapter].name})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${g(r.chapter)}`,style:{width:`${r.progress}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.xpToNext,"XP to next level"]})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"ãƒ¬ãƒ™ãƒ«æƒ…å ±"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full ${d(r.chapter)} text-foreground flex items-center justify-center text-lg font-bold`,children:r.chapter}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"ç« "}),e.jsx("div",{className:"text-xs text-gray-400",children:L[r.chapter].name})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-lg font-medium text-gray-700",children:["Level ",r.level]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r.xp," XP"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full bg-gradient-to-r ${g(r.chapter)} transition-all duration-500`,style:{width:`${r.progress}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:["é€²æ—: ",r.progress.toFixed(1),"%"]}),e.jsxs("span",{children:["æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¾ã§: ",r.xpToNext," XP"]})]})]}),s&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[L[r.chapter].name,"ã®é€²æ—"]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[i.progress.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${g(r.chapter)} transition-all duration-500`,style:{width:`${i.progress}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:L[r.chapter].description})]}),t&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"ç« "}),e.jsx("div",{className:"font-medium",children:L[r.chapter].name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"ãƒ¬ãƒ™ãƒ«ç¯„å›²"}),e.jsx("div",{className:"font-medium",children:L[r.chapter].levelRange})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"å¿…è¦XP/ãƒ¬ãƒ™ãƒ«"}),e.jsxs("div",{className:"font-medium",children:[L[r.chapter].xpPerLevel," XP"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500",children:"æœ€å¤§ãƒãƒ¼ãƒˆæ•°"}),e.jsxs("div",{className:"font-medium",children:[L[r.chapter].maxHearts,"å€‹"]})]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{const h=p(),m=h.addXP(100);n(h.getLevel()),k(),m.leveledUp&&alert(`ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ Level ${m.newLevel?.level} ã«ä¸ŠãŒã‚Šã¾ã—ãŸï¼`)},className:"px-3 py-1 rounded-md text-xs font-medium bg-blue-500 text-foreground hover:bg-blue-600 transition-colors",title:"ãƒ†ã‚¹ãƒˆç”¨: 100XPè¿½åŠ ",children:"+100XP"}),e.jsx("button",{onClick:()=>{const h=p(),m=h.addXP(500);n(h.getLevel()),k(),m.leveledUp&&alert(`ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—ï¼ Level ${m.newLevel?.level} ã«ä¸ŠãŒã‚Šã¾ã—ãŸï¼`)},className:"px-3 py-1 rounded-md text-xs font-medium bg-purple-500 text-foreground hover:bg-purple-600 transition-colors",title:"ãƒ†ã‚¹ãƒˆç”¨: 500XPè¿½åŠ ",children:"+500XP"}),e.jsx("button",{onClick:()=>{const h=p();h.addXP(1e3),n(h.getLevel()),k(),alert("1000XPè¿½åŠ ã—ã¾ã—ãŸï¼")},className:"px-3 py-1 rounded-md text-xs font-medium bg-orange-500 text-foreground hover:bg-orange-600 transition-colors",title:"ãƒ†ã‚¹ãƒˆç”¨: 1000XPè¿½åŠ ",children:"+1000XP"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"â€» ãƒ†ã‚¹ãƒˆç”¨ãƒœã‚¿ãƒ³ã§ã™"})]})]})]})]})},Ze=()=>{const[t,s]=o.useState(()=>p().getLevel());return{userLevel:t,addXP:n=>{const i=p(),l=i.addXP(n);return s(i.getLevel()),k(),l},refreshLevel:()=>{const n=p();s(n.getLevel())}}},et=({onHeartChange:t,showRecoveryTime:s=!0,compact:a=!1})=>{const[r,n]=o.useState(()=>p().getHeartSystem()),[i,l]=o.useState(0);o.useEffect(()=>{const u=p().processHeartRecovery();n(u),t?.(u)},[]),o.useEffect(()=>{const m=setInterval(()=>{const x=p().processHeartRecovery();x.current!==r.current&&(n(x),t?.(x),k())},3e4);return()=>clearInterval(m)},[r.current,t]),o.useEffect(()=>{const m=()=>{const x=Date.now(),b=r.nextRecovery-x;l(Math.max(0,b))};m();const u=setInterval(m,1e3);return()=>clearInterval(u)},[r.nextRecovery,r.current]);const d=m=>{const u=Math.floor(m/1e3),x=Math.floor(u/3600),b=Math.floor(u%3600/60),f=u%60;return x>0?`${x}:${b.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`:`${b}:${f.toString().padStart(2,"0")}`},g=r.current>0,h=()=>{const m=p();if(m.consumeHeart()){const x=m.getHeartSystem();n(x),t?.(x),k()}};return a?e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"flex space-x-1",children:Array.from({length:r.max},(m,u)=>e.jsx("div",{className:`w-4 h-4 rounded-full ${u<r.current?"bg-red-500 text-foreground":"bg-gray-200 text-gray-400"}`,children:"â™¥"},u))}),e.jsxs("span",{className:"text-sm text-gray-600",children:[r.current,"/",r.max]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"ä½“åŠ›ã‚·ã‚¹ãƒ†ãƒ "}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ä½“åŠ›"}),e.jsx("div",{className:"flex space-x-1",children:Array.from({length:r.max},(m,u)=>e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm ${u<r.current?"bg-red-500 text-foreground":"bg-gray-200 text-gray-400"}`,children:"â™¥"},u))}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[r.current,"/",r.max]})]})]}),s&&r.current<r.max&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:"æ¬¡ã®å›å¾©ã¾ã§"}),e.jsx("span",{className:"font-mono",children:d(i)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-red-500 h-2 rounded-full transition-all duration-1000",style:{width:`${(3600*1e3-i)/(3600*1e3)*100}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{children:"1å•é¡Œã«ã¤ã1ä½“åŠ›æ¶ˆè²»"}),e.jsx("p",{children:"1æ™‚é–“ã§1ä½“åŠ›å›å¾©"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:h,disabled:!g,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${g?"bg-red-500 text-foreground hover:bg-red-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:g?"ä½“åŠ›ã‚’æ¶ˆè²»":"ä½“åŠ›ä¸è¶³"}),e.jsx("button",{onClick:()=>{p();const m={...r,current:r.max,lastRecovery:Date.now(),nextRecovery:Date.now()+3600*1e3};n(m),t?.(m)},className:"px-3 py-2 rounded-md text-sm font-medium bg-green-500 text-foreground hover:bg-green-600 transition-colors",title:"ãƒ†ã‚¹ãƒˆç”¨: ä½“åŠ›ã‚’å…¨å›å¾©",children:"â™¥å›å¾©"})]})]}),r.current===0&&e.jsx("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-yellow-600 mr-2",children:"âš ï¸"}),e.jsx("div",{className:"text-sm text-yellow-800",children:"ä½“åŠ›ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚å›å¾©ã‚’å¾…ã¤ã‹ã€æ™‚é–“ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ãã ã•ã„ã€‚"})]})})]})},tt=()=>{const[t,s]=o.useState(()=>p().getHeartSystem());return{heartSystem:t,consumeHeart:()=>{const i=p();if(i.consumeHeart()){const d=i.getHeartSystem();return s(d),k(),!0}return!1},processRecovery:()=>{const l=p().processHeartRecovery();return s(l),k(),l},refreshHearts:()=>{const l=p().processHeartRecovery();s(l)}}},st=({onAllocationChange:t,readOnly:s=!1})=>{const[a,r]=o.useState(()=>p().getStatusAllocation()),[n,i]=o.useState(!0),[l,d]=o.useState("");o.useEffect(()=>{const c=ge(a);i(c),t?.(a)},[a]);const g=(c,y)=>{const E={...a,[c]:Math.max(0,Math.min(30,y))};r(E)},h=c=>{const y=B[c];r({...y}),d(c)},m=()=>{r({...B.balanced}),d("balanced")},u=()=>Object.values(a).reduce((c,y)=>c+y,0),x=()=>30-u(),b=c=>a[c]/30*100,f=c=>{const y=b(c);return y>=30?"bg-blue-500":y>=20?"bg-green-500":y>=10?"bg-yellow-500":"bg-gray-300"},C=["listening","reading","writing","grammar","idioms","vocabulary"];return s?e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é…åˆ†"}),e.jsx("div",{className:"space-y-3",children:C.map(c=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:X[c].icon}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:X[c].name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${f(c)}`,style:{width:`${b(c)}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-600 w-8 text-right",children:[a[c],"pt"]})]})]},c))}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"åˆè¨ˆãƒã‚¤ãƒ³ãƒˆ"}),e.jsxs("span",{className:"font-medium",children:[u(),"/30pt"]})]})})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é…åˆ†"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"æ®‹ã‚Šãƒã‚¤ãƒ³ãƒˆ"}),e.jsx("span",{className:`text-sm font-medium ${x()<0?"text-red-500":"text-gray-700"}`,children:x()})]})]}),!n&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"âš ï¸"}),e.jsx("div",{className:"text-sm text-red-800",children:"åˆè¨ˆãŒ30ãƒã‚¤ãƒ³ãƒˆã«ãªã‚‹ã‚ˆã†ã«èª¿æ•´ã—ã¦ãã ã•ã„ã€‚"})]})}),e.jsx("div",{className:"space-y-4",children:C.map(c=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl",children:X[c].icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:X[c].name}),e.jsx("div",{className:"text-xs text-gray-500",children:X[c].description})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",min:"0",max:"30",value:a[c],onChange:y=>g(c,parseInt(y.target.value)||0),className:"w-16 px-2 py-1 text-sm border border-gray-300 rounded-md text-center"}),e.jsx("span",{className:"text-sm text-gray-600",children:"pt"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${f(c)}`,style:{width:`${b(c)}%`}})})]},c))}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"åˆè¨ˆãƒã‚¤ãƒ³ãƒˆ"}),e.jsxs("span",{className:`font-medium ${u()===30?"text-green-600":"text-red-500"}`,children:[u(),"/30pt"]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"}),e.jsx("button",{onClick:m,className:"text-xs text-blue-600 hover:text-blue-800",children:"ãƒªã‚»ãƒƒãƒˆ"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(B).map(([c,y])=>e.jsxs("button",{onClick:()=>h(c),className:`px-3 py-2 text-xs rounded-md border transition-colors ${l===c?"bg-blue-100 border-blue-300 text-blue-700":"bg-gray-50 border-gray-200 text-gray-600 hover:bg-gray-100"}`,children:[c==="balanced"&&"ãƒãƒ©ãƒ³ã‚¹å‹",c==="vocabulary"&&"èªå½™é‡è¦–å‹",c==="practical"&&"å®Ÿè·µé‡è¦–å‹",c==="grammar"&&"æ–‡æ³•å¼·åŒ–å‹"]},c))})]}),e.jsx("button",{onClick:()=>{p().updateStatusAllocation(a),k()},disabled:!n,className:`w-full py-2 px-4 rounded-md text-sm font-medium transition-colors ${n?"bg-blue-500 text-foreground hover:bg-blue-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"é…åˆ†ã‚’ä¿å­˜"})]})]})},at=()=>{const[t,s]=o.useState(()=>p().getStatusAllocation());return{allocation:t,updateAllocation:n=>p().updateStatusAllocation(n)?(s(n),k(),!0):!1,applyTemplate:n=>{const i=p();if(i.applyStatusTemplate(n)){const d=i.getStatusAllocation();return s(d),k(),!0}return!1}}},Ct=({rank:t,showIcon:s=!0,showName:a=!0,showXP:r=!1,question:n,size:i="md",className:l=""})=>{const d=xe[t],g={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},h={sm:"text-sm",md:"text-base",lg:"text-lg"};return e.jsxs("div",{className:`inline-flex items-center space-x-1 ${d.bgColor} ${d.color} rounded-full ${g[i]} ${l}`,children:[s&&e.jsx("span",{className:h[i],children:d.icon}),a&&e.jsx("span",{className:"font-medium",children:d.name}),r&&n&&e.jsxs("span",{className:"text-xs opacity-75",children:["+",n.xpReward,"XP"]})]})},rt=({currentLevel:t,showProbabilities:s=!0})=>{const r=(i=>i<=20?{normal:80,rare:18,epic:2,legendary:0}:i<=40?{normal:60,rare:30,epic:9,legendary:1}:i<=60?{normal:40,rare:35,epic:20,legendary:5}:i<=80?{normal:25,rare:35,epic:30,legendary:10}:{normal:15,rare:30,epic:35,legendary:20})(t),n=["normal","rare","epic","legendary"];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["å•é¡Œãƒ©ãƒ³ã‚¯å‡ºç¾ç‡ (Level ",t,")"]}),e.jsx("div",{className:"space-y-3",children:n.map(i=>{const l=xe[i],d=r[i];return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:l.icon}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:l.name})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${l.bgColor.replace("bg-","bg-").replace("-100","-500")}`,style:{width:`${d}%`}})}),e.jsxs("span",{className:"text-sm font-medium text-gray-600 w-8 text-right",children:[d,"%"]})]})]},i)})}),s&&e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"text-xs text-gray-500",children:[e.jsx("p",{children:"â€¢ ãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã‚‹ã»ã©é«˜ãƒ©ãƒ³ã‚¯ã®å•é¡ŒãŒå‡ºç¾ã—ã‚„ã™ããªã‚Šã¾ã™"}),e.jsx("p",{children:"â€¢ ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰å•é¡Œã¯Level 21ä»¥é™ã‹ã‚‰å‡ºç¾ã—ã¾ã™"})]})})]})};function nt({onNavigateToGrammar:t,onNavigateToVocabulary:s,onNavigateToGrammarQuiz:a,onNavigateToEssay:r,onNavigateToCombinedTest:n,onNavigateToAchievements:i,onNavigateToAppSettings:l,onNavigateToTimeAttack:d,onNavigateToSimpleTowerDefense:g}){const{userLevel:h,refreshLevel:m}=Ze(),{heartSystem:u,consumeHeart:x,processRecovery:b}=tt();at();const[f,C]=o.useState(V.getUserStats()),[c,y]=o.useState(!1),[E,$]=o.useState(!1);o.useEffect(()=>{(()=>{const Z=V.getUserStats();C(Z),m()})();const Y=setInterval(()=>{b()},6e4);return()=>clearInterval(Y)},[]);const R=U=>{if(x())switch(U){case"grammar":a();break;case"vocabulary":s();break;case"combined":n();break;case"timeattack":d();break}},_=u.current>0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"ENTPè‹±èªå­¦ç¿’ã‚¢ãƒ—ãƒª"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"ã‚ãªãŸã®è‹±èªå­¦ç¿’ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>y(!c),children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),c?"çµ±è¨ˆã‚’éš ã™":"çµ±è¨ˆã‚’è¡¨ç¤º"]}),e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>$(!E),children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨­å®š"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ye,{showDetailed:c,showChapterProgress:c})}),e.jsx("div",{children:e.jsx(et,{showRecoveryTime:!0})})]}),E&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(st,{}),e.jsx(rt,{currentLevel:h.level,showProbabilities:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(Re,{className:"w-5 h-5 mr-2 text-blue-600"}),"æ–‡æ³•ã‚¯ã‚¤ã‚º"]}),e.jsx(O,{variant:"secondary",children:"æ–‡æ³•"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"9ã¤ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‹ã‚‰æ–‡æ³•å•é¡Œã«æŒ‘æˆ¦"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"å¿…è¦ä½“åŠ›: 1 â™¥"}),e.jsxs(N,{onClick:()=>R("grammar"),disabled:!_,className:"flex items-center",children:["é–‹å§‹",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(De,{className:"w-5 h-5 mr-2 text-green-600"}),"èªå½™å­¦ç¿’"]}),e.jsx(O,{variant:"secondary",children:"èªå½™"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"ãƒ¬ãƒ™ãƒ«åˆ¥ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ã®å˜èªå­¦ç¿’"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"å¿…è¦ä½“åŠ›: 1 â™¥"}),e.jsxs(N,{onClick:()=>R("vocabulary"),disabled:!_,className:"flex items-center",children:["é–‹å§‹",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(ie,{className:"w-5 h-5 mr-2 text-purple-600"}),"ç·åˆãƒ†ã‚¹ãƒˆ"]}),e.jsx(O,{variant:"secondary",children:"ç·åˆ"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"å…¨åˆ†é‡ã‹ã‚‰å‡ºé¡Œã•ã‚Œã‚‹ç·åˆãƒ†ã‚¹ãƒˆ"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"å¿…è¦ä½“åŠ›: 1 â™¥"}),e.jsxs(N,{onClick:()=>R("combined"),disabled:!_,className:"flex items-center",children:["é–‹å§‹",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(oe,{className:"w-5 h-5 mr-2 text-orange-600"}),"ã‚¿ã‚¤ãƒ ã‚¢ã‚¿ãƒƒã‚¯"]}),e.jsx(O,{variant:"secondary",children:"ã‚¹ãƒ”ãƒ¼ãƒ‰"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"åˆ¶é™æ™‚é–“å†…ã§å•é¡Œã‚’è§£ãã‚¹ãƒ”ãƒ¼ãƒ‰é‡è¦–ãƒ¢ãƒ¼ãƒ‰"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"å¿…è¦ä½“åŠ›: 1 â™¥"}),e.jsxs(N,{onClick:()=>R("timeattack"),disabled:!_,className:"flex items-center",children:["é–‹å§‹",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(He,{className:"w-5 h-5 mr-2 text-red-600"}),"ã‚¿ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹"]}),e.jsx(O,{variant:"secondary",children:"ã‚²ãƒ¼ãƒ "})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"è‹±èªå­¦ç¿’è¦ç´ ã‚’å«ã‚€ã‚¿ãƒ¯ãƒ¼ãƒ‡ã‚£ãƒ•ã‚§ãƒ³ã‚¹ã‚²ãƒ¼ãƒ "}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"ä½“åŠ›ä¸è¦"}),e.jsxs(N,{onClick:g,className:"flex items-center",children:["é–‹å§‹",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]}),e.jsxs(S,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx(H,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(M,{className:"text-lg flex items-center",children:[e.jsx(Me,{className:"w-5 h-5 mr-2 text-yellow-600"}),"å®Ÿç¸¾"]}),e.jsx(O,{variant:"secondary",children:"é€²æ—"})]})}),e.jsxs(A,{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"å­¦ç¿’ã®é€²æ—ã¨ã‚¢ãƒãƒ¼ãƒ–ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèª"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"ä½“åŠ›ä¸è¦"}),e.jsxs(N,{onClick:i,className:"flex items-center",children:["ç¢ºèª",e.jsx(z,{className:"w-4 h-4 ml-1"})]})]})]})]})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(S,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ä»Šæ—¥ã®XP"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.todayXP||0})]}),e.jsx(Oe,{className:"w-8 h-8 text-blue-600"})]})})}),e.jsx(S,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ç·å­¦ç¿’æ™‚é–“"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[Math.floor((f.totalStudyTime||0)/60),"åˆ†"]})]}),e.jsx(oe,{className:"w-8 h-8 text-green-600"})]})})}),e.jsx(S,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"æ­£è§£ç‡"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[f.totalQuestionsAnswered>0?(f.correctAnswers/f.totalQuestionsAnswered*100).toFixed(1):"0.0","%"]})]}),e.jsx(ie,{className:"w-8 h-8 text-purple-600"})]})})}),e.jsx(S,{children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"é€£ç¶šå­¦ç¿’æ—¥æ•°"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[f.currentStreak||0,"æ—¥"]})]}),e.jsx(ze,{className:"w-8 h-8 text-orange-600"})]})})})]}),!_&&e.jsx(S,{className:"border-yellow-200 bg-yellow-50",children:e.jsx(A,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"w-5 h-5 text-yellow-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-yellow-800",children:"ä½“åŠ›ãŒä¸è¶³ã—ã¦ã„ã¾ã™"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"ä½“åŠ›ãŒå›å¾©ã™ã‚‹ã¾ã§å¾…ã¤ã‹ã€ä»–ã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚"})]})]})})})]})})}function it(){const[t,s]=o.useState(null),[a,r]=o.useState(!1),[n,i]=o.useState(!1);o.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const h=u=>{u.preventDefault(),s(u),r(!0)},m=()=>{i(!0),r(!1),s(null)};return window.addEventListener("beforeinstallprompt",h),window.addEventListener("appinstalled",m),()=>{window.removeEventListener("beforeinstallprompt",h),window.removeEventListener("appinstalled",m)}},[]);const l=async()=>{if(!t)return;t.prompt();const{outcome:h}=await t.userChoice;console.log(h==="accepted"?"User accepted the install prompt":"User dismissed the install prompt"),s(null),r(!1)},d=()=>{r(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};if(n||!a)return null;const g=localStorage.getItem("pwa-install-dismissed");return g&&(Date.now()-parseInt(g))/864e5<7?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-1",children:"ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-3",children:"ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ã‚‚å­¦ç¿’ã‚’ç¶šã‘ã‚‰ã‚Œã¾ã™ã€‚ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¦ã€ã‚ˆã‚Šå¿«é©ã«ã”åˆ©ç”¨ãã ã•ã„ã€‚"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:l,size:"sm",className:"flex items-center gap-1",children:[e.jsx(We,{className:"w-3 h-3"}),"ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"]}),e.jsxs(N,{onClick:d,variant:"outline",size:"sm",className:"flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),"å¾Œã§"]})]})]})})})})}function ot(){const[t,s]=o.useState(!1),[a,r]=o.useState(!1);o.useEffect(()=>{"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),navigator.serviceWorker.getRegistration().then(l=>{l&&l.addEventListener("updatefound",()=>{const d=l.installing;d&&d.addEventListener("statechange",()=>{d.state==="installed"&&navigator.serviceWorker.controller&&s(!0)})})}))},[]);const n=()=>{r(!0),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistration().then(l=>{l&&l.waiting&&l.waiting.postMessage({type:"SKIP_WAITING"})})},i=()=>{s(!1)};return t?e.jsx("div",{className:"fixed top-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg shadow-lg p-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100 mb-1",children:"ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒåˆ©ç”¨å¯èƒ½"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mb-3",children:"æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚æœ€æ–°ã®æ©Ÿèƒ½ã¨æ”¹å–„ã‚’ä½“é¨“ã™ã‚‹ãŸã‚ã«æ›´æ–°ã—ã¦ãã ã•ã„ã€‚"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:n,size:"sm",className:"flex items-center gap-1 bg-blue-600 hover:bg-blue-700",disabled:a,children:[e.jsx(Xe,{className:`w-3 h-3 ${a?"animate-spin":""}`}),a?"æ›´æ–°ä¸­...":"æ›´æ–°"]}),e.jsxs(N,{onClick:i,variant:"outline",size:"sm",className:"flex items-center gap-1 border-blue-300 text-blue-700 hover:bg-blue-100 dark:border-blue-700 dark:text-blue-300 dark:hover:bg-blue-800",children:[e.jsx(ue,{className:"w-3 h-3"}),"å¾Œã§"]})]})]})})})}):null}const K={"basic-grammar":{easy:[{id:1,japanese:"ç§ã¯å­¦ç”Ÿã§ã™ã€‚",correctAnswer:"I am a student.",explanation:'ã€Œç§ã¯ï½ã§ã™ã€ã¯ "I am ~" ã§è¡¨ç¾ã—ã¾ã™ã€‚',choices:["I am a student.","I am student.","I'm the student.","I was a student."]},{id:2,japanese:"å½¼ã¯åŒ»è€…ã§ã™ã€‚",correctAnswer:"He is a doctor.",explanation:'ä¸‰äººç§°å˜æ•°ã®ä¸»èªã«ã¯ "is" ã‚’ä½¿ã„ã¾ã™ã€‚',choices:["He is a doctor.","He are a doctor.","He am a doctor.","He was a doctor."]},{id:3,japanese:"ç§ãŸã¡ã¯å‹é”ã§ã™ã€‚",correctAnswer:"We are friends.",explanation:'è¤‡æ•°ã®ä¸»èªã«ã¯ "are" ã‚’ä½¿ã„ã¾ã™ã€‚',choices:["We are friends.","We is friends.","We am friends.","We were friends."]},{id:4,japanese:"å½¼å¥³ã¯å¿™ã—ã„ã§ã™ã€‚",correctAnswer:"She is busy.",explanation:"å½¢å®¹è©ã‚’ä½¿ã£ãŸæ–‡ã§ã¯ beå‹•è©ãŒå¿…è¦ã§ã™ã€‚",choices:["She is busy.","She busy.","She are busy.","She has busy."]},{id:5,japanese:"ç§ã¯æœ¬ã‚’èª­ã¿ã¾ã™ã€‚",correctAnswer:"I read a book.",explanation:"ä¸€èˆ¬å‹•è©ã®ç¾åœ¨å½¢ã§ã¯ã€ä¸€äººç§°ã¯å‹•è©ã®åŸå½¢ã‚’ä½¿ã„ã¾ã™ã€‚",choices:["I read a book.","I reads a book.","I am read a book.","I reading a book."]},{id:6,japanese:"å½¼ã¯éŸ³æ¥½ã‚’èãã¾ã™ã€‚",correctAnswer:"He listens to music.",explanation:"ä¸‰äººç§°å˜æ•°ã§ã¯å‹•è©ã« -s ã‚’ã¤ã‘ã¾ã™ã€‚",choices:["He listens to music.","He listen to music.","He is listen to music.","He listening to music."]},{id:7,japanese:"ç§ãŸã¡ã¯å­¦æ ¡ã«è¡Œãã¾ã™ã€‚",correctAnswer:"We go to school.",explanation:"è¤‡æ•°ã®ä¸»èªã§ã¯å‹•è©ã®åŸå½¢ã‚’ä½¿ã„ã¾ã™ã€‚",choices:["We go to school.","We goes to school.","We are go to school.","We going to school."]},{id:8,japanese:"ã“ã®èŠ±ã¯ç¾ã—ã„ã§ã™ã€‚",correctAnswer:"This flower is beautiful.",explanation:'"This" ã¯å˜æ•°ãªã®ã§ beå‹•è©ã¯ "is" ã‚’ä½¿ã„ã¾ã™ã€‚',choices:["This flower is beautiful.","This flower are beautiful.","This flowers is beautiful.","This flower beautiful."]},{id:9,japanese:"ç§ã¯æ—¥æœ¬äººã§ã™ã€‚",correctAnswer:"I am Japanese.",explanation:"å›½ç±ã‚’è¡¨ã™ã¨ãã‚‚ beå‹•è©ã‚’ä½¿ã„ã¾ã™ã€‚",choices:["I am Japanese.","I am a Japanese.","I Japanese.","I from Japanese."]},{id:10,japanese:"çŒ«ã¯é­šãŒå¥½ãã§ã™ã€‚",correctAnswer:"Cats like fish.",explanation:"ä¸€èˆ¬çš„ãªäº‹å®Ÿã‚’è¡¨ã™ã¨ãã¯ç¾åœ¨å½¢ã‚’ä½¿ã„ã¾ã™ã€‚",choices:["Cats like fish.","Cats likes fish.","Cats are like fish.","Cat like fish."]}],normal:[{id:11,japanese:"ç§ã¯æ¯æ—¥å­¦æ ¡ã«æ­©ã„ã¦è¡Œãã¾ã™ã€‚",correctAnswer:"I walk to school every day.",explanation:"ç¿’æ…£ã‚’è¡¨ã™ç¾åœ¨å½¢ã§ã¯ã€å‰¯è©å¥ã§æ™‚é–“ã‚’è¡¨ç¾ã—ã¾ã™ã€‚",hint:"walk, school, every day"},{id:12,japanese:"å½¼å¥³ã¯å…ˆç”Ÿã«ãªã‚ŠãŸãŒã£ã¦ã„ã¾ã™ã€‚",correctAnswer:"She wants to be a teacher.",explanation:'"want to + å‹•è©" ã§ã€Œï½ã—ãŸã„ã€ã‚’è¡¨ç¾ã—ã¾ã™ã€‚',hint:"wants, to be, teacher"},{id:13,japanese:"ç§ãŸã¡ã®å­¦æ ¡ã«ã¯ãŸãã•ã‚“ã®ç”Ÿå¾’ãŒã„ã¾ã™ã€‚",correctAnswer:"There are many students in our school.",explanation:'å­˜åœ¨ã‚’è¡¨ã™ "There are" ã‚’ä½¿ã„ã€è¤‡æ•°å½¢ã«æ³¨æ„ã—ã¾ã™ã€‚',hint:"There are, many students, our school"},{id:14,japanese:"ãã®å•é¡Œã¯ã¨ã¦ã‚‚é›£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚",correctAnswer:"The problem is not very difficult.",explanation:`beå‹•è©ã®å¦å®šå½¢ã¯ "is not" ã¾ãŸã¯ "isn't" ã‚’ä½¿ã„ã¾ã™ã€‚`,hint:"problem, is not, very difficult"},{id:15,japanese:"å½¼ã¯è‹±èªã¨æ•°å­¦ã‚’å‹‰å¼·ã—ã¦ã„ã¾ã™ã€‚",correctAnswer:"He studies English and math.",explanation:'ä¸‰äººç§°å˜æ•°ã®ç¾åœ¨å½¢ã§ã¯ "studies" (yâ†’ies) ã¨ãªã‚Šã¾ã™ã€‚',hint:"studies, English, math"},{id:16,japanese:"ç§ã®å…„ã¯å¤§å­¦ã§åƒã„ã¦ã„ã¾ã™ã€‚",correctAnswer:"My brother works at a university.",explanation:'å ´æ‰€ã‚’è¡¨ã™ã¨ãã¯å‰ç½®è© "at" ã‚’ä½¿ã„ã¾ã™ã€‚',hint:"brother, works, university"},{id:17,japanese:"ã“ã®æœ¬ã¯ç§ã®ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚",correctAnswer:"This book is not mine.",explanation:'æ‰€æœ‰ä»£åè© "mine" ã‚’ä½¿ã„ã€å¦å®šå½¢ã§è¡¨ç¾ã—ã¾ã™ã€‚',hint:"book, is not, mine"},{id:18,japanese:"å½¼ã‚‰ã¯é€±æœ«ã«ã‚ˆãæ˜ ç”»ã‚’è¦‹ã¾ã™ã€‚",correctAnswer:"They often watch movies on weekends.",explanation:'é »åº¦ã‚’è¡¨ã™å‰¯è© "often" ã¯å‹•è©ã®å‰ã«ç½®ãã¾ã™ã€‚',hint:"often, watch movies, weekends"},{id:19,japanese:"ç§ã®æ¯ã¯æ–™ç†ãŒã¨ã¦ã‚‚ä¸Šæ‰‹ã§ã™ã€‚",correctAnswer:"My mother is very good at cooking.",explanation:'"be good at + å‹•åè©" ã§ã€Œï½ãŒä¸Šæ‰‹ã€ã‚’è¡¨ç¾ã—ã¾ã™ã€‚',hint:"mother, very good at, cooking"},{id:20,japanese:"ãã®çŠ¬ã¯å…¬åœ’ã‚’èµ°ã‚Šå›ã£ã¦ã„ã¾ã™ã€‚",correctAnswer:"The dog runs around in the park.",explanation:"ç¾åœ¨ã®ç¿’æ…£çš„è¡Œå‹•ã¯ç¾åœ¨å½¢ã§è¡¨ç¾ã—ã¾ã™ã€‚",hint:"dog, runs around, park"}],hard:[{id:21,japanese:"å½¼ãŒæˆåŠŸã™ã‚‹ç†ç”±ã¯ã€å¸¸ã«åŠªåŠ›ã‚’æ€ ã‚‰ãªã„ã“ã¨ã§ã™ã€‚",correctAnswer:"The reason why he succeeds is that he never stops making efforts.",explanation:'"The reason why ~ is that..." ã§ç†ç”±ã‚’å¼·èª¿ã™ã‚‹æ§‹æ–‡ã§ã™ã€‚'},{id:22,japanese:"ç§ãŸã¡ã®ç”ºã«ã¯å¤ã„ä¼çµ±ã‚’å¤§åˆ‡ã«ã™ã‚‹äººã€…ãŒãŸãã•ã‚“ã„ã¾ã™ã€‚",correctAnswer:"There are many people in our town who cherish old traditions.",explanation:'"There are + åè© + é–¢ä¿‚ä»£åè©" ã®æ§‹æ–‡ã§å­˜åœ¨ã¨ä¿®é£¾ã‚’åŒæ™‚ã«è¡¨ç¾ã—ã¾ã™ã€‚'},{id:23,japanese:"å½¼å¥³ã®ç¬‘é¡”ã¯è¦‹ã‚‹äººã™ã¹ã¦ã‚’å¹¸ã›ãªæ°—æŒã¡ã«ã—ã¾ã™ã€‚",correctAnswer:"Her smile makes everyone who sees it feel happy.",explanation:'"make + äºº + å‹•è©" ã§ã€Œäººã«ï½ã•ã›ã‚‹ã€ã‚’è¡¨ç¾ã—ã¾ã™ã€‚'},{id:24,japanese:"ã“ã®åº—ã§åƒãã‚¹ã‚¿ãƒƒãƒ•ã¯çš†è¦ªåˆ‡ã§ã€ãŠå®¢æ§˜ã«ä¸å¯§ã«å¯¾å¿œã—ã¾ã™ã€‚",correctAnswer:"All the staff who work at this store are kind and treat customers politely.",explanation:"é–¢ä¿‚ä»£åè©ã¨å‰¯è©ã‚’ä½¿ã£ã¦è¤‡é›‘ãªæ–‡ã‚’æ§‹æˆã—ã¦ã„ã¾ã™ã€‚"},{id:25,japanese:"ç§ãŒæ¯æœã™ã‚‹ã“ã¨ã¯ã€æ–°èã‚’èª­ã‚“ã§ä¸–ç•Œã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’çŸ¥ã‚‹ã“ã¨ã§ã™ã€‚",correctAnswer:"What I do every morning is read the newspaper and learn about world news.",explanation:'"What I do is ~" ã¨ã„ã†æ§‹æ–‡ã§è¡Œå‹•ã®å†…å®¹ã‚’å¼·èª¿ã—ã¾ã™ã€‚'},{id:26,japanese:"å½¼ã®è©±ã—æ–¹ã«ã¯ã€èãäººã®å¿ƒã‚’å‹•ã‹ã™ä½•ã‹ãŒã‚ã‚Šã¾ã™ã€‚",correctAnswer:"There is something in the way he speaks that moves listeners' hearts.",explanation:'"There is something ~ that..." ã§æŠ½è±¡çš„ãªå­˜åœ¨ã‚’è¡¨ç¾ã—ã¾ã™ã€‚'},{id:27,japanese:"ç§ãŸã¡ãŒä½ã‚“ã§ã„ã‚‹åœ°çƒã¯ã€å®‡å®™ã®ä¸­ã§ã‹ã‘ãŒãˆã®ãªã„å­˜åœ¨ã§ã™ã€‚",correctAnswer:"The Earth we live on is an irreplaceable existence in the universe.",explanation:"é–¢ä¿‚ä»£åè©ã®çœç•¥å½¢ã¨å½¢å®¹è©ã‚’ä½¿ã£ãŸè¡¨ç¾ã§ã™ã€‚"},{id:28,japanese:"å½¼å¥³ãŒæŒã£ã¦ã„ã‚‹æ‰èƒ½ã¯ã€å¤šãã®äººã€…ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚",correctAnswer:"The talent she has has the power to influence many people.",explanation:'é–¢ä¿‚ä»£åè©ã®çœç•¥ã¨ "have the power to" ã®æ§‹æ–‡ã‚’ä½¿ã„ã¾ã™ã€‚'},{id:29,japanese:"ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹æ–¹æ³•ã¯ã€ã¿ã‚“ãªã§å”åŠ›ã™ã‚‹ã“ã¨ã—ã‹ã‚ã‚Šã¾ã›ã‚“ã€‚",correctAnswer:"The only way to solve this problem is for everyone to cooperate.",explanation:'"The only way to ~ is for äºº to..." ã¨ã„ã†æ§‹æ–‡ã§ã™ã€‚'},{id:30,japanese:"äººç”Ÿã«ãŠã„ã¦å¤§åˆ‡ãªã“ã¨ã¯ã€å¸¸ã«å­¦ã³ç¶šã‘ã‚‹å§¿å‹¢ã‚’æŒã¤ã“ã¨ã ã¨æ€ã„ã¾ã™ã€‚",correctAnswer:"I think what is important in life is to always have an attitude of continuous learning.",explanation:'"What is important is to ~" ã¨ã„ã†ä¸»èªç¯€ã®æ§‹æ–‡ã‚’ä½¿ã„ã¾ã™ã€‚'}]},tenses:{easy:[{id:31,japanese:"ç§ã¯æ˜¨æ—¥æ˜ ç”»ã‚’è¦‹ã¾ã—ãŸã€‚",correctAnswer:"I watched a movie yesterday.",explanation:'éå»ã®ã“ã¨ã¯éå»å½¢ã‚’ä½¿ã„ã¾ã™ã€‚"watch" ã®éå»å½¢ã¯ "watched" ã§ã™ã€‚',choices:["I watched a movie yesterday.","I watch a movie yesterday.","I am watching a movie yesterday.","I have watched a movie yesterday."]},{id:32,japanese:"å½¼å¥³ã¯æ˜æ—¥æ±äº¬ã«è¡Œãã¾ã™ã€‚",correctAnswer:"She will go to Tokyo tomorrow.",explanation:'æœªæ¥ã®ã“ã¨ã¯ "will + å‹•è©ã®åŸå½¢" ã§è¡¨ç¾ã—ã¾ã™ã€‚',choices:["She will go to Tokyo tomorrow.","She goes to Tokyo tomorrow.","She went to Tokyo tomorrow.","She is going to Tokyo tomorrow."]},{id:33,japanese:"ç§ãŸã¡ã¯ä»Šãƒ†ãƒ¬ãƒ“ã‚’è¦‹ã¦ã„ã¾ã™ã€‚",correctAnswer:"We are watching TV now.",explanation:'ç¾åœ¨é€²è¡Œå½¢ã¯ "beå‹•è© + å‹•è©ã®ingå½¢" ã§è¡¨ç¾ã—ã¾ã™ã€‚',choices:["We are watching TV now.","We watch TV now.","We watched TV now.","We will watch TV now."]},{id:34,japanese:"å½¼ã¯ä»Šæœæ—©ãèµ·ãã¾ã—ãŸã€‚",correctAnswer:"He got up early this morning.",explanation:'"get up" ã®éå»å½¢ã¯ "got up" ã§ã™ã€‚',choices:["He got up early this morning.","He gets up early this morning.","He is getting up early this morning.","He will get up early this morning."]},{id:35,japanese:"ç§ã¯æ¥é€±å‹é”ã«ä¼šã†äºˆå®šã§ã™ã€‚",correctAnswer:"I will meet my friend next week.",explanation:'æœªæ¥ã®äºˆå®šã¯ "will" ã§è¡¨ç¾ã§ãã¾ã™ã€‚',choices:["I will meet my friend next week.","I meet my friend next week.","I met my friend next week.","I am meeting my friend next week."]},{id:36,japanese:"é›¨ãŒé™ã£ã¦ã„ã¾ã™ã€‚",correctAnswer:"It is raining.",explanation:"ç¾åœ¨ã®å¤©å€™ã¯ç¾åœ¨é€²è¡Œå½¢ã§è¡¨ç¾ã—ã¾ã™ã€‚",choices:["It is raining.","It rains.","It rained.","It will rain."]},{id:37,japanese:"ç§ã¯æ¯æ—¥æœé£Ÿã‚’é£Ÿã¹ã¾ã™ã€‚",correctAnswer:"I eat breakfast every day.",explanation:"ç¿’æ…£ã¯ç¾åœ¨å½¢ã§è¡¨ç¾ã—ã¾ã™ã€‚",choices:["I eat breakfast every day.","I ate breakfast every day.","I am eating breakfast every day.","I will eat breakfast every day."]},{id:38,japanese:"å½¼ã‚‰ã¯æ˜¨æ—¥ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã‚’æ¥½ã—ã¿ã¾ã—ãŸã€‚",correctAnswer:"They enjoyed the party yesterday.",explanation:"éå»ã®å‡ºæ¥äº‹ã¯éå»å½¢ã‚’ä½¿ã„ã¾ã™ã€‚",choices:["They enjoyed the party yesterday.","They enjoy the party yesterday.","They are enjoying the party yesterday.","They will enjoy the party yesterday."]},{id:39,japanese:"ç§ã¯ä»Šå®¿é¡Œã‚’ã—ã¦ã„ã¾ã™ã€‚",correctAnswer:"I am doing my homework now.",explanation:"ç¾åœ¨é€²è¡Œä¸­ã®ã“ã¨ã¯ç¾åœ¨é€²è¡Œå½¢ã‚’ä½¿ã„ã¾ã™ã€‚",choices:["I am doing my homework now.","I do my homework now.","I did my homework now.","I will do my homework now."]},{id:40,japanese:"æ˜æ—¥ã¯æ—¥æ›œæ—¥ã§ã™ã€‚",correctAnswer:"Tomorrow is Sunday.",explanation:"æœªæ¥ã§ã‚‚ç¢ºå®šã—ãŸäº‹å®Ÿã¯ç¾åœ¨å½¢ã‚’ä½¿ã„ã¾ã™ã€‚",choices:["Tomorrow is Sunday.","Tomorrow will be Sunday.","Tomorrow was Sunday.","Tomorrow being Sunday."]}],normal:[{id:41,japanese:"ç§ã¯3å¹´é–“è‹±èªã‚’å‹‰å¼·ã—ã¦ã„ã¾ã™ã€‚",correctAnswer:"I have been studying English for three years.",explanation:'ç¶™ç¶šã‚’è¡¨ã™ç¾åœ¨å®Œäº†é€²è¡Œå½¢ã‚’ä½¿ã„ã¾ã™ã€‚æœŸé–“ã¯ "for" ã§è¡¨ç¾ã—ã¾ã™ã€‚',hint:"have been studying, English, three years"},{id:42,japanese:"å½¼ã¯å…ˆé€±ã‹ã‚‰ãšã£ã¨å¿™ã—ãã—ã¦ã„ã¾ã™ã€‚",correctAnswer:"He has been busy since last week.",explanation:'é–‹å§‹ç‚¹ã‹ã‚‰ã®ç¶™ç¶šã¯ "since" ã‚’ä½¿ã„ã¾ã™ã€‚',hint:"has been busy, since, last week"},{id:43,japanese:"ç§ãŸã¡ãŒãã“ã«ç€ã„ãŸã¨ãã€é›¨ãŒé™ã‚Šå§‹ã‚ã¾ã—ãŸã€‚",correctAnswer:"When we arrived there, it started to rain.",explanation:"æ™‚ã‚’è¡¨ã™å‰¯è©ç¯€ã§ã¯éå»å½¢ã‚’ä½¿ã„ã¾ã™ã€‚",hint:"when, arrived, started, rain"},{id:44,japanese:"å½¼å¥³ã¯ä»Šã¾ã§ã«å¤šãã®å›½ã‚’è¨ªã‚ŒãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚",correctAnswer:"She has visited many countries so far.",explanation:"çµŒé¨“ã‚’è¡¨ã™ç¾åœ¨å®Œäº†å½¢ã‚’ä½¿ã„ã¾ã™ã€‚",hint:"has visited, many countries, so far"},{id:45,japanese:"ç§ã¯æ˜æ—¥ã®ä»Šé ƒã€é£›è¡Œæ©Ÿã®ä¸­ã«ã„ã‚‹ã§ã—ã‚‡ã†ã€‚",correctAnswer:"I will be on a plane at this time tomorrow.",explanation:"æœªæ¥ã®ã‚ã‚‹æ™‚ç‚¹ã§ã®çŠ¶æ…‹ã¯æœªæ¥é€²è¡Œå½¢ã‚’ä½¿ã„ã¾ã™ã€‚",hint:"will be, plane, this time tomorrow"},{id:46,japanese:"å½¼ã¯æ˜¨æ—¥ã®å¤œã€ãšã£ã¨å‹‰å¼·ã—ã¦ã„ã¾ã—ãŸã€‚",correctAnswer:"He was studying all night last night.",explanation:"éå»ã®ã‚ã‚‹æ™‚ç‚¹ã§ã®ç¶™ç¶šã¯éå»é€²è¡Œå½¢ã‚’ä½¿ã„ã¾ã™ã€‚",hint:"was studying, all night, last night"},{id:47,japanese:"ç§ãŸã¡ã¯æ¥æœˆã¾ã§ã«ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Œæˆã•ã›ã‚‹äºˆå®šã§ã™ã€‚",correctAnswer:"We will have finished this project by next month.",explanation:"æœªæ¥ã®ã‚ã‚‹æ™‚ç‚¹ã§ã®å®Œäº†ã¯æœªæ¥å®Œäº†å½¢ã‚’ä½¿ã„ã¾ã™ã€‚",hint:"will have finished, project, by next month"},{id:48,japanese:"å½¼å¥³ã¯5æ­³ã®ã¨ãã‹ã‚‰ ãƒ”ã‚¢ãƒã‚’å¼¾ã„ã¦ã„ã¾ã™ã€‚",correctAnswer:"She has been playing the piano since she was five years old.",explanation:"éå»ã®ã‚ã‚‹æ™‚ç‚¹ã‹ã‚‰ã®ç¶™ç¶šã¯ç¾åœ¨å®Œäº†é€²è¡Œå½¢ã‚’ä½¿ã„ã¾ã™ã€‚",hint:"has been playing, piano, since, five years old"},{id:49,japanese:"ç§ã¯æ˜¨æ—¥ãã®æœ¬ã‚’èª­ã¿çµ‚ãˆã¾ã—ãŸã€‚",correctAnswer:"I finished reading the book yesterday.",explanation:"éå»ã®å®Œäº†ã—ãŸè¡Œç‚ºã¯éå»å½¢ã‚’ä½¿ã„ã¾ã™ã€‚",hint:"finished reading, book, yesterday"},{id:50,japanese:"å½¼ã‚‰ã¯æ¥å¹´çµå©šã™ã‚‹äºˆå®šã§ã™ã€‚",correctAnswer:"They are going to get married next year.",explanation:'äºˆå®šã‚’è¡¨ã™ã¨ãã¯ "be going to" ã‚‚ä½¿ãˆã¾ã™ã€‚',hint:"are going to, get married, next year"}],hard:[{id:51,japanese:"å½¼ãŒåˆ°ç€ã™ã‚‹ã¾ã§ã«ã€ç§ãŸã¡ã¯ã™ã¹ã¦ã®æº–å‚™ã‚’çµ‚ãˆã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚",correctAnswer:"By the time he arrives, we will have finished all the preparations.",explanation:'"By the time" ã¯æ™‚ã‚’è¡¨ã™å‰¯è©ç¯€ã§ã€æœªæ¥å®Œäº†ã¨çµ„ã¿åˆã‚ã›ã¾ã™ã€‚'},{id:52,japanese:"ã‚‚ã—æ˜¨æ—¥é›¨ãŒé™ã‚‰ãªã‹ã£ãŸã‚‰ã€ç§ãŸã¡ã¯ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯ã«è¡Œã£ãŸã§ã—ã‚‡ã†ã€‚",correctAnswer:"If it had not rained yesterday, we would have gone on a picnic.",explanation:"ä»®å®šæ³•éå»å®Œäº†ã§ã€éå»ã®äº‹å®Ÿã¨åå¯¾ã®ä»®å®šã‚’è¡¨ç¾ã—ã¾ã™ã€‚"},{id:53,japanese:"å½¼å¥³ã¯ä¼šè­°ãŒå§‹ã¾ã‚‹å‰ã«ã€ã™ã§ã«è³‡æ–™ã‚’æº–å‚™ã—ã¦ã„ã¾ã—ãŸã€‚",correctAnswer:"She had already prepared the materials before the meeting started.",explanation:"éå»å®Œäº†å½¢ã§ã€éå»ã®ã‚ã‚‹æ™‚ç‚¹ã‚ˆã‚Šå‰ã®å®Œäº†ã‚’è¡¨ç¾ã—ã¾ã™ã€‚"},{id:54,japanese:"ç§ãŒå­ä¾›ã®é ƒã¯ã€æ¯å¹´å¤ã«ç¥–çˆ¶æ¯ã®å®¶ã‚’è¨ªã‚Œã¦ã„ã¾ã—ãŸã€‚",correctAnswer:"When I was a child, I used to visit my grandparents' house every summer.",explanation:'"used to" ã§éå»ã®ç¿’æ…£ã‚’è¡¨ç¾ã—ã¾ã™ã€‚'},{id:55,japanese:"æ¥é€±ã®ä»Šé ƒã€ç§ãŸã¡ã¯æ–°ã—ã„ã‚ªãƒ•ã‚£ã‚¹ã§åƒã„ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚",correctAnswer:"This time next week, we will be working in our new office.",explanation:"æœªæ¥é€²è¡Œå½¢ã§ã€æœªæ¥ã®ã‚ã‚‹æ™‚ç‚¹ã§ã®é€²è¡Œä¸­ã®å‹•ä½œã‚’è¡¨ç¾ã—ã¾ã™ã€‚"},{id:56,japanese:"å½¼ã¯é•·å¹´ã®é–“ã€ãã®å•é¡Œã«ã¤ã„ã¦è€ƒãˆç¶šã‘ã¦ãã¾ã—ãŸã€‚",correctAnswer:"He has been thinking about that problem for many years.",explanation:"ç¾åœ¨å®Œäº†é€²è¡Œå½¢ã§ã€éå»ã‹ã‚‰ç¾åœ¨ã¾ã§ç¶šãå‹•ä½œã‚’è¡¨ç¾ã—ã¾ã™ã€‚"},{id:57,japanese:"ãã®æ™‚ç‚¹ã§ã€ç§ãŸã¡ã¯ã™ã§ã«5æ™‚é–“ã‚‚å¾…ã£ã¦ã„ãŸã®ã§ã™ã€‚",correctAnswer:"At that point, we had already been waiting for five hours.",explanation:"éå»å®Œäº†é€²è¡Œå½¢ã§ã€éå»ã®ã‚ã‚‹æ™‚ç‚¹ã¾ã§ã®ç¶™ç¶šã‚’è¡¨ç¾ã—ã¾ã™ã€‚"},{id:58,japanese:"å½¼ãŒèª¬æ˜ã‚’çµ‚ãˆã‚‹é ƒã«ã¯ã€ã¿ã‚“ãªç†è§£ã—ã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚",correctAnswer:"By the time he finishes explaining, everyone will have understood.",explanation:"æ™‚ã®å‰¯è©ç¯€ã¨æœªæ¥å®Œäº†ã®çµ„ã¿åˆã‚ã›ã§ã™ã€‚"},{id:59,japanese:"ã‚‚ã—ç§ãŒã‚ã®æ™‚ã‚‚ã£ã¨å‹‰å¼·ã—ã¦ã„ãŸã‚‰ã€ä»Šé ƒã‚‚ã£ã¨è‰¯ã„ä»•äº‹ã«å°±ã„ã¦ã„ãŸã§ã—ã‚‡ã†ã€‚",correctAnswer:"If I had studied harder at that time, I would have a better job now.",explanation:"æ··åˆä»®å®šæ³•ã§ã€éå»ã®ä»®å®šã¨ç¾åœ¨ã®å¸°çµã‚’è¡¨ç¾ã—ã¾ã™ã€‚"},{id:60,japanese:"å½¼å¥³ã¯å’æ¥­ã™ã‚‹ã¾ã§ã«ã€ã™ã§ã«3å¹´é–“ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å–ã‚Šçµ„ã‚“ã§ã„ã‚‹ã§ã—ã‚‡ã†ã€‚",correctAnswer:"By the time she graduates, she will have been working on that project for three years.",explanation:"æœªæ¥å®Œäº†é€²è¡Œå½¢ã§ã€æœªæ¥ã®ã‚ã‚‹æ™‚ç‚¹ã¾ã§ã®ç¶™ç¶šæœŸé–“ã‚’è¡¨ç¾ã—ã¾ã™ã€‚"}]},modals:{easy:[{id:61,japanese:"ç§ã¯æ³³ãã“ã¨ãŒã§ãã¾ã™ã€‚",correctAnswer:"I can swim.",explanation:'èƒ½åŠ›ã‚’è¡¨ã™ã¨ãã¯ "can" ã‚’ä½¿ã„ã¾ã™ã€‚',choices:["I can swim.","I can to swim.","I can swimming.","I am can swim."]}],normal:[{id:71,japanese:"ç§ã¯æ˜æ—¥ã¾ã§ã«ãƒ¬ãƒãƒ¼ãƒˆã‚’æå‡ºã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚",correctAnswer:"I have to submit my report by tomorrow.",explanation:'å¤–éƒ¨ã‹ã‚‰ã®ç¾©å‹™ã¯ "have to" ã‚’ä½¿ã†ã“ã¨ãŒå¤šã„ã§ã™ã€‚',hint:"have to submit, report, by tomorrow"}],hard:[{id:81,japanese:"å½¼ã¯ç´„æŸã‚’å®ˆã£ãŸã¯ãšãªã®ã«ã€æ¥ã¾ã›ã‚“ã§ã—ãŸã€‚",correctAnswer:"He should have kept his promise, but he didn't come.",explanation:'"should have + éå»åˆ†è©" ã§éå»ã«ã™ã¹ãã ã£ãŸã“ã¨ã‚’è¡¨ç¾ã—ã¾ã™ã€‚'}]},passive:{easy:[{id:91,japanese:"ã“ã®æœ¬ã¯å¤šãã®äººã«èª­ã¾ã‚Œã¦ã„ã¾ã™ã€‚",correctAnswer:"This book is read by many people.",explanation:'å—å‹•æ…‹ã¯ "beå‹•è© + éå»åˆ†è©" ã§ä½œã‚Šã¾ã™ã€‚',choices:["This book is read by many people.","This book reads by many people.","This book is reading by many people.","This book was read by many people."]}],normal:[{id:101,japanese:"ã“ã®å»ºç‰©ã¯1950å¹´ã«å»ºã¦ã‚‰ã‚Œã¾ã—ãŸã€‚",correctAnswer:"This building was built in 1950.",explanation:'éå»ã®å—å‹•æ…‹ã§å¹´ã‚’è¡¨ã™ã¨ãã¯ "in" ã‚’ä½¿ã„ã¾ã™ã€‚',hint:"building, was built, 1950"}],hard:[{id:111,japanese:"ãã®æ±ºå®šãŒä¸‹ã•ã‚Œã‚‹å‰ã«ã€ã™ã¹ã¦ã®é¸æŠè‚¢ãŒæ¤œè¨ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚",correctAnswer:"All options had been considered before the decision was made.",explanation:"éå»å®Œäº†ã®å—å‹•æ…‹ã§ã€æ™‚ç³»åˆ—ã‚’æ˜ç¢ºã«ã—ã¾ã™ã€‚"}]},relative:{easy:[{id:121,japanese:"ç§ã«ã¯è‹±èªã‚’è©±ã™å‹é”ãŒã„ã¾ã™ã€‚",correctAnswer:"I have a friend who speaks English.",explanation:'äººã‚’ä¿®é£¾ã™ã‚‹ã¨ãã¯é–¢ä¿‚ä»£åè© "who" ã‚’ä½¿ã„ã¾ã™ã€‚',choices:["I have a friend who speaks English.","I have a friend which speaks English.","I have a friend that speak English.","I have a friend who speak English."]}],normal:[{id:131,japanese:"ç§ãŒæ˜¨æ—¥ä¼šã£ãŸäººã¯æœ‰åãªä½œå®¶ã§ã—ãŸã€‚",correctAnswer:"The person whom I met yesterday was a famous writer.",explanation:'ç›®çš„æ ¼ã®é–¢ä¿‚ä»£åè©ã¯ "whom" ã‚’ä½¿ã„ã¾ã™ï¼ˆ"who" ã§ã‚‚å¯ï¼‰ã€‚',hint:"person, whom, met yesterday, famous writer"}],hard:[{id:141,japanese:"å½¼ãŒè¨€ã£ãŸã“ã¨ã¯ã€ç§ãŸã¡ãŒäºˆæƒ³ã—ã¦ã„ãŸã“ã¨ã¨å…¨ãç•°ãªã£ã¦ã„ã¾ã—ãŸã€‚",correctAnswer:"What he said was completely different from what we had expected.",explanation:'é–¢ä¿‚ä»£åè© "what" ã¯ã€Œï½ã™ã‚‹ã“ã¨ã€ã‚’è¡¨ã—ã€å…ˆè¡Œè©ã‚’å«ã¿ã¾ã™ã€‚'}]},subjunctive:{easy:[{id:151,japanese:"ã‚‚ã—æ˜æ—¥é›¨ãŒé™ã£ãŸã‚‰ã€å®¶ã«ã„ã¾ã™ã€‚",correctAnswer:"If it rains tomorrow, I will stay at home.",explanation:"ç¾åœ¨ã®ä»®å®šã§ã¯ã€ifç¯€ã¯ç¾åœ¨å½¢ã€ä¸»ç¯€ã¯æœªæ¥å½¢ã‚’ä½¿ã„ã¾ã™ã€‚",choices:["If it rains tomorrow, I will stay at home.","If it will rain tomorrow, I stay at home.","If it rained tomorrow, I will stay at home.","If it rains tomorrow, I stayed at home."]}],normal:[{id:161,japanese:"ã‚‚ã—æ˜¨æ—¥é›¨ãŒé™ã‚‰ãªã‹ã£ãŸã‚‰ã€ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯ã«è¡Œã£ãŸã§ã—ã‚‡ã†ã€‚",correctAnswer:"If it had not rained yesterday, we would have gone on a picnic.",explanation:'ä»®å®šæ³•éå»å®Œäº†ã§ã¯ã€ifç¯€ã¯éå»å®Œäº†ã€ä¸»ç¯€ã¯ "would have + éå»åˆ†è©" ã‚’ä½¿ã„ã¾ã™ã€‚',hint:"had not rained, would have gone, picnic"}],hard:[{id:171,japanese:"ã‚‚ã—å½¼ãŒã‚ã®æ™‚é•ã†æ±ºæ–­ã‚’ã—ã¦ã„ãŸã‚‰ã€ä»Šé ƒã¯å…¨ãé•ã†äººç”Ÿã‚’é€ã£ã¦ã„ãŸã§ã—ã‚‡ã†ã€‚",correctAnswer:"If he had made a different decision at that time, he would be living a completely different life now.",explanation:"æ··åˆä»®å®šæ³•ï¼šéå»ã®ä»®å®šã®æ¡ä»¶ã¨ç¾åœ¨ã®ä»®å®šã®çµæœã‚’çµ„ã¿åˆã‚ã›ã¾ã™ã€‚"}]},comparison:{easy:[{id:181,japanese:"å½¼ã¯ç§ã‚ˆã‚ŠèƒŒãŒé«˜ã„ã§ã™ã€‚",correctAnswer:"He is taller than me.",explanation:'æ¯”è¼ƒç´šã¯ "å½¢å®¹è© + er + than" ã§è¡¨ç¾ã—ã¾ã™ã€‚',choices:["He is taller than me.","He is more tall than me.","He is tall than me.","He is taller then me."]}],normal:[{id:191,japanese:"ã“ã®èª²é¡Œã¯ç§ãŒæ€ã£ã¦ã„ãŸã‚ˆã‚Šã‚‚ãšã£ã¨é›£ã—ã„ã§ã™ã€‚",correctAnswer:"This assignment is much more difficult than I thought.",explanation:'æ¯”è¼ƒç´šã‚’å¼·èª¿ã™ã‚‹ã¨ãã¯ "much" ã‚’ä½¿ã„ã¾ã™ã€‚',hint:"much more difficult, than I thought"}],hard:[{id:201,japanese:"å½¼ã®æˆåŠŸã¯ã€æ‰èƒ½ã‚ˆã‚Šã‚‚ã‚€ã—ã‚åŠªåŠ›ã®çµæœã§ã™ã€‚",correctAnswer:"His success is more a result of effort than of talent.",explanation:'"more A than B" ã§ã€ŒBã¨ã„ã†ã‚ˆã‚Šã‚€ã—ã‚Aã€ã‚’è¡¨ç¾ã—ã¾ã™ã€‚'}]},participle:{easy:[{id:211,japanese:"ç§ã¯èµ°ã£ã¦ã„ã‚‹ç”·ã®å­ã‚’è¦‹ã¾ã—ãŸã€‚",correctAnswer:"I saw a boy running.",explanation:"ç¾åœ¨åˆ†è© (-ing) ã§é€²è¡Œä¸­ã®å‹•ä½œã‚’ä¿®é£¾ã—ã¾ã™ã€‚",choices:["I saw a boy running.","I saw a boy run.","I saw a boy ran.","I saw a boy to run."]}],normal:[{id:221,japanese:"é§…ã«å‘ã‹ã£ã¦èµ°ã‚ŠãªãŒã‚‰ã€å½¼ã¯æ™‚è¨ˆã‚’è¦‹ã¾ã—ãŸã€‚",correctAnswer:"Running towards the station, he looked at his watch.",explanation:"åˆ†è©æ§‹æ–‡ã§åŒæ™‚å‹•ä½œã‚’è¡¨ç¾ã—ã¾ã™ã€‚",hint:"Running towards, station, looked at watch"}],hard:[{id:231,japanese:"é•·å¹´ã®çµŒé¨“ã‚’ç©ã‚“ã çµæœã€å½¼ã¯å°‚é–€å®¶ã¨ã—ã¦èªã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚",correctAnswer:"Having accumulated years of experience, he came to be recognized as an expert.",explanation:"å®Œäº†åˆ†è©æ§‹æ–‡ã¨å—å‹•æ…‹ã®çµ„ã¿åˆã‚ã›ã§ã™ã€‚"}]},infinitive:{easy:[{id:241,japanese:"ç§ã¯è‹±èªã‚’å‹‰å¼·ã—ãŸã„ã§ã™ã€‚",correctAnswer:"I want to study English.",explanation:'"want" ã®å¾Œã¯ä¸å®šè© "to + å‹•è©ã®åŸå½¢" ã‚’ä½¿ã„ã¾ã™ã€‚',choices:["I want to study English.","I want study English.","I want studying English.","I want studied English."]}],normal:[{id:251,japanese:"ç§ã¯å½¼ã«è‹±èªã‚’æ•™ãˆã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚",correctAnswer:"I had him teach me English.",explanation:'ä½¿å½¹å‹•è© "have" ã®å¾Œã¯åŸå½¢ä¸å®šè©ï¼ˆto ãªã—ï¼‰ã‚’ä½¿ã„ã¾ã™ã€‚',hint:"had him teach, English"}],hard:[{id:261,japanese:"å½¼ã¯å•é¡Œã‚’è§£æ±ºã—ãŸã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚",correctAnswer:"He is said to have solved the problem.",explanation:'"be said to have + éå»åˆ†è©" ã§å®Œäº†ã®ä¸å®šè©ã‚’ä½¿ã£ãŸä¼èè¡¨ç¾ã§ã™ã€‚'}]}};function me(t,s){if(console.log("=== getQuestions called ==="),console.log("category:",t),console.log("difficulty:",s),console.log("questionsByCategory keys:",Object.keys(K)),console.log("category exists in data:",t in K),!(t in K))return console.error("Category not found:",t),[];const a=K[t];if(console.log("difficulty exists in category:",s in a),!(s in a))return console.error("Difficulty not found for category:",t,s),[];const r=a[s];return console.log("Found questions:",r.length),r||[]}o.lazy(()=>j(()=>import("./learning-CJqkZPhv.js").then(t=>t.V),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.VocabularyCard})));const lt=o.lazy(()=>j(()=>import("./EnhancedVocabularyCard-BhNc2Wfk.js"),__vite__mapDeps([5,1,2,3,0,4,6])).then(t=>({default:t.EnhancedVocabularyCard}))),ct=o.lazy(()=>j(()=>import("./VocabularyDifficultySelection-CrxCPQXf.js"),__vite__mapDeps([7,1,2,3,0,4])).then(t=>({default:t.VocabularyDifficultySelection}))),dt=o.lazy(()=>j(()=>import("./VocabularyCategorySelection-DqZcrsMJ.js"),__vite__mapDeps([8,1,2,3,0,4])).then(t=>({default:t.VocabularyCategorySelection})));o.lazy(()=>j(()=>import("./learning-CJqkZPhv.js").then(t=>t.z),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.GrammarQuiz})));const mt=o.lazy(()=>j(()=>import("./EnhancedGrammarQuiz-Buq35HRg.js"),__vite__mapDeps([9,1,2,0,3,4,6])).then(t=>({default:t.EnhancedGrammarQuiz}))),ht=o.lazy(()=>j(()=>import("./GrammarQuizDifficultySelection-D6cnHa78.js"),__vite__mapDeps([10,1,2,3,0,4])).then(t=>({default:t.GrammarQuizDifficultySelection}))),ut=o.lazy(()=>j(()=>import("./learning-CJqkZPhv.js").then(t=>t.E),__vite__mapDeps([0,1,2,3,4])).then(t=>({default:t.CombinedTest}))),xt=o.lazy(()=>j(()=>import("./progress-Bh7B1qMw.js").then(t=>t.A),__vite__mapDeps([4,1,2,3,0])).then(t=>({default:t.Achievements}))),gt=o.lazy(()=>j(()=>import("./CategorySelection-CXS2pTWu.js"),__vite__mapDeps([11,1,2,3,0,4])).then(t=>({default:t.CategorySelection}))),pt=o.lazy(()=>j(()=>import("./DifficultySelection-mQ-c7S8j.js"),__vite__mapDeps([12,1,2,3,0,4])).then(t=>({default:t.DifficultySelection}))),ft=o.lazy(()=>j(()=>import("./Question-uscAv-YO.js"),__vite__mapDeps([13,1,2,3,0,4])).then(t=>({default:t.Question}))),yt=o.lazy(()=>j(()=>import("./Results-v_bTYCrw.js"),__vite__mapDeps([14,1,2,3,4,0])).then(t=>({default:t.Results}))),vt=o.lazy(()=>j(()=>import("./AppSettings-CpTWmeFn.js"),__vite__mapDeps([15,1,2,3,0,4,16])).then(t=>({default:t.AppSettings}))),jt=o.lazy(()=>j(()=>import("./TimeAttackMode-D8kI3G-Z.js"),__vite__mapDeps([17,1,2,3,0,4])).then(t=>({default:t.TimeAttackMode}))),wt=o.lazy(()=>j(()=>import("./game-DhYA9e1X.js").then(t=>t.S),__vite__mapDeps([3,1,2])).then(t=>({default:t.SimpleTowerDefense})));function he(t){const s=[...t];for(let a=s.length-1;a>0;a--){const r=Math.floor(Math.random()*(a+1));[s[a],s[r]]=[s[r],s[a]]}return s}function bt(t,s,a){const r=n=>n.toLowerCase().replace(/[^\w\s]/g,"").trim();if(a==="easy")return r(t)===r(s);{const n=r(t),l=r(s).split(/\s+/),d=n.split(/\s+/);return l.filter(h=>h.length>2&&d.some(m=>m.includes(h)||h.includes(m))).length>=Math.ceil(l.length*.7)}}function Nt(){const[t,s]=o.useState("home"),[a,r]=o.useState("basic-grammar"),[n,i]=o.useState("easy"),[l,d]=o.useState("intermediate"),[g,h]=o.useState("all"),[m,u]=o.useState("intermediate"),[x,b]=o.useState([]),[f,C]=o.useState(0),[c,y]=o.useState([]),[E,$]=o.useState(0),R=()=>{s("category")},_=()=>{s("vocabulary-difficulty")},U=v=>{d(v),s("vocabulary-category")},Y=v=>{h(v),s("vocabulary")},Z=()=>{s("grammar-quiz-difficulty")},pe=v=>{u(v),s("grammar-quiz")},fe=()=>{s("category")},ye=()=>{s("combined-test")},ve=()=>{s("achievements")},je=()=>{s("app-settings")},we=()=>{s("time-attack")},be=()=>{s("simple-tower-defense")},T=()=>{s("home")},Ne=v=>{console.log("Category selected:",v),r(v),s("difficulty")},Se=v=>{console.log("=== Debug handleSelectDifficulty ==="),console.log("Difficulty selected:",v),console.log("Selected category:",a);try{i(v);const I=me(a,v);if(console.log("Retrieved questions:",I.length),console.log("Questions data:",I),I.length===0){console.error("No questions found for category:",a,"difficulty:",v);return}console.log("About to shuffle questions...");const W=V.getAppSettings().essayQuestionCount,D=he(I).slice(0,W);console.log("Shuffled questions:",D.length),console.log("Setting questions state..."),b(D),C(0),y([]),$(Date.now()),console.log("Setting screen to question"),s("question"),console.log("handleSelectDifficulty completed successfully")}catch(I){console.error("Error in handleSelectDifficulty:",I)}},Ae=v=>{const I=x[f],F=bt(v,I.correctAnswer,n),W={questionId:I.id,answer:v,isCorrect:F},D=[...c,W];if(y(D),f+1<x.length)C(f+1);else{const re=Math.round((Date.now()-E)/1e3),ne=D.filter(Le=>Le.isCorrect).length,Ie=Math.round(ne/x.length*100),Te=Ee(D,n,a,re);V.recordLearningSession({date:new Date().toISOString().split("T")[0],type:"grammar-quiz",category:a,difficulty:n,score:Ie,totalQuestions:x.length,correctAnswers:ne,xpEarned:Te,duration:re}),V.checkAndUpdateAchievements(),s("results")}},ke=()=>{const v=me(a,n),F=V.getAppSettings().essayQuestionCount,W=he(v).slice(0,F);b(W),C(0),y([]),$(Date.now()),s("question")},se=()=>{s("difficulty")},ae=()=>{s("category")};t==="question"&&(console.log("=== Question Screen State ==="),console.log("currentScreen:",t),console.log("questions.length:",x.length),console.log("selectedCategory:",a),console.log("difficulty:",n));const w=()=>e.jsx("div",{className:"min-h-screen p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl mb-2",children:"èª­ã¿è¾¼ã¿ä¸­..."}),e.jsx("p",{className:"text-muted-foreground",children:"ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™"})]})});return e.jsxs("div",{className:"min-h-screen bg-background",children:[t==="home"&&e.jsx(nt,{onNavigateToGrammar:R,onNavigateToVocabulary:_,onNavigateToGrammarQuiz:Z,onNavigateToEssay:fe,onNavigateToCombinedTest:ye,onNavigateToAchievements:ve,onNavigateToAppSettings:je,onNavigateToTimeAttack:we,onNavigateToSimpleTowerDefense:be}),t==="vocabulary-difficulty"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ct,{onBack:T,onSelectDifficulty:U})}),t==="vocabulary-category"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(dt,{onBack:()=>s("vocabulary-difficulty"),onSelectCategory:Y})}),t==="vocabulary"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(lt,{onBack:()=>s("vocabulary-category"),difficulty:l,category:g})}),t==="grammar-quiz-difficulty"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ht,{onBack:T,onSelectDifficulty:pe})}),t==="grammar-quiz"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(mt,{onBack:()=>s("grammar-quiz-difficulty"),difficulty:m})}),t==="combined-test"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ut,{onBack:T})}),t==="achievements"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(xt,{onBack:T})}),t==="app-settings"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(vt,{onBack:T})}),t==="time-attack"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(jt,{onBack:T})}),t==="simple-tower-defense"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(wt,{onBack:T})}),t==="category"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(gt,{onSelectCategory:Ne,onBack:T})}),t==="difficulty"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(pt,{category:a,onSelectDifficulty:Se,onBack:ae})}),t==="question"&&x.length>0&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(ft,{question:x[f],questionNumber:f+1,totalQuestions:x.length,difficulty:n,category:a,onAnswer:Ae,onBack:se})}),t==="question"&&x.length===0&&e.jsx("div",{className:"min-h-screen p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl mb-2",children:"å•é¡Œã®èª­ã¿è¾¼ã¿ä¸­..."}),e.jsxs("p",{className:"text-muted-foreground",children:["ã‚«ãƒ†ã‚´ãƒªãƒ¼: ",a,e.jsx("br",{}),"é›£æ˜“åº¦: ",n]})]})}),t==="results"&&e.jsx(o.Suspense,{fallback:e.jsx(w,{}),children:e.jsx(yt,{questions:x,userAnswers:c,difficulty:n,category:a,sessionDuration:Math.round((Date.now()-E)/1e3),onRestart:ke,onChangeDifficulty:se,onChangeCategory:ae,onBack:T})}),e.jsx(it,{}),e.jsx(ot,{})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});Be.createRoot(document.getElementById("root")).render(e.jsx(Nt,{}));export{Ct as Q,xe as R,me as a,Lt as c,p as g,k as s};
