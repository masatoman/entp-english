import{j as e,r as d}from"./ui-smpf69Zd.js";import{p as ce,g as de,A as T,R as Q,H as B,D as me,q as xe,r as ge,t as ue,u as he,w as pe,x as F,y as ye,s as G,z as fe}from"./learning-B-E1ZIuS.js";import{g as je}from"./index-CPlkK9WN.js";import{u as be,a as ve,b as Ne,C as v,f as $,B as y,d as N,e as we,P as ke}from"./game-Dd6Kb0LE.js";import"./vendor-D3F3s8fL.js";import"./progress-BPWR83xl.js";const K=[{id:1,type:"quote",category:"grammar",content:"Grammar is the grave of letters.",translation:"文法は文字の墓場である。",explanation:"マーク・トウェインの言葉。文法にこだわりすぎると、自然な表現力が失われるという意味。"},{id:2,type:"quote",category:"grammar",content:"The limits of my language mean the limits of my world.",translation:"私の言語の限界が、私の世界の限界を意味する。",explanation:"哲学者ルートヴィヒ・ウィトゲンシュタインの言葉。言語が思考の枠組みを作ることを示している。"},{id:3,type:"tip",category:"grammar",content:"English has no future tense!",translation:"英語には未来時制がない！",explanation:"英語では 'will' や 'going to' を使って未来を表現しますが、動詞の形自体は変わりません。"},{id:4,type:"tip",category:"grammar",content:"The word 'set' has the most meanings in English.",translation:"「set」という単語が英語で最も多くの意味を持つ。",explanation:"Oxford English Dictionaryによると、'set'は464の異なる意味を持つ最も多義的な単語です。"},{id:5,type:"quote",category:"grammar",content:"A language is a dialect with an army and navy.",translation:"言語とは、軍隊と海軍を持つ方言である。",explanation:"社会言語学者マックス・ワインライヒの言葉。政治的な力が言語の地位を決定することを示している。"},{id:6,type:"quote",category:"vocabulary",content:"Words are, of course, the most powerful drug used by mankind.",translation:"言葉は、もちろん、人類が使用する最も強力な薬である。",explanation:"小説家ラドヤード・キップリングの言葉。言葉の影響力の大きさを表現している。"},{id:7,type:"tip",category:"vocabulary",content:"English borrows from over 350 languages!",translation:"英語は350以上の言語から借用している！",explanation:"英語の語彙の約80%が他の言語から借用されたもので、特にラテン語、フランス語、ギリシャ語からの借用が多い。"},{id:8,type:"tip",category:"vocabulary",content:"The longest English word is 45 letters long!",translation:"最も長い英語の単語は45文字！",explanation:"'pneumonoultramicroscopicsilicovolcanoconiosis'（塵肺症）が最も長い英単語として知られています。"},{id:9,type:"quote",category:"vocabulary",content:"The difference between the right word and the almost right word is the difference between lightning and a lightning bug.",translation:"正しい単語とほぼ正しい単語の違いは、稲妻と蛍の違いである。",explanation:"マーク・トウェインの言葉。単語選択の重要性を強調している。"},{id:10,type:"tip",category:"vocabulary",content:"Shakespeare invented over 1,700 words!",translation:"シェイクスピアは1,700以上の単語を発明した！",explanation:"'eyeball', 'swagger', 'lonely'など、現在も使われている多くの単語をシェイクスピアが初めて使用した。"},{id:11,type:"quote",category:"general",content:"The best way to learn a language is to speak it.",translation:"言語を学ぶ最良の方法は、それを話すことである。",explanation:"理論だけでなく、実際に使うことで言語は身につくという学習の基本原則。"},{id:12,type:"quote",category:"general",content:"A different language is a different vision of life.",translation:"異なる言語は、異なる人生観である。",explanation:"映画監督フェデリコ・フェリーニの言葉。言語が世界観を形成することを示している。"},{id:13,type:"tip",category:"general",content:"English is spoken by 1.5 billion people worldwide!",translation:"英語は世界中で15億人に話されている！",explanation:"世界人口の約20%が英語を話し、そのうち約4億人が母語として使用している。"},{id:14,type:"tip",category:"general",content:"The word 'OK' comes from 'oll korrect'!",translation:"「OK」という単語は「oll korrect」から来ている！",explanation:"19世紀のアメリカで、'all correct'のスペルミス版として生まれた略語が定着した。"},{id:15,type:"quote",category:"general",content:"If you talk to a man in a language he understands, that goes to his head. If you talk to him in his language, that goes to his heart.",translation:"人が理解する言語で話せば、それは頭に届く。その人の言語で話せば、それは心に届く。",explanation:"ネルソン・マンデラの言葉。母語で話すことの深い影響力を表現している。"},{id:16,type:"tip",category:"general",content:"English has more words than any other language!",translation:"英語は他のどの言語よりも多くの単語を持つ！",explanation:"Oxford English Dictionaryには約60万語が収録されており、これは他の言語を大きく上回る。"},{id:17,type:"quote",category:"general",content:"Language is the road map of a culture. It tells you where its people come from and where they are going.",translation:"言語は文化の地図である。その人々がどこから来て、どこへ向かうかを教えてくれる。",explanation:"言語学者リタ・メイ・ブラウンの言葉。言語と文化の深い関係を示している。"},{id:18,type:"tip",category:"general",content:"The word 'queue' is pronounced the same even if you remove 4 letters!",translation:"「queue」という単語は4文字削除しても発音が同じ！",explanation:"'queue' → 'que' → 'qu' → 'q' と文字を削除しても、すべて 'kyu' と発音される。"},{id:19,type:"quote",category:"general",content:"One language sets you in a corridor for life. Two languages open every door along the way.",translation:"一つの言語は人生の廊下にあなたを置く。二つの言語は道中のすべての扉を開く。",explanation:"フランク・スミスの言葉。多言語習得の価値を表現している。"},{id:20,type:"tip",category:"general",content:"The shortest complete sentence in English is 'I am.'",translation:"英語で最も短い完全な文は「I am.」である。",explanation:"主語と動詞を含む完全な文として、最も短い形の例。"},{id:21,type:"quote",category:"general",content:"May the Force be with you.",translation:"フォースが共にあらんことを。",explanation:"スター・ウォーズシリーズの有名なセリフ。日常でも「頑張って」の意味で使われる。"},{id:22,type:"quote",category:"general",content:"I'll be back.",translation:"また戻ってくる。",explanation:"ターミネーターシリーズのアーノルド・シュワルツェネッガーの名セリフ。最も有名な映画のセリフの一つ。"},{id:23,type:"quote",category:"general",content:"Life is like a box of chocolates. You never know what you're gonna get.",translation:"人生はチョコレートの箱のようなもの。何が入っているかわからない。",explanation:"映画「フォレスト・ガンプ」の名セリフ。人生の不確実性を表現した美しい比喩。"},{id:24,type:"quote",category:"general",content:"To infinity and beyond!",translation:"無限の彼方へ！",explanation:"トイ・ストーリーのバズ・ライトイヤーの決めゼリフ。目標に向かって突き進む気持ちを表現。"},{id:25,type:"quote",category:"general",content:"I'm the king of the world!",translation:"俺は世界の王だ！",explanation:"映画「タイタニック」のジャックのセリフ。自由と希望を表現した名シーン。"},{id:26,type:"quote",category:"general",content:"You can't handle the truth!",translation:"お前には真実は扱えない！",explanation:"映画「ア・フュー・グッドメン」の名セリフ。真実の重さを表現した力強い言葉。"},{id:27,type:"quote",category:"general",content:"Houston, we have a problem.",translation:"ヒューストン、問題が発生しました。",explanation:"映画「アポロ13」のセリフ。危機的状況を冷静に報告する際の表現として使われる。"},{id:28,type:"quote",category:"general",content:"Elementary, my dear Watson.",translation:"初歩的なことだ、ワトソン君。",explanation:"シャーロック・ホームズの名セリフ。推理小説やドラマでよく使われる表現。"},{id:29,type:"quote",category:"general",content:"I'll make him an offer he can't refuse.",translation:"断れない条件を提示してやる。",explanation:"映画「ゴッドファーザー」の名セリフ。ビジネスでも使われる強気な表現。"},{id:30,type:"quote",category:"general",content:"Keep your friends close, but your enemies closer.",translation:"友人は近くに、敵はもっと近くに置け。",explanation:"映画「ゴッドファーザー」の名セリフ。戦略的思考を表現した格言として使われる。"},{id:31,type:"quote",category:"general",content:"I'm walking here!",translation:"歩いてるんだよ！",explanation:"映画「ミッドナイト・カウボーイ」の名セリフ。ニューヨークの街角でよく使われる表現。"},{id:32,type:"quote",category:"general",content:"Here's looking at you, kid.",translation:"君を見つめているよ、坊や。",explanation:"映画「カサブランカ」の名セリフ。別れの際の美しい表現として知られる。"},{id:33,type:"quote",category:"general",content:"I'll be there for you.",translation:"君のためにそこにいるよ。",explanation:"ドラマ「フレンズ」のテーマソングの歌詞。友情を表現した温かい言葉。"},{id:34,type:"quote",category:"general",content:"Winter is coming.",translation:"冬が来る。",explanation:"ドラマ「ゲーム・オブ・スローンズ」の名セリフ。警告や予兆を表現する際に使われる。"},{id:35,type:"quote",category:"general",content:"You know nothing, Jon Snow.",translation:"君は何も知らない、ジョン・スノー。",explanation:"ドラマ「ゲーム・オブ・スローンズ」のイグリットのセリフ。無知を指摘する際に使われる。"},{id:36,type:"quote",category:"general",content:"I am Iron Man.",translation:"俺はアイアンマンだ。",explanation:"映画「アイアンマン」シリーズのトニー・スタークのセリフ。自信を表現する際に使われる。"},{id:37,type:"quote",category:"general",content:"With great power comes great responsibility.",translation:"大きな力には大きな責任が伴う。",explanation:"スパイダーマンシリーズの名セリフ。責任感の重要性を表現した格言。"},{id:38,type:"quote",category:"general",content:"I'm Batman.",translation:"俺はバットマンだ。",explanation:"バットマンシリーズの名セリフ。シンプルで力強い自己紹介の表現。"},{id:39,type:"quote",category:"general",content:"I'm not a smart man, but I know what love is.",translation:"俺は賢い男じゃないが、愛が何かは知っている。",explanation:"映画「フォレスト・ガンプ」の名セリフ。シンプルで心に響く愛の表現。"},{id:40,type:"quote",category:"general",content:"I'm the captain now.",translation:"俺が船長だ。",explanation:"映画「キャプテン・フィリップス」の名セリフ。主導権を握った際の表現として使われる。"},{id:41,type:"quote",category:"general",content:"I see dead people.",translation:"死んだ人が見える。",explanation:"映画「シックス・センス」の名セリフ。超自然現象を表現する際に使われる。"},{id:42,type:"quote",category:"general",content:"There's no place like home.",translation:"家ほど良い場所はない。",explanation:"映画「オズの魔法使い」のドロシーのセリフ。故郷の大切さを表現した名セリフ。"},{id:43,type:"quote",category:"general",content:"I'm going to make him an offer he can't refuse.",translation:"断れない条件を提示してやる。",explanation:"映画「ゴッドファーザー」の名セリフ。ビジネスでも使われる強気な表現。"},{id:44,type:"quote",category:"general",content:"I'll have what she's having.",translation:"彼女と同じものをください。",explanation:"映画「ハリーとサリー」の名セリフ。レストランでよく使われる表現。"},{id:45,type:"quote",category:"general",content:"I'm the king of the world!",translation:"俺は世界の王だ！",explanation:"映画「タイタニック」のジャックのセリフ。自由と希望を表現した名シーン。"},{id:46,type:"quote",category:"general",content:"I'm walking here!",translation:"歩いてるんだよ！",explanation:"映画「ミッドナイト・カウボーイ」の名セリフ。ニューヨークの街角でよく使われる表現。"},{id:47,type:"quote",category:"general",content:"I'll be back.",translation:"また戻ってくる。",explanation:"ターミネーターシリーズのアーノルド・シュワルツェネッガーの名セリフ。最も有名な映画のセリフの一つ。"},{id:48,type:"quote",category:"general",content:"I'm the king of the world!",translation:"俺は世界の王だ！",explanation:"映画「タイタニック」のジャックのセリフ。自由と希望を表現した名シーン。"},{id:49,type:"quote",category:"general",content:"I'm walking here!",translation:"歩いてるんだよ！",explanation:"映画「ミッドナイト・カウボーイ」の名セリフ。ニューヨークの街角でよく使われる表現。"},{id:50,type:"quote",category:"general",content:"I'll be back.",translation:"また戻ってくる。",explanation:"ターミネーターシリーズのアーノルド・シュワルツェネッガーの名セリフ。最も有名な映画のセリフの一つ。"}];function qe(n){let t=K;t=K.filter(r=>r.category===n);const i=Math.floor(Math.random()*t.length);return t[i]}const Se={normal:{min:3,max:8},rare:{min:10,max:18},epic:{min:25,max:40},legendary:{min:50,max:100}};function Ce(n){if(n<=20){const t=Math.random();return t<.8?"normal":t<.98?"rare":"epic"}else if(n<=40){const t=Math.random();return t<.6?"normal":t<.9?"rare":t<.99?"epic":"legendary"}else if(n<=60){const t=Math.random();return t<.4?"normal":t<.75?"rare":t<.95?"epic":"legendary"}else if(n<=80){const t=Math.random();return t<.25?"normal":t<.6?"rare":t<.9?"epic":"legendary"}else{const t=Math.random();return t<.15?"normal":t<.45?"rare":t<.8?"epic":"legendary"}}function Ie(n,t=!1){const i=Se[n],r=Math.floor(Math.random()*(i.max-i.min+1))+i.min;return t?Math.floor(r*1.5):r}function Te(n,t,i){return n.filter(r=>{const a=["normal","rare","epic","legendary"].indexOf(r.rank);return a>=a})}function Me(n,t){if(n.length===0)return null;const i=n.map(x=>{const c=t[x.skillField]/30,j=Re(x.rank);return c*j}),r=i.reduce((x,c)=>x+c,0);if(r===0)return n[Math.floor(Math.random()*n.length)];const u=Math.random()*r;let a=0;for(let x=0;x<n.length;x++)if(a+=i[x],u<=a)return n[x];return n[0]}function Re(n){return{normal:1,rare:2,epic:3,legendary:5}[n]}const Ae=({rank:n,showIcon:t=!0,showName:i=!0,showXP:r=!1,question:u,size:a="md",className:x=""})=>{const c=ce[n],j={sm:"text-xs px-2 py-1",md:"text-sm px-3 py-1.5",lg:"text-base px-4 py-2"},w={sm:"text-sm",md:"text-base",lg:"text-lg"};return e.jsxs("div",{className:`inline-flex items-center space-x-1 ${c.bgColor} ${c.color} rounded-full ${j[a]} ${x}`,children:[t&&e.jsx("span",{className:w[a],children:c.icon}),i&&e.jsx("span",{className:"font-medium",children:c.name}),r&&u&&e.jsxs("span",{className:"text-xs opacity-75",children:["+",u.xpReward,"XP"]})]})},Ee="ontouchstart"in window||navigator.maxTouchPoints>0;function De({blankId:n,droppedWord:t,onDrop:i}){const[{isOver:r},u]=fe({accept:"word",drop:a=>i(n,a.word),collect:a=>({isOver:a.isOver()})});return e.jsx("span",{ref:u,className:`
        inline-block min-w-[80px] h-8 px-3 mx-1 border-2 border-dashed rounded-md
        flex items-center justify-center text-center
        ${r?"border-blue-500 bg-blue-50":"border-gray-300"}
        ${t?"bg-blue-100 border-blue-400 border-solid":""}
        transition-all duration-200
      `,children:t||"?"})}function Qe({word:n}){const[{isDragging:t},i]=ye({type:"word",item:{word:n},collect:r=>({isDragging:r.isDragging()})});return e.jsx("span",{ref:i,className:`
        inline-block px-3 py-1 mx-1 mb-2 bg-blue-100 text-blue-800 rounded-md cursor-move
        hover:bg-blue-200 transition-colors duration-200
        ${t?"opacity-50":""}
      `,children:n})}function ze(){const n=be(),{category:t,difficulty:i}=ve();Ne();const r=t,u=i||"intermediate",[a,x]=d.useState([]),[c,j]=d.useState(0),[w,M]=d.useState({}),[S,O]=d.useState(0),[U,P]=d.useState(!1),[$e,L]=d.useState(0),[_,Y]=d.useState([]),[W,R]=d.useState(!1),[H,A]=d.useState(null),[b,X]=d.useState(null),[f]=d.useState(()=>de()),[C,J]=d.useState(f.getHeartSystem()),[E,Z]=d.useState(f.getLevel()),[V]=d.useState(f.getStatusAllocation());d.useEffect(()=>{if(!f.consumeHeart()){alert("体力が不足しています。回復を待ってから再試行してください。"),n(`/learning/grammar/difficulty/${r}`);return}z(),L(Date.now()),J(f.getHeartSystem()),G()},[]);const z=()=>{console.log("Generating questions for category:",r,"difficulty:",u);const s=je(u,r);if(console.log("Original questions:",s),!s||s.length===0){console.error("No grammar questions found for difficulty:",u),x([]);return}const o=s.map((m,k)=>{const h=Ce(E.level),q="grammar",oe=Ie(h);return{id:m.id,question:m.sentence,options:m.options,correctAnswer:m.blanks.map(ie=>ie.correctAnswer).join(" "),explanation:m.explanation,category:"basic-grammar",difficulty:"normal",rank:h,skillField:q,xpReward:oe,blanks:m.blanks}});console.log("Enhanced questions:",o);const g=Te(o,E.level);console.log("Filtered questions:",g);const p=[],I=8;for(let m=0;m<I;m++){const k=g.filter(h=>!p.some(q=>q.id===h.id));if(k.length>0){const h=Me(k,V);h&&p.push(h)}}console.log("Selected questions:",p),x(p)},l=a[c]||null,ee=a.length>0?(c+1)/a.length*100:0;d.useEffect(()=>{if(l&&l.options){const s=[...l.options].sort(()=>Math.random()-.5);Y(s),M({}),R(!1),A(null),X(null)}},[c,l]);const te=(s,o)=>{M(g=>({...g,[s]:o}))},ne=()=>{if(!l||!l.blanks)return!1;let s=!0;for(const o of l.blanks){const g=w[o.id];if(!g||g!==o.correctAnswer){s=!1;break}}return s},ae=()=>{const s=ne();A(s),s&&O(o=>o+1),X(qe("grammar")),R(!0)},se=()=>{R(!1),A(null),c<a.length-1?j(s=>s+1):re()},re=()=>{P(!0);const s=pe(a.length>0?a.map((g,p)=>({questionId:g.id,answer:w[`blank_${p}`]||"",isCorrect:S>0})):[],l?.rank||"normal",!0),o=f.addXP(s);Z(f.getLevel()),G(),o.leveledUp?F.sounds.levelUp():F.sounds.complete()},le=()=>{if(!l||!l.blanks)return null;const s=l.question,o=l.blanks,g=s.split(" "),p=[];let I=0;for(let m=0;m<g.length;m++){const k=g[m],h=o.find(q=>q.position===m+1);h?(p.push(e.jsx(De,{blankId:h.id,droppedWord:w[h.id]||null,onDrop:te},`blank_${I}`)),I++):p.push(e.jsx("span",{className:"mx-1",children:k},m))}return p},D=()=>{j(0),M({}),O(0),P(!1),z(),L(Date.now())};return a.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(v,{className:"mb-6",children:[e.jsx($,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(y,{onClick:()=>n(`/learning/grammar/difficulty/${r}`),variant:"outline",size:"sm",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"戻る"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"文法クイズ"})]})})}),e.jsx(N,{children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"text-lg text-gray-600",children:"問題を読み込み中..."}),e.jsx("div",{className:"text-sm text-gray-500",children:"しばらくお待ちください"}),e.jsxs(y,{onClick:D,variant:"outline",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"再読み込み"]})]})})]})})}):U?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(v,{className:"mb-6",children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"クイズ結果"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-5 h-5 text-red-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[C.current,"/",C.max]})]})]})}),e.jsx(N,{children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"text-4xl font-bold text-blue-600",children:[S," / ",a.length]}),e.jsxs("div",{className:"text-lg text-gray-600",children:["正解率: ",Math.round(S/a.length*100),"%"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["獲得XP: ",a.reduce((s,o)=>s+o.xpReward,0)]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"問題解説"}),a.map((s,o)=>e.jsxs("div",{className:"text-left p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"font-medium text-gray-800 mb-2",children:["問題 ",o+1,": ",s.question]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"解説:"})," ",s.explanation]})]},s.id))]}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs(y,{onClick:D,className:"flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"もう一度挑戦"]}),e.jsxs(y,{onClick:()=>n(`/learning/grammar/difficulty/${r}`),variant:"outline",className:"flex items-center",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"ホームに戻る"]})]})]})})]})})}):!l||a.length===0?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx(v,{children:e.jsxs(N,{className:"p-8 text-center",children:[e.jsx("div",{className:"text-lg text-gray-600",children:a.length===0?"問題が見つかりませんでした":"問題を読み込み中..."}),e.jsxs(y,{onClick:()=>n(`/learning/grammar/difficulty/${r}`),className:"mt-4",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"戻る"]})]})})})}):e.jsx(me,{backend:Ee?xe:ge,children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs(v,{className:"mb-6",children:[e.jsx($,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(y,{onClick:()=>n(`/learning/grammar/difficulty/${r}`),variant:"outline",size:"sm",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"戻る"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"文法クイズ"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"w-5 h-5 text-red-500"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[C.current,"/",C.max]})]}),e.jsxs(we,{variant:"secondary",children:["Level ",E.level]})]})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["問題 ",c+1,"/",a.length]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[c+1," / ",a.length]})]}),e.jsx(ke,{value:ee,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["スコア: ",S," / ",a.length]}),e.jsx(Ae,{rank:l.rank,showXP:!0,question:l,size:"sm"})]})]})})]}),e.jsx(v,{className:"mb-6",children:e.jsx(N,{className:"p-6",children:l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:l.question}),e.jsx("p",{className:"text-sm text-gray-600",children:"空欄に適切な単語をドラッグして文を完成させてください"})]}),e.jsx("div",{className:"text-center text-lg",children:le()}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"単語を選んでください"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:_.map((s,o)=>e.jsx(Qe,{word:s},o))})]})]}):e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"text-lg text-gray-600",children:"問題を読み込み中..."}),e.jsx("div",{className:"text-sm text-gray-500",children:"しばらくお待ちください"}),e.jsxs(y,{onClick:D,variant:"outline",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"再読み込み"]})]})})}),W&&l&&e.jsx(v,{className:"mb-6 border-2 border-blue-200 bg-blue-50",children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center space-x-2",children:H?e.jsxs(e.Fragment,{children:[e.jsx(ue,{className:"w-6 h-6 text-green-500"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:"正解！"})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-6 h-6 text-red-500"}),e.jsx("span",{className:"text-xl font-bold text-red-600",children:"不正解"})]})}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"正解:"}),e.jsx("div",{className:"text-lg font-semibold text-gray-800",children:l.blanks?.map(s=>s.correctAnswer).join(" ")})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"解説:"}),e.jsx("div",{className:"text-gray-800",children:l.explanation})]}),b&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-sm text-purple-700 mb-2 font-medium",children:b.type==="quote"?"💭 英語の格言":"💡 英語の豆知識"}),e.jsxs("div",{className:"text-purple-800 mb-2 font-semibold",children:['"',b.content,'"']}),e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:b.translation}),b.explanation&&e.jsx("div",{className:"text-xs text-purple-500 italic",children:b.explanation}),e.jsx("div",{className:"mt-2 text-xs text-purple-600",children:H?`+${l.xpReward}XP 獲得！`:"正解を覚えて次回に活かしましょう！"})]}),e.jsx(y,{onClick:se,size:"lg",className:"mt-4",children:c<a.length-1?"次の問題へ":"結果を見る"})]})})}),!W&&e.jsx("div",{className:"flex justify-center",children:e.jsx(y,{onClick:ae,size:"lg",children:c<a.length-1?"次の問題":"答え合わせ"})})]})})})}export{ze as default};
