import{j as e}from"./ui-smpf69Zd.js";import{u as F,b as G,C as l,d as c,f as h,h as j,P as d,e as g}from"./game-Dd6Kb0LE.js";import{n as L,a1 as f,a2 as M,a as b,a3 as $,m as A,S as B,l as O}from"./learning-B-E1ZIuS.js";import"./vendor-D3F3s8fL.js";import"./progress-BPWR83xl.js";function Q(){const y=F();G();const i={totalXP:0,preStudySessions:[]},s=(()=>{const n=(i.preStudySessions||[]).filter(t=>t.completed&&t.comprehensionRating);if(n.length===0)return{averageComprehension:0,comprehensionImprovement:0,totalStudyDays:0,recentImprovement:0,categoryProgress:{},streakGrowth:0,learningConsistency:0,actualLearningTime:0,confidenceScore:0};const v=n.slice(-10),u=n.slice(0,10),x=v.reduce((t,a)=>t+(a.comprehensionRating||0),0)/v.length,w=u.length>0?u.reduce((t,a)=>t+(a.comprehensionRating||0),0)/u.length:x,S=x-w,C=new Set(n.map(t=>new Date(t.startTime).toDateString())).size,o={};n.forEach(t=>{const a=t.contentId.split("_")[1]||"unknown";o[a]||(o[a]={count:0,avgRating:0}),o[a].count++,o[a].avgRating+=t.comprehensionRating||0}),Object.keys(o).forEach(t=>{o[t].avgRating/=o[t].count});const I=i.currentStreak,N=n.reduce((t,a)=>{const P=a.endTime?(a.endTime-a.startTime)/1e3/60:3;return t+P},0),D=N/n.length,T=Math.min(D/3,1),k=1-(Math.max(...n.map(t=>t.comprehensionRating||0))-Math.min(...n.map(t=>t.comprehensionRating||0)))/4,R=(T+k)/2;return{averageComprehension:x,comprehensionImprovement:S,totalStudyDays:C,recentImprovement:x,categoryProgress:o,streakGrowth:i.currentStreak,learningConsistency:I,actualLearningTime:N,confidenceScore:R}})(),p=(r=>r>=1.5?{level:"S",color:"from-purple-500 to-pink-500",text:"ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¬ãƒ™ãƒ«ï¼"}:r>=1?{level:"A",color:"from-green-500 to-emerald-500",text:"ãƒ“ã‚¸ãƒã‚¹è‹±èªOKï¼"}:r>=.5?{level:"B",color:"from-blue-500 to-cyan-500",text:"æ—¥å¸¸ä¼šè©±ã§ãã¾ã™ï¼"}:r>=0?{level:"C",color:"from-yellow-500 to-orange-500",text:"åŸºç¤ã¯å®Œç’§ï¼"}:{level:"D",color:"from-gray-500 to-slate-500",text:"åŸºç¤å›ºã‚ä¸­"})(s.comprehensionImprovement),m=(r=>r>=4.5?"è‹±æ¤œ1ç´šãƒ¬ãƒ™ãƒ«ï¼ãƒã‚¤ãƒ†ã‚£ãƒ–ã¨å¯¾ç­‰ã«è©±ã›ã¾ã™":r>=4?"è‹±æ¤œæº–1ç´šãƒ¬ãƒ™ãƒ«ï¼ãƒ“ã‚¸ãƒã‚¹è‹±èªã§æ´»èºã§ãã¾ã™":r>=3.5?"è‹±æ¤œ2ç´šãƒ¬ãƒ™ãƒ«ï¼æ—¥å¸¸ä¼šè©±ã¯å®Œç’§ã§ã™":r>=3?"è‹±æ¤œ3ç´šãƒ¬ãƒ™ãƒ«ï¼åŸºæœ¬çš„ãªä¼šè©±ãŒã§ãã¾ã™":r>=2.5?"è‹±æ¤œ4ç´šãƒ¬ãƒ™ãƒ«ï¼ç°¡å˜ãªä¼šè©±ãŒã§ãã¾ã™":r>=2?"è‹±æ¤œ5ç´šãƒ¬ãƒ™ãƒ«ï¼æŒ¨æ‹¶ã¨è‡ªå·±ç´¹ä»‹ãŒã§ãã¾ã™":"åŸºç¤å­¦ç¿’ä¸­ï¼ä¸€ç·’ã«é ‘å¼µã‚Šã¾ã—ã‚‡ã†")(s.averageComprehension);return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-8",children:[e.jsx("button",{onClick:()=>y("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"â† æˆ»ã‚‹"}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[e.jsx(L,{className:"w-6 h-6 mr-2 text-green-600"}),"æˆé•·ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰"]}),e.jsx("div",{className:"w-10"})]}),e.jsx(l,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-0 shadow-lg",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br ${p.color} mb-4`,children:e.jsx("span",{className:"text-2xl font-bold text-white",children:p.level})}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:p.text}),e.jsxs("p",{className:"text-gray-600",children:["ç†è§£åº¦å‘ä¸Š: ",s.comprehensionImprovement>0?"+":"",s.comprehensionImprovement.toFixed(1),"ãƒã‚¤ãƒ³ãƒˆ"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(l,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-lg",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx(f,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:s.averageComprehension.toFixed(1)}),e.jsx("div",{className:"text-sm opacity-90",children:"ç¾åœ¨ã®ç†è§£åº¦"}),e.jsx("div",{className:"text-xs opacity-75 mt-1",children:m})]})}),e.jsx(l,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0 shadow-lg",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx(M,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:s.totalStudyDays}),e.jsx("div",{className:"text-sm opacity-90",children:"å­¦ç¿’æ—¥æ•°"})]})}),e.jsx(l,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-lg",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx(b,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:i.currentStreak}),e.jsx("div",{className:"text-sm opacity-90",children:"é€£ç¶šå­¦ç¿’æ—¥"})]})}),e.jsx(l,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white border-0 shadow-lg",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx($,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:i.totalXP}),e.jsx("div",{className:"text-sm opacity-90",children:"ç·ç²å¾—XP"})]})})]}),e.jsxs(l,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-2 text-blue-600"}),"ç†è§£åº¦ã®å‘ä¸Š"]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ç†è§£åº¦å‘ä¸Šç‡"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[s.comprehensionImprovement>0?"+":"",s.comprehensionImprovement.toFixed(1),"ãƒã‚¤ãƒ³ãƒˆ"]})]}),e.jsx(d,{value:Math.min(Math.max((s.comprehensionImprovement+2)*25,0),100),className:"h-3"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.comprehensionImprovement>0?`ğŸ‰ ç´ æ™´ã‚‰ã—ã„ï¼${s.comprehensionImprovement.toFixed(1)}ãƒã‚¤ãƒ³ãƒˆå‘ä¸Šï¼${m}`:s.comprehensionImprovement===0?`âœ¨ ${m}`:`ğŸ’ª ${m}`})]})})]}),e.jsxs(l,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(f,{className:"w-5 h-5 mr-2 text-purple-600"}),"å­¦ç¿’ã®ä¿¡é ¼åº¦åˆ†æ"]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.confidenceScore.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"ä¿¡é ¼åº¦ã‚¹ã‚³ã‚¢"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.confidenceScore>=.8?"é«˜ä¿¡é ¼åº¦":s.confidenceScore>=.6?"ä¸­ä¿¡é ¼åº¦":"è¦æ”¹å–„"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[s.actualLearningTime.toFixed(0),"åˆ†"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"ç·å­¦ç¿’æ™‚é–“"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"å®Ÿéš›ã«å­¦ç¿’ã—ãŸæ™‚é–“"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[s.learningConsistency,"æ—¥"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"é€£ç¶šå­¦ç¿’"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"å­¦ç¿’ã®ä¸€è²«æ€§"})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"ğŸ’¡ ä¿¡é ¼åº¦ã®èª¬æ˜"}),e.jsxs("div",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"å­¦ç¿’æ™‚é–“"}),": å®Ÿéš›ã«å­¦ç¿’ã—ãŸæ™‚é–“ãŒé•·ã„ã»ã©ä¿¡é ¼åº¦ãŒä¸ŠãŒã‚Šã¾ã™"]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"è©•ä¾¡ã®ä¸€è²«æ€§"}),": ç†è§£åº¦è©•ä¾¡ãŒå®‰å®šã—ã¦ã„ã‚‹ã»ã©ä¿¡é ¼åº¦ãŒä¸ŠãŒã‚Šã¾ã™"]}),e.jsxs("div",{children:["â€¢ ",e.jsx("strong",{children:"ç¶™ç¶šæ€§"}),": é€£ç¶šå­¦ç¿’æ—¥æ•°ãŒå¤šã„ã»ã©ä¿¡é ¼åº¦ãŒä¸ŠãŒã‚Šã¾ã™"]})]})]}),s.confidenceScore<.6&&e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"âš ï¸ ç†è§£åº¦è©•ä¾¡ã®æ”¹å–„ææ¡ˆ"}),e.jsxs("div",{className:"text-sm text-red-700 space-y-1",children:[e.jsxs("div",{children:["â€¢ ç†è§£åº¦è©•ä¾¡ã¯",e.jsx("strong",{children:"æ­£ç›´ã«"}),"è¡Œã„ã¾ã—ã‚‡ã†"]}),e.jsxs("div",{children:["â€¢ åˆ†ã‹ã‚‰ãªã„å ´åˆã¯",e.jsx("strong",{children:"æ˜Ÿ1-2"}),"ã‚’é¸ã‚“ã§ãã ã•ã„"]}),e.jsxs("div",{children:["â€¢ ä½ã„è©•ä¾¡ã§ã‚‚",e.jsx("strong",{children:"å¾©ç¿’ã®æ©Ÿä¼š"}),"ã¨ã—ã¦æ´»ç”¨ã§ãã¾ã™"]}),e.jsxs("div",{children:["â€¢ æ­£ç¢ºãªè©•ä¾¡ãŒ",e.jsx("strong",{children:"çœŸã®æˆé•·"}),"ã«ã¤ãªãŒã‚Šã¾ã™"]})]})]})]})})]}),Object.keys(s.categoryProgress).length>0&&e.jsxs(l,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2 text-yellow-600"}),"åˆ†é‡åˆ¥ã‚¹ã‚­ãƒ«å‘ä¸Š"]})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(s.categoryProgress).map(([r,n])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium capitalize",children:r}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[n.count,"å›å­¦ç¿’"]}),e.jsxs(g,{variant:"secondary",children:["å¹³å‡ ",n.avgRating.toFixed(1),"â˜…"]})]})]}),e.jsx(d,{value:n.avgRating/5*100,className:"h-2"})]},r))})})]}),e.jsxs(l,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(O,{className:"w-5 h-5 mr-2 text-indigo-600"}),"å­¦ç¿’ã®è»Œè·¡"]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"åˆå›å­¦ç¿’"}),e.jsx("div",{className:"text-sm text-gray-600",children:i.preStudySessions?.[0]?new Date(i.preStudySessions[0].startTime).toLocaleDateString():"ã¾ã å­¦ç¿’ã—ã¦ã„ã¾ã›ã‚“"})]})]}),e.jsx(g,{variant:"outline",children:"ã‚¹ã‚¿ãƒ¼ãƒˆ"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:s.totalStudyDays}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"ç¾åœ¨ã®å­¦ç¿’æ—¥æ•°"}),e.jsx("div",{className:"text-sm text-gray-600",children:"ç¶™ç¶šçš„ãªå­¦ç¿’ã‚’ç¶šã‘ã¦ã„ã¾ã™"})]})]}),e.jsx(g,{variant:"default",children:"ç¶™ç¶šä¸­"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:"â˜…"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"ç†è§£åº¦å‘ä¸Š"}),e.jsx("div",{className:"text-sm text-gray-600",children:s.comprehensionImprovement>0?`${s.comprehensionImprovement.toFixed(1)}ãƒã‚¤ãƒ³ãƒˆå‘ä¸Š`:"å®‰å®šã—ãŸç†è§£åº¦ã‚’ç¶­æŒ"})]})]}),e.jsx(g,{variant:"secondary",children:s.comprehensionImprovement>0?"æˆé•·ä¸­":"å®‰å®š"})]})]})})]}),e.jsx(l,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-0 shadow-lg",children:e.jsxs(c,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-orange-600"}),"æ¬¡ã®ç›®æ¨™"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"è‹±æ¤œ1ç´šãƒ¬ãƒ™ãƒ«é”æˆ"}),e.jsx(d,{value:s.averageComprehension/5*100,className:"w-32 h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"é€£ç¶šå­¦ç¿’30æ—¥"}),e.jsx(d,{value:i.currentStreak/30*100,className:"w-32 h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"ç·å­¦ç¿’æ—¥100æ—¥"}),e.jsx(d,{value:s.totalStudyDays/100*100,className:"w-32 h-2"})]})]})]})})]})})}export{Q as default};
