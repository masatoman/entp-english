import{j as e}from"./ui-smpf69Zd.js";import{u as F,b as G,C as l,d as c,f as h,h as j,P as d,e as g}from"./game-Dd6Kb0LE.js";import{n as L,a1 as f,a2 as M,a as b,a3 as $,m as A,S as B,l as O}from"./learning-B-E1ZIuS.js";import"./vendor-D3F3s8fL.js";import"./progress-BPWR83xl.js";function Q(){const y=F();G();const i={totalXP:0,preStudySessions:[]},s=(()=>{const n=(i.preStudySessions||[]).filter(t=>t.completed&&t.comprehensionRating);if(n.length===0)return{averageComprehension:0,comprehensionImprovement:0,totalStudyDays:0,recentImprovement:0,categoryProgress:{},streakGrowth:0,learningConsistency:0,actualLearningTime:0,confidenceScore:0};const v=n.slice(-10),u=n.slice(0,10),x=v.reduce((t,a)=>t+(a.comprehensionRating||0),0)/v.length,w=u.length>0?u.reduce((t,a)=>t+(a.comprehensionRating||0),0)/u.length:x,S=x-w,C=new Set(n.map(t=>new Date(t.startTime).toDateString())).size,o={};n.forEach(t=>{const a=t.contentId.split("_")[1]||"unknown";o[a]||(o[a]={count:0,avgRating:0}),o[a].count++,o[a].avgRating+=t.comprehensionRating||0}),Object.keys(o).forEach(t=>{o[t].avgRating/=o[t].count});const I=i.currentStreak,N=n.reduce((t,a)=>{const P=a.endTime?(a.endTime-a.startTime)/1e3/60:3;return t+P},0),D=N/n.length,T=Math.min(D/3,1),k=1-(Math.max(...n.map(t=>t.comprehensionRating||0))-Math.min(...n.map(t=>t.comprehensionRating||0)))/4,R=(T+k)/2;return{averageComprehension:x,comprehensionImprovement:S,totalStudyDays:C,recentImprovement:x,categoryProgress:o,streakGrowth:i.currentStreak,learningConsistency:I,actualLearningTime:N,confidenceScore:R}})(),p=(r=>r>=1.5?{level:"S",color:"from-purple-500 to-pink-500",text:"ネイティブレベル！"}:r>=1?{level:"A",color:"from-green-500 to-emerald-500",text:"ビジネス英語OK！"}:r>=.5?{level:"B",color:"from-blue-500 to-cyan-500",text:"日常会話できます！"}:r>=0?{level:"C",color:"from-yellow-500 to-orange-500",text:"基礎は完璧！"}:{level:"D",color:"from-gray-500 to-slate-500",text:"基礎固め中"})(s.comprehensionImprovement),m=(r=>r>=4.5?"英検1級レベル！ネイティブと対等に話せます":r>=4?"英検準1級レベル！ビジネス英語で活躍できます":r>=3.5?"英検2級レベル！日常会話は完璧です":r>=3?"英検3級レベル！基本的な会話ができます":r>=2.5?"英検4級レベル！簡単な会話ができます":r>=2?"英検5級レベル！挨拶と自己紹介ができます":"基礎学習中！一緒に頑張りましょう")(s.averageComprehension);return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between pt-8",children:[e.jsx("button",{onClick:()=>y("/"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"← 戻る"}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center",children:[e.jsx(L,{className:"w-6 h-6 mr-2 text-green-600"}),"成長ダッシュボード"]}),e.jsx("div",{className:"w-10"})]}),e.jsx(l,{className:"bg-gradient-to-r from-green-50 to-blue-50 border-0 shadow-lg",children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br ${p.color} mb-4`,children:e.jsx("span",{className:"text-2xl font-bold text-white",children:p.level})}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:p.text}),e.jsxs("p",{className:"text-gray-600",children:["理解度向上: ",s.comprehensionImprovement>0?"+":"",s.comprehensionImprovement.toFixed(1),"ポイント"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(l,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-lg",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx(f,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:s.averageComprehension.toFixed(1)}),e.jsx("div",{className:"text-sm opacity-90",children:"現在の理解度"}),e.jsx("div",{className:"text-xs opacity-75 mt-1",children:m})]})}),e.jsx(l,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0 shadow-lg",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx(M,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:s.totalStudyDays}),e.jsx("div",{className:"text-sm opacity-90",children:"学習日数"})]})}),e.jsx(l,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-lg",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx(b,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:i.currentStreak}),e.jsx("div",{className:"text-sm opacity-90",children:"連続学習日"})]})}),e.jsx(l,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white border-0 shadow-lg",children:e.jsxs(c,{className:"p-4 text-center",children:[e.jsx($,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:i.totalXP}),e.jsx("div",{className:"text-sm opacity-90",children:"総獲得XP"})]})})]}),e.jsxs(l,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-2 text-blue-600"}),"理解度の向上"]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"理解度向上率"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[s.comprehensionImprovement>0?"+":"",s.comprehensionImprovement.toFixed(1),"ポイント"]})]}),e.jsx(d,{value:Math.min(Math.max((s.comprehensionImprovement+2)*25,0),100),className:"h-3"}),e.jsx("div",{className:"text-sm text-gray-500",children:s.comprehensionImprovement>0?`🎉 素晴らしい！${s.comprehensionImprovement.toFixed(1)}ポイント向上！${m}`:s.comprehensionImprovement===0?`✨ ${m}`:`💪 ${m}`})]})})]}),e.jsxs(l,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(f,{className:"w-5 h-5 mr-2 text-purple-600"}),"学習の信頼度分析"]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.confidenceScore.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"信頼度スコア"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.confidenceScore>=.8?"高信頼度":s.confidenceScore>=.6?"中信頼度":"要改善"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[s.actualLearningTime.toFixed(0),"分"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"総学習時間"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"実際に学習した時間"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[s.learningConsistency,"日"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"連続学習"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"学習の一貫性"})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"💡 信頼度の説明"}),e.jsxs("div",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsxs("div",{children:["• ",e.jsx("strong",{children:"学習時間"}),": 実際に学習した時間が長いほど信頼度が上がります"]}),e.jsxs("div",{children:["• ",e.jsx("strong",{children:"評価の一貫性"}),": 理解度評価が安定しているほど信頼度が上がります"]}),e.jsxs("div",{children:["• ",e.jsx("strong",{children:"継続性"}),": 連続学習日数が多いほど信頼度が上がります"]})]})]}),s.confidenceScore<.6&&e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"⚠️ 理解度評価の改善提案"}),e.jsxs("div",{className:"text-sm text-red-700 space-y-1",children:[e.jsxs("div",{children:["• 理解度評価は",e.jsx("strong",{children:"正直に"}),"行いましょう"]}),e.jsxs("div",{children:["• 分からない場合は",e.jsx("strong",{children:"星1-2"}),"を選んでください"]}),e.jsxs("div",{children:["• 低い評価でも",e.jsx("strong",{children:"復習の機会"}),"として活用できます"]}),e.jsxs("div",{children:["• 正確な評価が",e.jsx("strong",{children:"真の成長"}),"につながります"]})]})]})]})})]}),Object.keys(s.categoryProgress).length>0&&e.jsxs(l,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(B,{className:"w-5 h-5 mr-2 text-yellow-600"}),"分野別スキル向上"]})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(s.categoryProgress).map(([r,n])=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium capitalize",children:r}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[n.count,"回学習"]}),e.jsxs(g,{variant:"secondary",children:["平均 ",n.avgRating.toFixed(1),"★"]})]})]}),e.jsx(d,{value:n.avgRating/5*100,className:"h-2"})]},r))})})]}),e.jsxs(l,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(j,{className:"flex items-center",children:[e.jsx(O,{className:"w-5 h-5 mr-2 text-indigo-600"}),"学習の軌跡"]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"初回学習"}),e.jsx("div",{className:"text-sm text-gray-600",children:i.preStudySessions?.[0]?new Date(i.preStudySessions[0].startTime).toLocaleDateString():"まだ学習していません"})]})]}),e.jsx(g,{variant:"outline",children:"スタート"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:s.totalStudyDays}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"現在の学習日数"}),e.jsx("div",{className:"text-sm text-gray-600",children:"継続的な学習を続けています"})]})]}),e.jsx(g,{variant:"default",children:"継続中"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm font-bold",children:"★"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"理解度向上"}),e.jsx("div",{className:"text-sm text-gray-600",children:s.comprehensionImprovement>0?`${s.comprehensionImprovement.toFixed(1)}ポイント向上`:"安定した理解度を維持"})]})]}),e.jsx(g,{variant:"secondary",children:s.comprehensionImprovement>0?"成長中":"安定"})]})]})})]}),e.jsx(l,{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-0 shadow-lg",children:e.jsxs(c,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-orange-600"}),"次の目標"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"英検1級レベル達成"}),e.jsx(d,{value:s.averageComprehension/5*100,className:"w-32 h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"連続学習30日"}),e.jsx(d,{value:i.currentStreak/30*100,className:"w-32 h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"総学習日100日"}),e.jsx(d,{value:s.totalStudyDays/100*100,className:"w-32 h-2"})]})]})]})})]})})}export{Q as default};
