import{j as e,r as h}from"./ui-CztJLv2w.js";import{D as z}from"./progress-vRgHRdjz.js";import{C as x,B as f}from"./game-C2GAOMMb.js";import{B as U,V as A,a as q,n as G,S as u,A as W,Q as N,U as M,W as R,j as V,Z as L}from"./learning-C_viwsm-.js";import"./vendor-D3F3s8fL.js";const T=[{id:1,word:"meeting",meaning:"会議、打ち合わせ",partOfSpeech:"名詞",phonetic:"/ˈmiːtɪŋ/",rarity:"common",examples:[{sentence:"The meeting will start at 9 AM.",translation:"会議は午前9時に始まります。",situation:"TOEIC Part2 (時間・スケジュール)"}],combinations:[{type:"collocation",expression:"attend a meeting",meaning:"会議に出席する",example:"All employees must attend the meeting.",translation:"全従業員が会議に出席しなければならない。"}],commonUsages:[{pattern:"have/hold a meeting",explanation:"会議を開く",example:"We will hold a meeting tomorrow."}],toeicSpecific:{parts:["Part1","Part2","Part3"],frequency:"very_high",scoreBand:"400-500",synonyms:["conference","assembly"],businessContext:"オフィス環境での基本語彙"}},{id:2,word:"schedule",meaning:"スケジュール、予定表",partOfSpeech:"名詞",phonetic:"/ˈʃedjuːl/",rarity:"common",examples:[{sentence:"Please check the schedule for next week.",translation:"来週のスケジュールを確認してください。",situation:"TOEIC Part2 (スケジュール確認)"}],combinations:[{type:"collocation",expression:"on schedule",meaning:"予定通りに",example:"The project is on schedule.",translation:"プロジェクトは予定通りに進んでいます。"}],commonUsages:[{pattern:"behind/ahead of schedule",explanation:"予定より遅れて/早く",example:"We are ahead of schedule."}],toeicSpecific:{parts:["Part1","Part2","Part3"],frequency:"very_high",scoreBand:"400-500",synonyms:["timetable","agenda"],businessContext:"時間管理の基本語彙"}},{id:3,word:"deadline",meaning:"締切、期限",partOfSpeech:"名詞",phonetic:"/ˈdedlaɪn/",rarity:"common",examples:[{sentence:"The deadline for the report is Friday.",translation:"レポートの締切は金曜日です。",situation:"TOEIC Part2 (期限の確認)"}],combinations:[{type:"collocation",expression:"meet a deadline",meaning:"締切に間に合わせる",example:"We need to meet the deadline.",translation:"締切に間に合わせる必要があります。"}],commonUsages:[{pattern:"extend the deadline",explanation:"締切を延長する",example:"Can we extend the deadline?"}],toeicSpecific:{parts:["Part1","Part2","Part3"],frequency:"very_high",scoreBand:"400-500",synonyms:["due date","cutoff"],businessContext:"プロジェクト管理の基本語彙"}},{id:4,word:"negotiate",meaning:"交渉する、協議する",partOfSpeech:"動詞",phonetic:"/nɪˈɡoʊʃieɪt/",rarity:"uncommon",examples:[{sentence:"We need to negotiate the contract terms.",translation:"契約条件を交渉する必要があります。",situation:"TOEIC Part3 (ビジネス交渉)"}],combinations:[{type:"collocation",expression:"negotiate a deal",meaning:"取引を交渉する",example:"They negotiated a better deal.",translation:"彼らはより良い取引を交渉しました。"}],commonUsages:[{pattern:"negotiate with someone",explanation:"誰かと交渉する",example:"We negotiated with the supplier."}],toeicSpecific:{parts:["Part3","Part4","Part7"],frequency:"high",scoreBand:"500-600",synonyms:["bargain","discuss"],businessContext:"ビジネス交渉の重要語彙"}},{id:5,word:"implement",meaning:"実施する、実行する",partOfSpeech:"動詞",phonetic:"/ˈɪmplɪment/",rarity:"uncommon",examples:[{sentence:"We will implement the new system next month.",translation:"来月新しいシステムを実施します。",situation:"TOEIC Part3 (システム導入)"}],combinations:[{type:"collocation",expression:"implement a plan",meaning:"計画を実行する",example:"The team implemented the marketing plan.",translation:"チームはマーケティング計画を実行しました。"}],commonUsages:[{pattern:"implement changes",explanation:"変更を実施する",example:"We need to implement changes."}],toeicSpecific:{parts:["Part3","Part4","Part7"],frequency:"high",scoreBand:"500-600",synonyms:["execute","carry out"],businessContext:"プロジェクト実行の重要語彙"}},{id:6,word:"acquisition",meaning:"買収、取得",partOfSpeech:"名詞",phonetic:"/ˌækwɪˈzɪʃən/",rarity:"rare",examples:[{sentence:"The acquisition will expand our market share.",translation:"この買収により市場シェアが拡大します。",situation:"TOEIC Part4 (企業買収発表)"}],combinations:[{type:"collocation",expression:"merger and acquisition",meaning:"合併・買収",example:"M&A activities increased this year.",translation:"今年はM&A活動が増加しました。"}],commonUsages:[{pattern:"acquisition of something",explanation:"何かの取得",example:"The acquisition of new technology."}],toeicSpecific:{parts:["Part4","Part7"],frequency:"medium",scoreBand:"600-700",synonyms:["purchase","takeover"],businessContext:"企業戦略の上級語彙"}},{id:7,word:"sustainable",meaning:"持続可能な、継続可能な",partOfSpeech:"形容詞",phonetic:"/səˈsteɪnəbəl/",rarity:"rare",examples:[{sentence:"We need sustainable business practices.",translation:"持続可能なビジネス慣行が必要です。",situation:"TOEIC Part4 (環境・CSR)"}],combinations:[{type:"collocation",expression:"sustainable development",meaning:"持続可能な開発",example:"Sustainable development is our priority.",translation:"持続可能な開発が私たちの優先事項です。"}],commonUsages:[{pattern:"sustainable growth",explanation:"持続可能な成長",example:"We aim for sustainable growth."}],toeicSpecific:{parts:["Part4","Part7"],frequency:"medium",scoreBand:"600-700",synonyms:["viable","enduring"],businessContext:"現代ビジネスの重要概念"}},{id:8,word:"leverage",meaning:"活用する、レバレッジをかける",partOfSpeech:"動詞",phonetic:"/ˈlevərɪdʒ/",rarity:"epic",examples:[{sentence:"We can leverage our technology to gain competitive advantage.",translation:"競争優位を得るために技術を活用できます。",situation:"TOEIC Part7 (戦略的提携)"}],combinations:[{type:"collocation",expression:"leverage resources",meaning:"リソースを活用する",example:"We need to leverage our resources effectively.",translation:"リソースを効果的に活用する必要があります。"}],commonUsages:[{pattern:"leverage something to do",explanation:"何かを活用して〜する",example:"We leverage data to improve services."}],toeicSpecific:{parts:["Part7"],frequency:"low",scoreBand:"700-800",synonyms:["utilize","exploit"],businessContext:"戦略的ビジネス用語"}},{id:9,word:"paradigm",meaning:"パラダイム、思考の枠組み",partOfSpeech:"名詞",phonetic:"/ˈpærədaɪm/",rarity:"legendary",examples:[{sentence:"This represents a paradigm shift in our industry.",translation:"これは私たちの業界におけるパラダイムシフトを表しています。",situation:"TOEIC Part7 (業界変革)"}],combinations:[{type:"collocation",expression:"paradigm shift",meaning:"パラダイムシフト",example:"The digital revolution caused a paradigm shift.",translation:"デジタル革命はパラダイムシフトを引き起こしました。"}],commonUsages:[{pattern:"new paradigm",explanation:"新しいパラダイム",example:"We need a new paradigm for success."}],toeicSpecific:{parts:["Part7"],frequency:"low",scoreBand:"800+",synonyms:["framework","model"],businessContext:"最高級ビジネス概念"}},{id:10,word:"project",meaning:"プロジェクト、計画",partOfSpeech:"名詞",phonetic:"/ˈprɑːdʒekt/",rarity:"common",examples:[{sentence:"The project deadline is next month.",translation:"プロジェクトの締切は来月です。",situation:"TOEIC Part2 (プロジェクト管理)"}],combinations:[{type:"collocation",expression:"work on a project",meaning:"プロジェクトに取り組む",example:"We are working on a new project.",translation:"新しいプロジェクトに取り組んでいます。"}],commonUsages:[{pattern:"project management",explanation:"プロジェクト管理",example:"Project management skills are important."}],toeicSpecific:{parts:["Part1","Part2","Part3"],frequency:"very_high",scoreBand:"400-500",synonyms:["plan","task"],businessContext:"ビジネス基本語彙"}},{id:11,word:"budget",meaning:"予算、経費",partOfSpeech:"名詞",phonetic:"/ˈbʌdʒɪt/",rarity:"common",examples:[{sentence:"We need to stay within budget.",translation:"予算内に収める必要があります。",situation:"TOEIC Part2 (予算管理)"}],combinations:[{type:"collocation",expression:"over budget",meaning:"予算オーバー",example:"The project went over budget.",translation:"プロジェクトは予算オーバーしました。"}],commonUsages:[{pattern:"budget for something",explanation:"何かの予算を組む",example:"We need to budget for training."}],toeicSpecific:{parts:["Part1","Part2","Part3"],frequency:"very_high",scoreBand:"400-500",synonyms:["allocation","funds"],businessContext:"財務管理の基本語彙"}},{id:12,word:"client",meaning:"顧客、クライアント",partOfSpeech:"名詞",phonetic:"/ˈklaɪənt/",rarity:"common",examples:[{sentence:"The client is satisfied with our service.",translation:"顧客は私たちのサービスに満足しています。",situation:"TOEIC Part2 (顧客対応)"}],combinations:[{type:"collocation",expression:"client satisfaction",meaning:"顧客満足度",example:"Client satisfaction is our priority.",translation:"顧客満足度が私たちの優先事項です。"}],commonUsages:[{pattern:"meet with a client",explanation:"顧客と会う",example:"I need to meet with a client today."}],toeicSpecific:{parts:["Part1","Part2","Part3"],frequency:"very_high",scoreBand:"400-500",synonyms:["customer","buyer"],businessContext:"営業・サービス基本語彙"}},{id:13,word:"report",meaning:"報告書、レポート",partOfSpeech:"名詞",phonetic:"/rɪˈpɔːrt/",rarity:"common",examples:[{sentence:"Please submit the report by Friday.",translation:"金曜日までにレポートを提出してください。",situation:"TOEIC Part2 (文書提出)"}],combinations:[{type:"collocation",expression:"write a report",meaning:"レポートを書く",example:"I need to write a monthly report.",translation:"月次レポートを書く必要があります。"}],commonUsages:[{pattern:"annual report",explanation:"年次報告書",example:"The annual report will be published soon."}],toeicSpecific:{parts:["Part1","Part2","Part3"],frequency:"very_high",scoreBand:"400-500",synonyms:["document","summary"],businessContext:"文書管理の基本語彙"}},{id:14,word:"office",meaning:"オフィス、事務所",partOfSpeech:"名詞",phonetic:"/ˈɔːfɪs/",rarity:"common",examples:[{sentence:"The office is located downtown.",translation:"オフィスはダウンタウンにあります。",situation:"TOEIC Part1 (場所の説明)"}],combinations:[{type:"collocation",expression:"office building",meaning:"オフィスビル",example:"The new office building is modern.",translation:"新しいオフィスビルは現代的です。"}],commonUsages:[{pattern:"at the office",explanation:"オフィスで",example:"I work at the office every day."}],toeicSpecific:{parts:["Part1","Part2","Part3"],frequency:"very_high",scoreBand:"400-500",synonyms:["workplace","building"],businessContext:"職場環境の基本語彙"}},{id:15,word:"strategy",meaning:"戦略、方針",partOfSpeech:"名詞",phonetic:"/ˈstrætədʒi/",rarity:"uncommon",examples:[{sentence:"We need a new marketing strategy.",translation:"新しいマーケティング戦略が必要です。",situation:"TOEIC Part3 (戦略会議)"}],combinations:[{type:"collocation",expression:"develop a strategy",meaning:"戦略を立てる",example:"The team developed a winning strategy.",translation:"チームは勝利の戦略を立てました。"}],commonUsages:[{pattern:"business strategy",explanation:"ビジネス戦略",example:"Our business strategy focuses on innovation."}],toeicSpecific:{parts:["Part3","Part4","Part7"],frequency:"high",scoreBand:"500-600",synonyms:["plan","approach"],businessContext:"経営戦略の重要語彙"}},{id:16,word:"evaluate",meaning:"評価する、査定する",partOfSpeech:"動詞",phonetic:"/ɪˈvæljueɪt/",rarity:"uncommon",examples:[{sentence:"We need to evaluate the results.",translation:"結果を評価する必要があります。",situation:"TOEIC Part3 (結果分析)"}],combinations:[{type:"collocation",expression:"evaluate performance",meaning:"業績を評価する",example:"The manager evaluated employee performance.",translation:"マネージャーは従業員の業績を評価しました。"}],commonUsages:[{pattern:"evaluate the situation",explanation:"状況を評価する",example:"Let's evaluate the current situation."}],toeicSpecific:{parts:["Part3","Part4","Part7"],frequency:"high",scoreBand:"500-600",synonyms:["assess","analyze"],businessContext:"分析・評価の重要語彙"}},{id:17,word:"efficient",meaning:"効率的な、能率的な",partOfSpeech:"形容詞",phonetic:"/ɪˈfɪʃənt/",rarity:"uncommon",examples:[{sentence:"We need a more efficient system.",translation:"より効率的なシステムが必要です。",situation:"TOEIC Part3 (システム改善)"}],combinations:[{type:"collocation",expression:"efficient operation",meaning:"効率的な運営",example:"The company focuses on efficient operation.",translation:"会社は効率的な運営に焦点を当てています。"}],commonUsages:[{pattern:"cost-efficient",explanation:"コスト効率の良い",example:"We need cost-efficient solutions."}],toeicSpecific:{parts:["Part3","Part4","Part7"],frequency:"high",scoreBand:"500-600",synonyms:["productive","effective"],businessContext:"効率性の重要語彙"}},{id:18,word:"analyze",meaning:"分析する、検討する",partOfSpeech:"動詞",phonetic:"/ˈænəlaɪz/",rarity:"uncommon",examples:[{sentence:"We need to analyze the market data.",translation:"市場データを分析する必要があります。",situation:"TOEIC Part3 (データ分析)"}],combinations:[{type:"collocation",expression:"analyze trends",meaning:"トレンドを分析する",example:"The team analyzed market trends.",translation:"チームは市場トレンドを分析しました。"}],commonUsages:[{pattern:"analyze the situation",explanation:"状況を分析する",example:"Let's analyze the current situation."}],toeicSpecific:{parts:["Part3","Part4","Part7"],frequency:"high",scoreBand:"500-600",synonyms:["examine","study"],businessContext:"分析業務の重要語彙"}},{id:19,word:"collaborate",meaning:"協力する、共同作業する",partOfSpeech:"動詞",phonetic:"/kəˈlæbəreɪt/",rarity:"uncommon",examples:[{sentence:"We need to collaborate with other departments.",translation:"他の部署と協力する必要があります。",situation:"TOEIC Part3 (部門間協力)"}],combinations:[{type:"collocation",expression:"collaborate on a project",meaning:"プロジェクトで協力する",example:"The teams collaborated on the project.",translation:"チームはプロジェクトで協力しました。"}],commonUsages:[{pattern:"collaborate with someone",explanation:"誰かと協力する",example:"We collaborate with external partners."}],toeicSpecific:{parts:["Part3","Part4","Part7"],frequency:"high",scoreBand:"500-600",synonyms:["cooperate","work together"],businessContext:"チームワークの重要語彙"}},{id:20,word:"innovative",meaning:"革新的な、独創的な",partOfSpeech:"形容詞",phonetic:"/ˈɪnəveɪtɪv/",rarity:"rare",examples:[{sentence:"We need innovative solutions for this problem.",translation:"この問題に対して革新的な解決策が必要です。",situation:"TOEIC Part4 (技術革新)"}],combinations:[{type:"collocation",expression:"innovative approach",meaning:"革新的なアプローチ",example:"The company took an innovative approach.",translation:"会社は革新的なアプローチを取りました。"}],commonUsages:[{pattern:"innovative technology",explanation:"革新的な技術",example:"We develop innovative technology."}],toeicSpecific:{parts:["Part4","Part7"],frequency:"medium",scoreBand:"600-700",synonyms:["creative","original"],businessContext:"技術革新の上級語彙"}},{id:21,word:"comprehensive",meaning:"包括的な、総合的な",partOfSpeech:"形容詞",phonetic:"/ˌkɑːmprɪˈhensɪv/",rarity:"rare",examples:[{sentence:"We need a comprehensive analysis of the market.",translation:"市場の包括的な分析が必要です。",situation:"TOEIC Part7 (市場調査)"}],combinations:[{type:"collocation",expression:"comprehensive report",meaning:"包括的な報告書",example:"The comprehensive report was published.",translation:"包括的な報告書が発表されました。"}],commonUsages:[{pattern:"comprehensive study",explanation:"包括的な研究",example:"We conducted a comprehensive study."}],toeicSpecific:{parts:["Part4","Part7"],frequency:"medium",scoreBand:"600-700",synonyms:["complete","thorough"],businessContext:"分析・調査の上級語彙"}},{id:22,word:"sophisticated",meaning:"洗練された、高度な",partOfSpeech:"形容詞",phonetic:"/səˈfɪstɪkeɪtɪd/",rarity:"rare",examples:[{sentence:"We use sophisticated technology in our products.",translation:"製品に洗練された技術を使用しています。",situation:"TOEIC Part4 (技術説明)"}],combinations:[{type:"collocation",expression:"sophisticated system",meaning:"高度なシステム",example:"The sophisticated system improved efficiency.",translation:"高度なシステムが効率を向上させました。"}],commonUsages:[{pattern:"sophisticated analysis",explanation:"高度な分析",example:"We need sophisticated analysis tools."}],toeicSpecific:{parts:["Part4","Part7"],frequency:"medium",scoreBand:"600-700",synonyms:["advanced","complex"],businessContext:"技術・システムの上級語彙"}},{id:23,word:"substantial",meaning:"相当な、重要な",partOfSpeech:"形容詞",phonetic:"/səbˈstænʃəl/",rarity:"rare",examples:[{sentence:"We made substantial progress this quarter.",translation:"今四半期で相当な進歩を遂げました。",situation:"TOEIC Part4 (業績報告)"}],combinations:[{type:"collocation",expression:"substantial increase",meaning:"大幅な増加",example:"We saw a substantial increase in sales.",translation:"売上で大幅な増加が見られました。"}],commonUsages:[{pattern:"substantial amount",explanation:"相当な量",example:"We invested a substantial amount."}],toeicSpecific:{parts:["Part4","Part7"],frequency:"medium",scoreBand:"600-700",synonyms:["significant","considerable"],businessContext:"数量・程度の上級語彙"}},{id:24,word:"optimize",meaning:"最適化する、効率化する",partOfSpeech:"動詞",phonetic:"/ˈɑːptɪmaɪz/",rarity:"rare",examples:[{sentence:"We need to optimize our production process.",translation:"生産プロセスを最適化する必要があります。",situation:"TOEIC Part4 (生産効率)"}],combinations:[{type:"collocation",expression:"optimize performance",meaning:"性能を最適化する",example:"The team optimized system performance.",translation:"チームはシステムの性能を最適化しました。"}],commonUsages:[{pattern:"optimize efficiency",explanation:"効率を最適化する",example:"We need to optimize efficiency."}],toeicSpecific:{parts:["Part4","Part7"],frequency:"medium",scoreBand:"600-700",synonyms:["improve","enhance"],businessContext:"効率化の上級語彙"}},{id:25,word:"infrastructure",meaning:"インフラ、基盤",partOfSpeech:"名詞",phonetic:"/ˈɪnfrəstrʌktʃər/",rarity:"epic",examples:[{sentence:"We need to upgrade our IT infrastructure.",translation:"ITインフラをアップグレードする必要があります。",situation:"TOEIC Part7 (技術基盤)"}],combinations:[{type:"collocation",expression:"digital infrastructure",meaning:"デジタルインフラ",example:"The company invested in digital infrastructure.",translation:"会社はデジタルインフラに投資しました。"}],commonUsages:[{pattern:"infrastructure development",explanation:"インフラ開発",example:"Infrastructure development is crucial."}],toeicSpecific:{parts:["Part7"],frequency:"low",scoreBand:"700-800",synonyms:["foundation","framework"],businessContext:"技術基盤の専門語彙"}},{id:26,word:"methodology",meaning:"方法論、手法",partOfSpeech:"名詞",phonetic:"/ˌmeθəˈdɑːlədʒi/",rarity:"epic",examples:[{sentence:"We use a proven methodology for project management.",translation:"プロジェクト管理に実証済みの方法論を使用しています。",situation:"TOEIC Part7 (管理手法)"}],combinations:[{type:"collocation",expression:"research methodology",meaning:"研究方法論",example:"The research methodology was sound.",translation:"研究方法論は適切でした。"}],commonUsages:[{pattern:"agile methodology",explanation:"アジャイル手法",example:"We adopted agile methodology."}],toeicSpecific:{parts:["Part7"],frequency:"low",scoreBand:"700-800",synonyms:["approach","technique"],businessContext:"管理手法の専門語彙"}},{id:27,word:"entrepreneurship",meaning:"起業家精神、アントレプレナーシップ",partOfSpeech:"名詞",phonetic:"/ˌɑːntrəprəˈnɜːrʃɪp/",rarity:"legendary",examples:[{sentence:"Entrepreneurship drives innovation in our economy.",translation:"起業家精神が経済の革新を推進しています。",situation:"TOEIC Part7 (経済論)"}],combinations:[{type:"collocation",expression:"social entrepreneurship",meaning:"ソーシャルアントレプレナーシップ",example:"Social entrepreneurship is growing rapidly.",translation:"ソーシャルアントレプレナーシップが急速に成長しています。"}],commonUsages:[{pattern:"entrepreneurship education",explanation:"起業家教育",example:"Entrepreneurship education is important."}],toeicSpecific:{parts:["Part7"],frequency:"low",scoreBand:"800+",synonyms:["innovation","initiative"],businessContext:"最高級ビジネス概念"}},{id:28,word:"sustainability",meaning:"持続可能性、サステナビリティ",partOfSpeech:"名詞",phonetic:"/səˌsteɪnəˈbɪləti/",rarity:"legendary",examples:[{sentence:"Sustainability is a key focus for modern businesses.",translation:"持続可能性は現代企業の重要な焦点です。",situation:"TOEIC Part7 (企業責任)"}],combinations:[{type:"collocation",expression:"environmental sustainability",meaning:"環境持続可能性",example:"Environmental sustainability is our priority.",translation:"環境持続可能性が私たちの優先事項です。"}],commonUsages:[{pattern:"sustainability goals",explanation:"持続可能性目標",example:"We set ambitious sustainability goals."}],toeicSpecific:{parts:["Part7"],frequency:"low",scoreBand:"800+",synonyms:["viability","endurance"],businessContext:"最高級ビジネス概念"}}],k=[{id:"toeic_beginner",name:"TOEIC基礎パック",description:"Part1-2でよく出る基本ビジネス語彙8枚",theme:"part1_2",targetScore:"400-500",cards:[],rarity:"normal",cost:100},{id:"toeic_intermediate",name:"TOEIC中級パック",description:"Part3-4の会話・説明文で頻出する語彙8枚",theme:"part3_4",targetScore:"500-600",cards:[],rarity:"premium",cost:200},{id:"toeic_advanced",name:"TOEIC上級パック",description:"Part5-6の文法・語彙問題で出る難語彙8枚",theme:"part5_6",targetScore:"600-700",cards:[],rarity:"premium",cost:300},{id:"toeic_reading",name:"TOEIC読解パック",description:"Part7の長文読解で重要な語彙8枚",theme:"part7",targetScore:"700-800",cards:[],rarity:"legendary",cost:500},{id:"toeic_mixed",name:"TOEIC総合パック",description:"全パートから厳選した語彙8枚",theme:"mixed",targetScore:"800+",cards:[],rarity:"legendary",cost:800}],b={rare:.15,epic:.04,legendary:.01};class g{static drawRandomCard(){const s=Math.random();let n;s<b.legendary?n="legendary":s<b.legendary+b.epic?n="epic":s<b.legendary+b.epic+b.rare?n="rare":s<.8?n="uncommon":n="common";const r=T.filter(m=>m.rarity===n);if(r.length===0){const m=T.filter(a=>a.rarity==="common");return m[Math.floor(Math.random()*m.length)]}return r[Math.floor(Math.random()*r.length)]}static openPack(s){const n=k.find(a=>a.id===s);if(!n)throw new Error(`Pack with id ${s} not found`);const r=[],m=new Set;for(let a=0;a<8;a++){let c,v=0;const C=100;do{if(c=this.drawRandomCard(),v++,n.theme!=="mixed"){const p=T.filter(P=>P.toeicSpecific.parts.some(y=>n.theme==="part1_2"?["Part1","Part2"].includes(y):n.theme==="part3_4"?["Part3","Part4"].includes(y):n.theme==="part5_6"?["Part5","Part6"].includes(y):n.theme==="part7"?y==="Part7":!0));p.length>0&&(c=p[Math.floor(Math.random()*p.length)])}if(v>=C)break}while(m.has(c.id));r.push(c),m.add(c.id)}return r}static getUserGachaData(){const s=localStorage.getItem("userGachaData");return s?JSON.parse(s):{ownedCards:[],totalPacks:0,dailyPacksUsed:0,lastPackDate:"",collection:{totalCards:0,uniqueCards:0,rarityStats:{}}}}static saveUserGachaData(s){localStorage.setItem("userGachaData",JSON.stringify(s))}static addCardsToCollection(s){const n=this.getUserGachaData(),r=new Date().toDateString();n.lastPackDate!==r&&(n.dailyPacksUsed=0,n.lastPackDate=r),s.forEach(a=>{n.ownedCards.push(a)}),n.collection.totalCards=n.ownedCards.length;const m=new Set(n.ownedCards.map(a=>a.id));n.collection.uniqueCards=m.size,n.collection.rarityStats={},n.ownedCards.forEach(a=>{n.collection.rarityStats[a.rarity]=(n.collection.rarityStats[a.rarity]||0)+1}),this.saveUserGachaData(n)}static openPackAndSave(s){const n=this.openPack(s);this.addCardsToCollection(n);const r=this.getUserGachaData();return r.totalPacks++,r.dailyPacksUsed++,this.saveUserGachaData(r),n}static getAvailablePacks(){return k}static getPackById(s){return k.find(n=>n.id===s)}static canOpenPack(s,n){const r=this.getPackById(s);if(!r)return{canOpen:!1,reason:"パックが見つかりません"};if(n<r.cost)return{canOpen:!1,reason:`XPが不足しています (必要: ${r.cost}, 現在: ${n})`};const m=this.getUserGachaData(),a=new Date().toDateString();return m.lastPackDate===a&&m.dailyPacksUsed>=5?{canOpen:!1,reason:"本日のパック開封回数上限に達しています"}:{canOpen:!0}}static addToVocabularySystem(s){try{z.addGachaWordsToVocabulary(s),console.log("Added gacha cards to vocabulary system:",s)}catch(n){console.error("Error adding gacha cards to vocabulary system:",n)}}}const F=({card:i})=>{const s=a=>({common:{color:"text-gray-600",bgColor:"bg-gray-100",borderColor:"border-gray-300",icon:u,label:"コモン"},uncommon:{color:"text-green-600",bgColor:"bg-green-100",borderColor:"border-green-300",icon:u,label:"アンコモン"},rare:{color:"text-blue-600",bgColor:"bg-blue-100",borderColor:"border-blue-300",icon:u,label:"レア"},epic:{color:"text-purple-600",bgColor:"bg-purple-100",borderColor:"border-purple-300",icon:u,label:"エピック"},legendary:{color:"text-yellow-600",bgColor:"bg-yellow-100",borderColor:"border-yellow-300",icon:u,label:"レジェンダリー"}})[a],n=a=>({"400-500":"bg-red-100 text-red-800","500-600":"bg-orange-100 text-orange-800","600-700":"bg-yellow-100 text-yellow-800","700-800":"bg-green-100 text-green-800","800+":"bg-blue-100 text-blue-800"})[a]||"bg-gray-100 text-gray-800",r=s(i.rarity),m=r.icon;return e.jsxs("div",{className:"space-y-4",children:[e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${r.bgColor}`,children:e.jsx(m,{className:`w-6 h-6 ${r.color}`})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:i.word}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.bgColor} ${r.color}`,children:r.label}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${n(i.toeicSpecific.scoreBand)}`,children:i.toeicSpecific.scoreBand})]})]})]})}),e.jsxs(x,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-blue-600"}),"基本情報"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"意味"}),e.jsx("div",{className:"font-medium",children:i.meaning})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"品詞"}),e.jsx("div",{className:"font-medium",children:i.partOfSpeech})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"発音"}),e.jsxs("div",{className:"font-medium flex items-center gap-1",children:[e.jsx(A,{className:"w-4 h-4"}),i.phonetic]})]})]})]}),e.jsxs(x,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-green-600"}),"例文"]}),e.jsx("div",{className:"space-y-3",children:i.examples.slice(0,2).map((a,c)=>e.jsxs("div",{className:"border-l-2 border-green-200 pl-3",children:[e.jsx("div",{className:"font-medium mb-1",children:a.sentence}),e.jsx("div",{className:"text-gray-600 text-sm mb-1",children:a.translation}),e.jsx("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded inline-block",children:a.situation})]},c))})]}),i.combinations.length>0&&e.jsxs(x,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-purple-600"}),"組み合わせ表現"]}),e.jsx("div",{className:"space-y-3",children:i.combinations.slice(0,2).map((a,c)=>e.jsxs("div",{className:"border rounded p-3",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.type==="idiom"?"bg-orange-100 text-orange-800":a.type==="phrasal_verb"?"bg-blue-100 text-blue-800":a.type==="collocation"?"bg-green-100 text-green-800":a.type==="slang"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:a.type==="idiom"?"イディオム":a.type==="phrasal_verb"?"句動詞":a.type==="collocation"?"コロケーション":a.type==="slang"?"スラング":"フォーマル"})}),e.jsx("div",{className:"font-medium mb-1",children:a.expression}),e.jsx("div",{className:"text-gray-600 text-sm mb-1",children:a.meaning}),e.jsxs("div",{className:"text-xs text-gray-500 italic",children:[a.example," - ",a.translation]})]},c))})]}),i.commonUsages.length>0&&e.jsxs(x,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-yellow-600"}),"よく使われるパターン"]}),e.jsx("div",{className:"space-y-3",children:i.commonUsages.slice(0,1).map((a,c)=>e.jsxs("div",{className:"border rounded p-3",children:[e.jsx("div",{className:"font-medium mb-1 text-blue-600",children:a.pattern}),e.jsx("div",{className:"text-gray-600 text-sm mb-1",children:a.explanation}),e.jsx("div",{className:"text-xs text-gray-500 italic",children:a.example})]},c))})]}),e.jsxs(x,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-3 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-red-600"}),"TOEIC特化情報"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"対象パート"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.toeicSpecific.parts.map((a,c)=>e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs",children:a},c))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"頻出度"}),e.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium inline-block ${i.toeicSpecific.frequency==="very_high"?"bg-red-100 text-red-800":i.toeicSpecific.frequency==="high"?"bg-orange-100 text-orange-800":i.toeicSpecific.frequency==="medium"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:i.toeicSpecific.frequency==="very_high"?"非常に高い":i.toeicSpecific.frequency==="high"?"高い":i.toeicSpecific.frequency==="medium"?"中程度":"低い"})]}),i.toeicSpecific.synonyms.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"類義語"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.toeicSpecific.synonyms.slice(0,2).map((a,c)=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:a},c))})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"ビジネス文脈"}),e.jsx("div",{className:"text-sm",children:i.toeicSpecific.businessContext})]})]})]})]})},Y=({onBack:i,userXP:s,onXPChange:n})=>{const[r,m]=h.useState([]),[a,c]=h.useState(!1),[v,C]=h.useState(null),[p,P]=h.useState(g.getUserGachaData()),[y]=h.useState(g.getAvailablePacks()),[I,E]=h.useState(null),[j,S]=h.useState(!1),[B,O]=h.useState(!1),w=t=>{switch(t){case"common":return{icon:u,color:"text-gray-500",bgColor:"bg-gray-100",borderColor:"border-gray-300"};case"uncommon":return{icon:u,color:"text-green-500",bgColor:"bg-green-100",borderColor:"border-green-300"};case"rare":return{icon:L,color:"text-blue-500",bgColor:"bg-blue-100",borderColor:"border-blue-300"};case"epic":return{icon:V,color:"text-purple-500",bgColor:"bg-purple-100",borderColor:"border-purple-300"};case"legendary":return{icon:R,color:"text-yellow-500",bgColor:"bg-yellow-100",borderColor:"border-yellow-300"};default:return{icon:u,color:"text-gray-500",bgColor:"bg-gray-100",borderColor:"border-gray-300"}}},D=async t=>{const d=g.getPackById(t);if(!d)return;const o=g.canOpenPack(t,s);if(!o.canOpen){alert(o.reason);return}c(!0),C(t),await new Promise(l=>setTimeout(l,2e3));try{const l=g.openPackAndSave(t);m(l),n(s-d.cost),g.addToVocabularySystem(l),P(g.getUserGachaData())}catch(l){console.error("Error opening pack:",l),console.error("Error details:",{packId:t,userXP:s,packCost:d.cost,error:l instanceof Error?l.message:String(l)}),alert(`パックの開封中にエラーが発生しました: ${l instanceof Error?l.message:String(l)}`)}c(!1)},$=t=>{switch(t){case"part1_2":return"🎧";case"part3_4":return"💬";case"part5_6":return"📝";case"part7":return"📖";case"mixed":return"🎯";default:return"📦"}},_=t=>{switch(t){case"400-500":return"bg-green-100 text-green-800";case"500-600":return"bg-blue-100 text-blue-800";case"600-700":return"bg-purple-100 text-purple-800";case"700-800":return"bg-orange-100 text-orange-800";case"800+":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return B&&I?e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>O(!1),className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"戻る"]}),e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(N,{className:"w-6 h-6 text-purple-600"}),"カード詳細"]})]})}),e.jsx(F,{card:I})]}):e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:i,className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"戻る"]}),e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(N,{className:"w-8 h-8 text-purple-600"}),"TOEIC単語ガチャ"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>S(!j),className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),j?"パック選択":"コレクション"]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"所持XP"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s})]})]})]}),e.jsxs(x,{className:"p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"コレクション統計"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"総カード数"}),e.jsx("div",{className:"font-bold",children:p.collection.totalCards})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"ユニークカード"}),e.jsx("div",{className:"font-bold",children:p.collection.uniqueCards})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"開封パック数"}),e.jsx("div",{className:"font-bold",children:p.totalPacks})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"本日開封数"}),e.jsxs("div",{className:"font-bold",children:[p.dailyPacksUsed,"/5"]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:j?"所持カードコレクション":"パックを選択"}),j?e.jsx("div",{children:p.ownedCards.length===0?e.jsxs(x,{className:"text-center py-12",children:[e.jsx(N,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"まだカードを所持していません"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"パックを開封してカードを集めよう！"}),e.jsx(f,{onClick:()=>S(!1),className:"bg-purple-600 hover:bg-purple-700",children:"パックを開封する"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-6 mb-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600",children:p.ownedCards.length}),e.jsx("div",{className:"text-xs text-gray-600",children:"総カード数"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:p.collection.uniqueCards}),e.jsx("div",{className:"text-xs text-gray-600",children:"ユニークカード"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:p.ownedCards.filter(t=>t.rarity==="rare"||t.rarity==="epic"||t.rarity==="legendary").length}),e.jsx("div",{className:"text-xs text-gray-600",children:"レア以上"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-yellow-600",children:p.ownedCards.filter(t=>t.rarity==="legendary").length}),e.jsx("div",{className:"text-xs text-gray-600",children:"レジェンダリー"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>S(!j),className:"text-xs",children:"全て"}),["common","uncommon","rare","epic","legendary"].map(t=>{const d=p.ownedCards.filter(l=>l.rarity===t).length,o=w(t);return e.jsxs(f,{variant:"outline",size:"sm",className:`text-xs ${o.color} border-current`,children:[o.label," (",d,")"]},t)})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:p.ownedCards.map((t,d)=>{const o=w(t.rarity),l=o.icon;return e.jsxs(x,{className:`p-3 text-center transition-all hover:scale-105 hover:shadow-lg cursor-pointer ${o.bgColor} ${o.borderColor} border-2`,onClick:()=>{E(t),O(!0)},children:[e.jsx("div",{className:"flex items-center justify-center mb-2",children:e.jsx(l,{className:`w-4 h-4 ${o.color}`})}),e.jsx("h4",{className:"font-bold text-xs mb-1 line-clamp-1",children:t.word}),e.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:t.meaning}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`inline-block px-1 py-0.5 rounded-full text-xs font-medium ${o.bgColor} ${o.color}`,children:t.rarity.charAt(0).toUpperCase()}),e.jsx("div",{className:"text-xs text-blue-600",children:e.jsx(M,{className:"w-3 h-3"})})]})]},`collection-${t.id}-${d}`)})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(t=>{const d=g.canOpenPack(t.id,s),o=w(t.rarity==="normal"?"common":t.rarity==="premium"?"rare":"legendary").icon;return e.jsxs(x,{className:`p-4 transition-all hover:shadow-lg cursor-pointer ${v===t.id?"ring-2 ring-purple-500":""} ${d.canOpen?"":"opacity-60 cursor-not-allowed"}`,onClick:()=>d.canOpen&&!a&&D(t.id),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:$(t.theme)}),e.jsx(o,{className:"w-5 h-5 text-purple-600"})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${_(t.targetScore)}`,children:t.targetScore})]}),e.jsx("h3",{className:"font-bold text-lg mb-1",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[t.cost," XP"]}),e.jsx("div",{className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d.canOpen&&!a?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-500"}`,children:a&&v===t.id?"開封中...":d.canOpen?"クリックして開封":"開封不可"})]}),!d.canOpen&&e.jsx("div",{className:"text-xs text-red-600 mt-2",children:d.reason})]},t.id)})})]}),r.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"開封結果 - 8枚のカード"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3",children:r.map((t,d)=>{const o=w(t.rarity),l=o.icon;return e.jsxs(x,{className:`p-2 text-center transition-all hover:scale-105 cursor-pointer ${o.bgColor} ${o.borderColor} border-2`,onClick:()=>{E(t),O(!0)},children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(l,{className:`w-4 h-4 ${o.color}`})}),e.jsx("h4",{className:"font-bold text-xs mb-1 line-clamp-1",children:t.word}),e.jsx("p",{className:"text-xs text-gray-600 mb-1 line-clamp-2",children:t.meaning}),e.jsx("div",{className:`inline-block px-1 py-0.5 rounded-full text-xs font-medium ${o.bgColor} ${o.color}`,children:t.rarity.charAt(0).toUpperCase()}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.partOfSpeech}),e.jsx("div",{className:"text-xs text-blue-600 mt-1 font-medium",children:"詳細"})]},`${t.id}-${d}`)})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[r.length,"枚のカードを獲得しました！語彙学習で使用できます。"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"💡 カードをクリックすると詳細情報が見れます"})]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg text-center",children:[e.jsx("div",{className:"animate-spin w-12 h-12 border-4 border-purple-600 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"パックを開封中..."}),e.jsx("p",{className:"text-gray-600",children:"素晴らしいカードが待っています！"})]})})]})};export{Y as GachaSystemComponent};
