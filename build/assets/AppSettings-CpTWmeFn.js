import{r as o,u as V,e as De,j as e,f as Ge,d as E,g as R,h as Kt,i as Xe,k as $t,l as zt,m as Fe,n as Gt,o as Q,A as Xt,p as Qt,q as Qe,s as qt,t as Yt,v as Zt,w as Jt,x as en,F as tn,D as nn,y as sn,z as on}from"./ui-C48fKjuK.js";import{h as rn,B as pe,C as ae,c as ve,f as Se,g as Me,a as le}from"./game-DhYA9e1X.js";import{p as U,q as qe,r as an,s as ln,j as Ae,a as cn,D as We,t as dn,v as Ke,d as un,I as pn,w as mn,x as $e,h as hn}from"./learning-CJqkZPhv.js";import{notificationManager as te}from"./notificationManager-DRqVOwDk.js";import{D as ce}from"./progress-Bh7B1qMw.js";import"./vendor-D3F3s8fL.js";function Ye(n){const s=o.useRef({value:n,previous:n});return o.useMemo(()=>(s.current.value!==n&&(s.current.previous=s.current.value,s.current.value=n),s.current.previous),[n])}var Ce="Switch",[fn,as]=Ge(Ce),[xn,gn]=fn(Ce),Ze=o.forwardRef((n,s)=>{const{__scopeSwitch:t,name:r,checked:a,defaultChecked:d,required:l,disabled:c,value:i="on",onCheckedChange:m,form:g,...w}=n,[C,j]=o.useState(null),y=V(s,v=>j(v)),u=o.useRef(!1),f=C?g||!!C.closest("form"):!0,[S,h]=De({prop:a,defaultProp:d??!1,onChange:m,caller:Ce});return e.jsxs(xn,{scope:t,checked:S,disabled:c,children:[e.jsx(E.button,{type:"button",role:"switch","aria-checked":S,"aria-required":l,"data-state":nt(S),"data-disabled":c?"":void 0,disabled:c,value:i,...w,ref:y,onClick:R(n.onClick,v=>{h(H=>!H),f&&(u.current=v.isPropagationStopped(),u.current||v.stopPropagation())})}),f&&e.jsx(tt,{control:C,bubbles:!u.current,name:r,value:i,checked:S,required:l,disabled:c,form:g,style:{transform:"translateX(-100%)"}})]})});Ze.displayName=Ce;var Je="SwitchThumb",et=o.forwardRef((n,s)=>{const{__scopeSwitch:t,...r}=n,a=gn(Je,t);return e.jsx(E.span,{"data-state":nt(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:s})});et.displayName=Je;var vn="SwitchBubbleInput",tt=o.forwardRef(({__scopeSwitch:n,control:s,checked:t,bubbles:r=!0,...a},d)=>{const l=o.useRef(null),c=V(l,d),i=Ye(t),m=Kt(s);return o.useEffect(()=>{const g=l.current;if(!g)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set;if(i!==t&&j){const y=new Event("click",{bubbles:r});j.call(g,t),g.dispatchEvent(y)}},[i,t,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...a,tabIndex:-1,ref:c,style:{...a.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});tt.displayName=vn;function nt(n){return n?"checked":"unchecked"}var st=Ze,Sn=et;const ie=o.forwardRef(({className:n,...s},t)=>e.jsx(st,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...s,ref:t,children:e.jsx(Sn,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ie.displayName=st.displayName;var wn="Label",ot=o.forwardRef((n,s)=>e.jsx(E.label,{...n,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));ot.displayName=wn;var rt=ot;const yn=rn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ne=o.forwardRef(({className:n,...s},t)=>e.jsx(rt,{ref:t,className:U(yn(),n),...s}));ne.displayName=rt.displayName;function ze(n,[s,t]){return Math.min(t,Math.max(s,n))}var at=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jn="VisuallyHidden",Cn=o.forwardRef((n,s)=>e.jsx(E.span,{...n,ref:s,style:{...at,...n.style}}));Cn.displayName=jn;var bn=[" ","Enter","ArrowUp","ArrowDown"],Nn=[" ","Enter"],se="Select",[be,Ne,In]=Gt(se),[de,ls]=Ge(se,[In,Xe]),Ie=Xe(),[Tn,q]=de(se),[Pn,Rn]=de(se),lt=n=>{const{__scopeSelect:s,children:t,open:r,defaultOpen:a,onOpenChange:d,value:l,defaultValue:c,onValueChange:i,dir:m,name:g,autoComplete:w,disabled:C,required:j,form:y}=n,u=Ie(s),[f,S]=o.useState(null),[h,v]=o.useState(null),[H,_]=o.useState(!1),Z=$t(m),[k,B]=De({prop:r,defaultProp:a??!1,onChange:d,caller:se}),[p,M]=De({prop:l,defaultProp:c,onChange:i,caller:se}),A=o.useRef(null),D=f?y||!!f.closest("form"):!0,[G,K]=o.useState(new Set),$=Array.from(G).map(O=>O.props.value).join(";");return e.jsx(zt,{...u,children:e.jsxs(Tn,{required:j,scope:s,trigger:f,onTriggerChange:S,valueNode:h,onValueNodeChange:v,valueNodeHasChildren:H,onValueNodeHasChildrenChange:_,contentId:Fe(),value:p,onValueChange:M,open:k,onOpenChange:B,dir:Z,triggerPointerDownPosRef:A,disabled:C,children:[e.jsx(be.Provider,{scope:s,children:e.jsx(Pn,{scope:n.__scopeSelect,onNativeOptionAdd:o.useCallback(O=>{K(W=>new Set(W).add(O))},[]),onNativeOptionRemove:o.useCallback(O=>{K(W=>{const z=new Set(W);return z.delete(O),z})},[]),children:t})}),D?e.jsxs(_t,{"aria-hidden":!0,required:j,tabIndex:-1,name:g,autoComplete:w,value:p,onChange:O=>M(O.target.value),disabled:C,form:y,children:[p===void 0?e.jsx("option",{value:""}):null,Array.from(G)]},$):null]})})};lt.displayName=se;var ct="SelectTrigger",it=o.forwardRef((n,s)=>{const{__scopeSelect:t,disabled:r=!1,...a}=n,d=Ie(t),l=q(ct,t),c=l.disabled||r,i=V(s,l.onTriggerChange),m=Ne(t),g=o.useRef("touch"),[w,C,j]=Mt(u=>{const f=m().filter(v=>!v.disabled),S=f.find(v=>v.value===l.value),h=At(f,u,S);h!==void 0&&l.onValueChange(h.value)}),y=u=>{c||(l.onOpenChange(!0),j()),u&&(l.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return e.jsx(Xt,{asChild:!0,...d,children:e.jsx(E.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":kt(l.value)?"":void 0,...a,ref:i,onClick:R(a.onClick,u=>{u.currentTarget.focus(),g.current!=="mouse"&&y(u)}),onPointerDown:R(a.onPointerDown,u=>{g.current=u.pointerType;const f=u.target;f.hasPointerCapture(u.pointerId)&&f.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(y(u),u.preventDefault())}),onKeyDown:R(a.onKeyDown,u=>{const f=w.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&C(u.key),!(f&&u.key===" ")&&bn.includes(u.key)&&(y(),u.preventDefault())})})})});it.displayName=ct;var dt="SelectValue",ut=o.forwardRef((n,s)=>{const{__scopeSelect:t,className:r,style:a,children:d,placeholder:l="",...c}=n,i=q(dt,t),{onValueNodeHasChildrenChange:m}=i,g=d!==void 0,w=V(s,i.onValueNodeChange);return Q(()=>{m(g)},[m,g]),e.jsx(E.span,{...c,ref:w,style:{pointerEvents:"none"},children:kt(i.value)?e.jsx(e.Fragment,{children:l}):d})});ut.displayName=dt;var En="SelectIcon",pt=o.forwardRef((n,s)=>{const{__scopeSelect:t,children:r,...a}=n;return e.jsx(E.span,{"aria-hidden":!0,...a,ref:s,children:r||"▼"})});pt.displayName=En;var _n="SelectPortal",mt=n=>e.jsx(Qt,{asChild:!0,...n});mt.displayName=_n;var oe="SelectContent",ht=o.forwardRef((n,s)=>{const t=q(oe,n.__scopeSelect),[r,a]=o.useState();if(Q(()=>{a(new DocumentFragment)},[]),!t.open){const d=r;return d?Qe.createPortal(e.jsx(ft,{scope:n.__scopeSelect,children:e.jsx(be.Slot,{scope:n.__scopeSelect,children:e.jsx("div",{children:n.children})})}),d):null}return e.jsx(xt,{...n,ref:s})});ht.displayName=oe;var F=10,[ft,Y]=de(oe),kn="SelectContentImpl",Mn=en("SelectContent.RemoveScroll"),xt=o.forwardRef((n,s)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:d,onPointerDownOutside:l,side:c,sideOffset:i,align:m,alignOffset:g,arrowPadding:w,collisionBoundary:C,collisionPadding:j,sticky:y,hideWhenDetached:u,avoidCollisions:f,...S}=n,h=q(oe,t),[v,H]=o.useState(null),[_,Z]=o.useState(null),k=V(s,x=>H(x)),[B,p]=o.useState(null),[M,A]=o.useState(null),D=Ne(t),[G,K]=o.useState(!1),$=o.useRef(!1);o.useEffect(()=>{if(v)return Yt(v)},[v]),Zt();const O=o.useCallback(x=>{const[T,...L]=D().map(P=>P.ref.current),[b]=L.slice(-1),N=document.activeElement;for(const P of x)if(P===N||(P?.scrollIntoView({block:"nearest"}),P===T&&_&&(_.scrollTop=0),P===b&&_&&(_.scrollTop=_.scrollHeight),P?.focus(),document.activeElement!==N))return},[D,_]),W=o.useCallback(()=>O([B,v]),[O,B,v]);o.useEffect(()=>{G&&W()},[G,W]);const{onOpenChange:z,triggerPointerDownPosRef:X}=h;o.useEffect(()=>{if(v){let x={x:0,y:0};const T=b=>{x={x:Math.abs(Math.round(b.pageX)-(X.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(X.current?.y??0))}},L=b=>{x.x<=10&&x.y<=10?b.preventDefault():v.contains(b.target)||z(!1),document.removeEventListener("pointermove",T),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",L,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",L,{capture:!0})}}},[v,z,X]),o.useEffect(()=>{const x=()=>z(!1);return window.addEventListener("blur",x),window.addEventListener("resize",x),()=>{window.removeEventListener("blur",x),window.removeEventListener("resize",x)}},[z]);const[Te,xe]=Mt(x=>{const T=D().filter(N=>!N.disabled),L=T.find(N=>N.ref.current===document.activeElement),b=At(T,x,L);b&&setTimeout(()=>b.ref.current.focus())}),Pe=o.useCallback((x,T,L)=>{const b=!$.current&&!L;(h.value!==void 0&&h.value===T||b)&&(p(x),b&&($.current=!0))},[h.value]),Re=o.useCallback(()=>v?.focus(),[v]),re=o.useCallback((x,T,L)=>{const b=!$.current&&!L;(h.value!==void 0&&h.value===T||b)&&A(x)},[h.value]),ge=r==="popper"?Oe:gt,ue=ge===Oe?{side:c,sideOffset:i,align:m,alignOffset:g,arrowPadding:w,collisionBoundary:C,collisionPadding:j,sticky:y,hideWhenDetached:u,avoidCollisions:f}:{};return e.jsx(ft,{scope:t,content:v,viewport:_,onViewportChange:Z,itemRefCallback:Pe,selectedItem:B,onItemLeave:Re,itemTextRefCallback:re,focusSelectedItem:W,selectedItemText:M,position:r,isPositioned:G,searchRef:Te,children:e.jsx(Jt,{as:Mn,allowPinchZoom:!0,children:e.jsx(tn,{asChild:!0,trapped:h.open,onMountAutoFocus:x=>{x.preventDefault()},onUnmountAutoFocus:R(a,x=>{h.trigger?.focus({preventScroll:!0}),x.preventDefault()}),children:e.jsx(nn,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:l,onFocusOutside:x=>x.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:e.jsx(ge,{role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:x=>x.preventDefault(),...S,...ue,onPlaced:()=>K(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:R(S.onKeyDown,x=>{const T=x.ctrlKey||x.altKey||x.metaKey;if(x.key==="Tab"&&x.preventDefault(),!T&&x.key.length===1&&xe(x.key),["ArrowUp","ArrowDown","Home","End"].includes(x.key)){let b=D().filter(N=>!N.disabled).map(N=>N.ref.current);if(["ArrowUp","End"].includes(x.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(x.key)){const N=x.target,P=b.indexOf(N);b=b.slice(P+1)}setTimeout(()=>O(b)),x.preventDefault()}})})})})})})});xt.displayName=kn;var An="SelectItemAlignedPosition",gt=o.forwardRef((n,s)=>{const{__scopeSelect:t,onPlaced:r,...a}=n,d=q(oe,t),l=Y(oe,t),[c,i]=o.useState(null),[m,g]=o.useState(null),w=V(s,k=>g(k)),C=Ne(t),j=o.useRef(!1),y=o.useRef(!0),{viewport:u,selectedItem:f,selectedItemText:S,focusSelectedItem:h}=l,v=o.useCallback(()=>{if(d.trigger&&d.valueNode&&c&&m&&u&&f&&S){const k=d.trigger.getBoundingClientRect(),B=m.getBoundingClientRect(),p=d.valueNode.getBoundingClientRect(),M=S.getBoundingClientRect();if(d.dir!=="rtl"){const N=M.left-B.left,P=p.left-N,J=k.left-P,ee=k.width+J,Ee=Math.max(ee,B.width),_e=window.innerWidth-F,ke=ze(P,[F,Math.max(F,_e-Ee)]);c.style.minWidth=ee+"px",c.style.left=ke+"px"}else{const N=B.right-M.right,P=window.innerWidth-p.right-N,J=window.innerWidth-k.right-P,ee=k.width+J,Ee=Math.max(ee,B.width),_e=window.innerWidth-F,ke=ze(P,[F,Math.max(F,_e-Ee)]);c.style.minWidth=ee+"px",c.style.right=ke+"px"}const A=C(),D=window.innerHeight-F*2,G=u.scrollHeight,K=window.getComputedStyle(m),$=parseInt(K.borderTopWidth,10),O=parseInt(K.paddingTop,10),W=parseInt(K.borderBottomWidth,10),z=parseInt(K.paddingBottom,10),X=$+O+G+z+W,Te=Math.min(f.offsetHeight*5,X),xe=window.getComputedStyle(u),Pe=parseInt(xe.paddingTop,10),Re=parseInt(xe.paddingBottom,10),re=k.top+k.height/2-F,ge=D-re,ue=f.offsetHeight/2,x=f.offsetTop+ue,T=$+O+x,L=X-T;if(T<=re){const N=A.length>0&&f===A[A.length-1].ref.current;c.style.bottom="0px";const P=m.clientHeight-u.offsetTop-u.offsetHeight,J=Math.max(ge,ue+(N?Re:0)+P+W),ee=T+J;c.style.height=ee+"px"}else{const N=A.length>0&&f===A[0].ref.current;c.style.top="0px";const J=Math.max(re,$+u.offsetTop+(N?Pe:0)+ue)+L;c.style.height=J+"px",u.scrollTop=T-re+u.offsetTop}c.style.margin=`${F}px 0`,c.style.minHeight=Te+"px",c.style.maxHeight=D+"px",r?.(),requestAnimationFrame(()=>j.current=!0)}},[C,d.trigger,d.valueNode,c,m,u,f,S,d.dir,r]);Q(()=>v(),[v]);const[H,_]=o.useState();Q(()=>{m&&_(window.getComputedStyle(m).zIndex)},[m]);const Z=o.useCallback(k=>{k&&y.current===!0&&(v(),h?.(),y.current=!1)},[v,h]);return e.jsx(On,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:j,onScrollButtonChange:Z,children:e.jsx("div",{ref:i,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:H},children:e.jsx(E.div,{...a,ref:w,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});gt.displayName=An;var Dn="SelectPopperPosition",Oe=o.forwardRef((n,s)=>{const{__scopeSelect:t,align:r="start",collisionPadding:a=F,...d}=n,l=Ie(t);return e.jsx(sn,{...l,...d,ref:s,align:r,collisionPadding:a,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Oe.displayName=Dn;var[On,Ue]=de(oe,{}),Le="SelectViewport",vt=o.forwardRef((n,s)=>{const{__scopeSelect:t,nonce:r,...a}=n,d=Y(Le,t),l=Ue(Le,t),c=V(s,d.onViewportChange),i=o.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(be.Slot,{scope:t,children:e.jsx(E.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:R(a.onScroll,m=>{const g=m.currentTarget,{contentWrapper:w,shouldExpandOnScrollRef:C}=l;if(C?.current&&w){const j=Math.abs(i.current-g.scrollTop);if(j>0){const y=window.innerHeight-F*2,u=parseFloat(w.style.minHeight),f=parseFloat(w.style.height),S=Math.max(u,f);if(S<y){const h=S+j,v=Math.min(y,h),H=h-v;w.style.height=v+"px",w.style.bottom==="0px"&&(g.scrollTop=H>0?H:0,w.style.justifyContent="flex-end")}}}i.current=g.scrollTop})})})]})});vt.displayName=Le;var St="SelectGroup",[Ln,Bn]=de(St),Vn=o.forwardRef((n,s)=>{const{__scopeSelect:t,...r}=n,a=Fe();return e.jsx(Ln,{scope:t,id:a,children:e.jsx(E.div,{role:"group","aria-labelledby":a,...r,ref:s})})});Vn.displayName=St;var wt="SelectLabel",yt=o.forwardRef((n,s)=>{const{__scopeSelect:t,...r}=n,a=Bn(wt,t);return e.jsx(E.div,{id:a.id,...r,ref:s})});yt.displayName=wt;var je="SelectItem",[Hn,jt]=de(je),Ct=o.forwardRef((n,s)=>{const{__scopeSelect:t,value:r,disabled:a=!1,textValue:d,...l}=n,c=q(je,t),i=Y(je,t),m=c.value===r,[g,w]=o.useState(d??""),[C,j]=o.useState(!1),y=V(s,h=>i.itemRefCallback?.(h,r,a)),u=Fe(),f=o.useRef("touch"),S=()=>{a||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Hn,{scope:t,value:r,disabled:a,textId:u,isSelected:m,onItemTextChange:o.useCallback(h=>{w(v=>v||(h?.textContent??"").trim())},[]),children:e.jsx(be.ItemSlot,{scope:t,value:r,disabled:a,textValue:g,children:e.jsx(E.div,{role:"option","aria-labelledby":u,"data-highlighted":C?"":void 0,"aria-selected":m&&C,"data-state":m?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...l,ref:y,onFocus:R(l.onFocus,()=>j(!0)),onBlur:R(l.onBlur,()=>j(!1)),onClick:R(l.onClick,()=>{f.current!=="mouse"&&S()}),onPointerUp:R(l.onPointerUp,()=>{f.current==="mouse"&&S()}),onPointerDown:R(l.onPointerDown,h=>{f.current=h.pointerType}),onPointerMove:R(l.onPointerMove,h=>{f.current=h.pointerType,a?i.onItemLeave?.():f.current==="mouse"&&h.currentTarget.focus({preventScroll:!0})}),onPointerLeave:R(l.onPointerLeave,h=>{h.currentTarget===document.activeElement&&i.onItemLeave?.()}),onKeyDown:R(l.onKeyDown,h=>{i.searchRef?.current!==""&&h.key===" "||(Nn.includes(h.key)&&S(),h.key===" "&&h.preventDefault())})})})})});Ct.displayName=je;var me="SelectItemText",bt=o.forwardRef((n,s)=>{const{__scopeSelect:t,className:r,style:a,...d}=n,l=q(me,t),c=Y(me,t),i=jt(me,t),m=Rn(me,t),[g,w]=o.useState(null),C=V(s,S=>w(S),i.onItemTextChange,S=>c.itemTextRefCallback?.(S,i.value,i.disabled)),j=g?.textContent,y=o.useMemo(()=>e.jsx("option",{value:i.value,disabled:i.disabled,children:j},i.value),[i.disabled,i.value,j]),{onNativeOptionAdd:u,onNativeOptionRemove:f}=m;return Q(()=>(u(y),()=>f(y)),[u,f,y]),e.jsxs(e.Fragment,{children:[e.jsx(E.span,{id:i.textId,...d,ref:C}),i.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Qe.createPortal(d.children,l.valueNode):null]})});bt.displayName=me;var Nt="SelectItemIndicator",It=o.forwardRef((n,s)=>{const{__scopeSelect:t,...r}=n;return jt(Nt,t).isSelected?e.jsx(E.span,{"aria-hidden":!0,...r,ref:s}):null});It.displayName=Nt;var Be="SelectScrollUpButton",Tt=o.forwardRef((n,s)=>{const t=Y(Be,n.__scopeSelect),r=Ue(Be,n.__scopeSelect),[a,d]=o.useState(!1),l=V(s,r.onScrollButtonChange);return Q(()=>{if(t.viewport&&t.isPositioned){let c=function(){const m=i.scrollTop>0;d(m)};const i=t.viewport;return c(),i.addEventListener("scroll",c),()=>i.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),a?e.jsx(Rt,{...n,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:i}=t;c&&i&&(c.scrollTop=c.scrollTop-i.offsetHeight)}}):null});Tt.displayName=Be;var Ve="SelectScrollDownButton",Pt=o.forwardRef((n,s)=>{const t=Y(Ve,n.__scopeSelect),r=Ue(Ve,n.__scopeSelect),[a,d]=o.useState(!1),l=V(s,r.onScrollButtonChange);return Q(()=>{if(t.viewport&&t.isPositioned){let c=function(){const m=i.scrollHeight-i.clientHeight,g=Math.ceil(i.scrollTop)<m;d(g)};const i=t.viewport;return c(),i.addEventListener("scroll",c),()=>i.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),a?e.jsx(Rt,{...n,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:i}=t;c&&i&&(c.scrollTop=c.scrollTop+i.offsetHeight)}}):null});Pt.displayName=Ve;var Rt=o.forwardRef((n,s)=>{const{__scopeSelect:t,onAutoScroll:r,...a}=n,d=Y("SelectScrollButton",t),l=o.useRef(null),c=Ne(t),i=o.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return o.useEffect(()=>()=>i(),[i]),Q(()=>{c().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),e.jsx(E.div,{"aria-hidden":!0,...a,ref:s,style:{flexShrink:0,...a.style},onPointerDown:R(a.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:R(a.onPointerMove,()=>{d.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:R(a.onPointerLeave,()=>{i()})})}),Fn="SelectSeparator",Et=o.forwardRef((n,s)=>{const{__scopeSelect:t,...r}=n;return e.jsx(E.div,{"aria-hidden":!0,...r,ref:s})});Et.displayName=Fn;var He="SelectArrow",Un=o.forwardRef((n,s)=>{const{__scopeSelect:t,...r}=n,a=Ie(t),d=q(He,t),l=Y(He,t);return d.open&&l.position==="popper"?e.jsx(on,{...a,...r,ref:s}):null});Un.displayName=He;var Wn="SelectBubbleInput",_t=o.forwardRef(({__scopeSelect:n,value:s,...t},r)=>{const a=o.useRef(null),d=V(r,a),l=Ye(s);return o.useEffect(()=>{const c=a.current;if(!c)return;const i=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(i,"value").set;if(l!==s&&g){const w=new Event("change",{bubbles:!0});g.call(c,s),c.dispatchEvent(w)}},[l,s]),e.jsx(E.select,{...t,style:{...at,...t.style},ref:d,defaultValue:s})});_t.displayName=Wn;function kt(n){return n===""||n===void 0}function Mt(n){const s=qt(n),t=o.useRef(""),r=o.useRef(0),a=o.useCallback(l=>{const c=t.current+l;s(c),(function i(m){t.current=m,window.clearTimeout(r.current),m!==""&&(r.current=window.setTimeout(()=>i(""),1e3))})(c)},[s]),d=o.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return o.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,a,d]}function At(n,s,t){const a=s.length>1&&Array.from(s).every(m=>m===s[0])?s[0]:s,d=t?n.indexOf(t):-1;let l=Kn(n,Math.max(d,0));a.length===1&&(l=l.filter(m=>m!==t));const i=l.find(m=>m.textValue.toLowerCase().startsWith(a.toLowerCase()));return i!==t?i:void 0}function Kn(n,s){return n.map((t,r)=>n[(s+r)%n.length])}var $n=lt,Dt=it,zn=ut,Gn=pt,Xn=mt,Ot=ht,Qn=vt,Lt=yt,Bt=Ct,qn=bt,Yn=It,Vt=Tt,Ht=Pt,Ft=Et;const we=$n,ye=zn,he=o.forwardRef(({className:n,children:s,...t},r)=>e.jsxs(Dt,{ref:r,className:U("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...t,children:[s,e.jsx(Gn,{asChild:!0,children:e.jsx(qe,{className:"h-4 w-4 opacity-50"})})]}));he.displayName=Dt.displayName;const Ut=o.forwardRef(({className:n,...s},t)=>e.jsx(Vt,{ref:t,className:U("flex cursor-default items-center justify-center py-1",n),...s,children:e.jsx(ln,{className:"h-4 w-4"})}));Ut.displayName=Vt.displayName;const Wt=o.forwardRef(({className:n,...s},t)=>e.jsx(Ht,{ref:t,className:U("flex cursor-default items-center justify-center py-1",n),...s,children:e.jsx(qe,{className:"h-4 w-4"})}));Wt.displayName=Ht.displayName;const fe=o.forwardRef(({className:n,children:s,position:t="popper",...r},a)=>e.jsx(Xn,{children:e.jsxs(Ot,{ref:a,className:U("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[e.jsx(Ut,{}),e.jsx(Qn,{className:U("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Wt,{})]})}));fe.displayName=Ot.displayName;const Zn=o.forwardRef(({className:n,...s},t)=>e.jsx(Lt,{ref:t,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",n),...s}));Zn.displayName=Lt.displayName;const I=o.forwardRef(({className:n,children:s,...t},r)=>e.jsxs(Bt,{ref:r,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Yn,{children:e.jsx(an,{className:"h-4 w-4"})})}),e.jsx(qn,{children:s})]}));I.displayName=Bt.displayName;const Jn=o.forwardRef(({className:n,...s},t)=>e.jsx(Ft,{ref:t,className:U("-mx-1 my-1 h-px bg-muted",n),...s}));Jn.displayName=Ft.displayName;function cs({onBack:n}){const[s,t]=o.useState({dailyXPGoal:100,grammarQuizQuestionCount:10,vocabularyQuestionCount:10,essayQuestionCount:10}),[r,a]=o.useState(te.getSettings()),[d,l]=o.useState(te.getPermissionStatus()),[c,i]=o.useState(!1),[m,g]=o.useState(!1),[w,C]=o.useState(Ae.getEnabled());o.useEffect(()=>{j(),i(te.isSupported()),l(te.getPermissionStatus())},[]);const j=()=>{const p=ce.getAppSettings();t(p)},y=p=>{const M={...s,...p};t(M),ce.saveAppSettings(M)},u=(p,M)=>{y({[p]:M})},f=(p,M)=>{const A={...r,[p]:M};a(A),te.updateSettings(A)},S=p=>{C(p),Ae.setEnabled(p),p&&Ae.sounds.click()},h=async()=>{try{const p=await te.requestPermission();l(p)}catch(p){console.error("Error requesting permission:",p),alert("通知の許可を取得できませんでした。ブラウザの設定を確認してください。")}},v=async()=>{if(d!=="granted"){alert("通知の許可が必要です。");return}g(!0);try{await te.testNotification()}catch(p){console.error("Error showing test notification:",p),alert("テスト通知の表示に失敗しました。")}finally{g(!1)}},_=(()=>{switch(d){case"granted":return{text:"許可済み",color:"text-green-600",icon:hn};case"denied":return{text:"拒否済み",color:"text-red-600",icon:$e};default:return{text:"未設定",color:"text-yellow-600",icon:Ke}}})(),Z=_.icon,k=()=>{confirm("すべての学習データを削除しますか？この操作は取り消せません。")&&confirm("本当に削除しますか？")&&(localStorage.clear(),window.location.reload())},B=()=>{try{const p={userStats:ce.getUserStats(),learningHistory:ce.getLearningHistory(),achievements:ce.getAchievements(),vocabularyProgress:ce.getVocabularyProgress(),appSettings:s,notificationSettings:r,exportDate:new Date().toISOString()},M=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),A=URL.createObjectURL(M),D=document.createElement("a");D.href=A,D.download=`entp-english-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(A)}catch(p){console.error("Error exporting data:",p),alert("データのエクスポートに失敗しました。")}};return e.jsx("div",{className:"min-h-screen p-4 flex flex-col justify-center",children:e.jsxs("div",{className:"max-w-md mx-auto w-full space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(pe,{variant:"ghost",onClick:n,className:"p-2",children:"←"}),e.jsx("h1",{className:"text-2xl font-bold",children:"アプリ設定"}),e.jsx("div",{className:"w-10"})]}),e.jsxs(ae,{children:[e.jsxs(ve,{children:[e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(cn,{className:"w-5 h-5"}),"学習設定"]}),e.jsx(Me,{children:"学習目標をカスタマイズできます"})]}),e.jsxs(le,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"1日のXP目標"}),e.jsxs(we,{value:s.dailyXPGoal.toString(),onValueChange:p=>u("dailyXPGoal",parseInt(p)),children:[e.jsx(he,{children:e.jsx(ye,{})}),e.jsxs(fe,{children:[e.jsx(I,{value:"50",children:"50 XP"}),e.jsx(I,{value:"100",children:"100 XP"}),e.jsx(I,{value:"150",children:"150 XP"}),e.jsx(I,{value:"200",children:"200 XP"}),e.jsx(I,{value:"300",children:"300 XP"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"ホーム画面の進捗バーに反映されます"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"文法クイズの問題数"}),e.jsxs(we,{value:s.grammarQuizQuestionCount.toString(),onValueChange:p=>u("grammarQuizQuestionCount",parseInt(p)),children:[e.jsx(he,{children:e.jsx(ye,{})}),e.jsxs(fe,{children:[e.jsx(I,{value:"5",children:"5問"}),e.jsx(I,{value:"10",children:"10問"}),e.jsx(I,{value:"15",children:"15問"}),e.jsx(I,{value:"20",children:"20問"}),e.jsx(I,{value:"25",children:"25問"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"文法クイズで出題される問題数を設定します"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"語彙学習の問題数"}),e.jsxs(we,{value:s.vocabularyQuestionCount.toString(),onValueChange:p=>u("vocabularyQuestionCount",parseInt(p)),children:[e.jsx(he,{children:e.jsx(ye,{})}),e.jsxs(fe,{children:[e.jsx(I,{value:"5",children:"5問"}),e.jsx(I,{value:"10",children:"10問"}),e.jsx(I,{value:"15",children:"15問"}),e.jsx(I,{value:"20",children:"20問"}),e.jsx(I,{value:"25",children:"25問"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"語彙学習で出題される問題数を設定します"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"英作文の問題数"}),e.jsxs(we,{value:s.essayQuestionCount.toString(),onValueChange:p=>u("essayQuestionCount",parseInt(p)),children:[e.jsx(he,{children:e.jsx(ye,{})}),e.jsxs(fe,{children:[e.jsx(I,{value:"5",children:"5問"}),e.jsx(I,{value:"10",children:"10問"}),e.jsx(I,{value:"15",children:"15問"}),e.jsx(I,{value:"20",children:"20問"}),e.jsx(I,{value:"25",children:"25問"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"英作文で出題される問題数を設定します"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ne,{htmlFor:"sound-enabled",children:"効果音を有効にする"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"操作時の効果音を有効/無効にします"})]}),e.jsx(ie,{id:"sound-enabled",checked:w,onCheckedChange:S})]})]})]}),e.jsxs(ae,{children:[e.jsxs(ve,{children:[e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"データ管理"]}),e.jsx(Me,{children:"学習データのバックアップと管理"})]}),e.jsxs(le,{className:"space-y-4",children:[e.jsxs(pe,{onClick:B,variant:"outline",className:"w-full",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"データをエクスポート"]}),e.jsxs(pe,{onClick:k,variant:"destructive",className:"w-full",children:[e.jsx(dn,{className:"w-4 h-4 mr-2"}),"すべてのデータを削除"]})]})]}),c?e.jsxs(e.Fragment,{children:[e.jsxs(ae,{children:[e.jsx(ve,{children:e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"通知の許可状況"]})}),e.jsxs(le,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:`w-5 h-5 ${_.color}`}),e.jsx("span",{className:_.color,children:_.text})]}),d!=="granted"&&e.jsx(pe,{onClick:h,size:"sm",children:"許可をリクエスト"})]}),d==="denied"&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:"通知が拒否されています。ブラウザの設定から許可してください。"})]})]}),e.jsxs(ae,{children:[e.jsxs(ve,{children:[e.jsx(Se,{children:"通知設定"}),e.jsx(Me,{children:"学習のリマインダーや実績通知を設定できます"})]}),e.jsxs(le,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ne,{htmlFor:"enable-notifications",children:"通知を有効にする"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"すべての通知機能を有効/無効にします"})]}),e.jsx(ie,{id:"enable-notifications",checked:r.enabled,onCheckedChange:p=>f("enabled",p),disabled:d!=="granted"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ne,{htmlFor:"daily-reminder",children:"毎日の学習リマインダー"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"指定した時間に学習を促す通知を送信します"})]}),e.jsx(ie,{id:"daily-reminder",checked:r.dailyReminder,onCheckedChange:p=>f("dailyReminder",p),disabled:!r.enabled||d!=="granted"})]}),r.dailyReminder&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(un,{className:"w-4 h-4 text-muted-foreground"}),e.jsx(ne,{htmlFor:"reminder-time",children:"通知時間"}),e.jsx(pn,{id:"reminder-time",type:"time",value:r.reminderTime,onChange:p=>f("reminderTime",p.target.value),className:"w-32"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ne,{htmlFor:"streak-reminder",children:"連続学習記録通知"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"連続学習記録が更新された時に通知します"})]}),e.jsx(ie,{id:"streak-reminder",checked:r.streakReminder,onCheckedChange:p=>f("streakReminder",p),disabled:!r.enabled||d!=="granted"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ne,{htmlFor:"achievement-reminder",children:"実績解除通知"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"新しい実績を獲得した時に通知します"})]}),e.jsx(ie,{id:"achievement-reminder",checked:r.achievementReminder,onCheckedChange:p=>f("achievementReminder",p),disabled:!r.enabled||d!=="granted"})]})]})]}),e.jsx(ae,{children:e.jsxs(le,{className:"pt-6",children:[e.jsxs(pe,{onClick:v,disabled:d!=="granted"||m,className:"w-full",variant:"outline",children:[e.jsx(mn,{className:"w-4 h-4 mr-2"}),m?"テスト中...":"テスト通知を送信"]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"通知が正常に動作するかテストできます"})]})})]}):e.jsx(ae,{children:e.jsx(le,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"通知機能が利用できません"}),e.jsx("p",{className:"text-sm text-gray-600",children:"お使いのブラウザは通知機能をサポートしていません。"})]})})})]})})}export{cs as AppSettings};
